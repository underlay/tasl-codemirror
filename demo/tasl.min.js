(()=>{"use strict";var e={958:(e,t,i)=>{function n(e){return function(e){if(Array.isArray(e))return r(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,t){if(e){if("string"==typeof e)return r(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?r(e,t):void 0}}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}Object.defineProperty(t,"__esModule",{value:!0}),t.editableConfig=t.readOnlyConfig=void 0;var s=i(63),o=i(916),l=i(876),a=i(667),h=i(158),c=i(239),u=i(706),f=i(536);t.readOnlyConfig=[l.EditorView.editable.of(!1),h.lineNumbers(),u.defaultHighlightStyle,c.highlightSelectionMatches(),f.syntax],t.editableConfig=[s.basicSetup,f.syntax,l.keymap([].concat(n(o.defaultKeymap),n(a.commentKeymap),[{key:"Tab",preventDefault:!0,run:o.indentMore},{key:"Shift-Tab",preventDefault:!0,run:o.indentLess}]))]},669:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.errorUnit=void 0;var n=i(893);t.errorUnit=n.APG.product({})},320:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(i(536),t),r(i(284),t),r(i(958),t),r(i(669),t)},284:(e,t,i)=>{function n(e,t){var i;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(i=s(e))||t&&e&&"number"==typeof e.length){i&&(e=i);var n=0,r=function(){};return{s:r,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,l=!0,a=!1;return{s:function(){i=e[Symbol.iterator]()},n:function(){var e=i.next();return l=e.done,e},e:function(e){a=!0,o=e},f:function(){try{l||null==i.return||i.return()}finally{if(a)throw o}}}}function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var i=[],n=!0,r=!1,s=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done)&&(i.push(o.value),!t||i.length!==t);n=!0);}catch(e){r=!0,s=e}finally{try{n||null==l.return||l.return()}finally{if(r)throw s}}return i}}(e,t)||s(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){if(e){if("string"==typeof e)return o(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?o(e,t):void 0}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}function l(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function a(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?l(Object(i),!0).forEach((function(t){h(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):l(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function h(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}Object.defineProperty(t,"__esModule",{value:!0}),t.makeLinter=t.lintView=void 0;var c=i(697),u=i(684),f=i(893),d=i(564),p=i(669);function g(e){var t=e.state,i=u.syntaxTree(t).cursor(),s=function(e){var i=e.from,n=e.to;return t.doc.sliceString(i,n)},o={slice:s,error:function(e,t){return new d.LintError(e.from,e.to,s(e),t)},namespaces:{},references:[],types:a({},d.defaultTypes),schema:{}},l=[];if("Schema"!==i.name)return l.push({from:i.from,to:i.to,message:"Syntax error: invalid document",severity:"error"}),{errors:1,state:t,schema:{},namespaces:{},diagnostics:l};i.firstChild();do{if(i.type.isError);else if("Namespace"===i.type.name){var c="",g=i.node.getChild("Term");if(null!==g)if(c=o.slice(g),d.uriPattern.test(c)){if(!d.namespacePattern.test(c)){var w=g.from,b=g.to;l.push({from:w,to:b,message:"Invalid namespace: namespaces must end in / or #",severity:"error"})}}else{var x=g.from,k=g.to,S="Invalid URI: URIs must match ".concat(d.uriPattern.source);l.push({from:x,to:k,message:S,severity:"error"})}var O=i.node.getChild("Prefix");if(null!==O){var C=o.slice(O);if(C in o.namespaces){var A=O.from,P=O.to,M="Duplicate namespace: ".concat(C);l.push({from:A,to:P,message:M,severity:"error"})}else o.namespaces[C]=c}}else if("Type"===i.type.name){var T=i.node.getChild("TypeName"),E=i.node.getChild("Expression"),D=null===E?p.errorUnit:y(o,l,E);if(null!==T){var I=o.slice(T);if(I in o.types){var L=T.from,R=T.to,N="Invalid type declaration: type ".concat(I," has already been declared");l.push({from:L,to:R,message:N,severity:"error"})}else o.types[I]=D}}else if("Class"===i.type.name){var B=i.node.getChild("Term");if(null!==B){var $=m(o,l,B);if(null!==$)if($ in o.schema){var j=B.from,V=B.to,z="Invalid class declaration: class ".concat($," has already been declared");l.push({from:j,to:V,message:z,severity:"error"})}else{var Q=i.node.getChild("Expression");o.schema[$]=null===Q?p.errorUnit:y(o,l,Q)}}}else if("Edge"===i.type.name){var _=i.node.getChildren("Term"),F=_.map((function(e){return m(o,l,e)}));if(3===_.length&&3===F.length){var U,q=r(_,3),G=q[0],H=q[1],W=q[2],X=r(F,3),K=X[0],J=X[1],Y=X[2];if(J in o.schema){var Z=H.from,ee=H.to,te="Invalid edge declaration: class ".concat(J," has already been declared");l.push({from:Z,to:ee,message:te,severity:"error"})}if(!(K in o.schema)){var ie=G.from,ne=G.to;o.references.push({from:ie,to:ne,key:K})}if(!(Y in o.schema)){var re=W.from,se=W.to;o.references.push({from:re,to:se,key:Y})}var oe=(h(U={},f.ns.source,f.APG.reference(K)),h(U,f.ns.target,f.APG.reference(Y)),U),le=i.node.getChild("Expression");null!==le&&(oe[f.ns.value]=y(o,l,le)),o.schema[J]=f.APG.product(oe)}}else if("List"===i.type.name){var ae=i.node.getChild("Term"),he=i.node.getChild("Expression"),ce=null===he?p.errorUnit:y(o,l,he);if(null!==ae){var ue,fe,de=m(o,l,ae);if(de in o.schema){var pe=ae.from,ge=ae.to,me="Invalid list declaration: class ".concat(de," has already been declared");l.push({from:pe,to:ge,message:me,severity:"error"})}o.schema[de]=f.APG.coproduct((h(fe={},f.ns.none,f.APG.product({})),h(fe,f.ns.some,f.APG.coproduct((h(ue={},f.ns.head,ce),h(ue,f.ns.tail,f.APG.reference(de)),ue))),fe))}}v(l,i)}while(i.nextSibling());var ye,ve=Object.entries(o.namespaces).filter((function(e){var t=r(e,2);return t[0],null!==t[1]})),we=n(o.references);try{for(we.s();!(ye=we.n()).done;){var be=ye.value,xe=be.from,ke=be.to,Se=be.key;if(!(Se in o.schema)){var Oe="Reference error: class ".concat(Se," is not defined");l.push({from:xe,to:ke,message:Oe,severity:"error"})}}}catch(e){we.e(e)}finally{we.f()}var Ce=l.sort((function(e,t){var i=e.from,n=e.to,r=t.from,s=t.to;return i<r?-1:r<i?1:n<s?-1:s<n?1:0}));return{errors:Ce.length,state:t,schema:o.schema,namespaces:a(a({},d.defaultNamespaces),Object.fromEntries(ve)),diagnostics:Ce}}function m(e,t,i){try{return d.parseURI(e,i)}catch(e){if(e instanceof d.LintError){var n=e.from,r=e.to,s=e.message,o=e.value;return t.push({from:n,to:r,message:s,severity:"error"}),o}throw e}}function y(e,t,i){if("Variable"===i.name){var r=e.slice(i);if(r in e.types)return e.types[r];var s=i.from,o=i.to,l="Type ".concat(r," is not defined");return t.push({from:s,to:o,message:l,severity:"error"}),p.errorUnit}if("Optional"===i.name){var a,c=i.getChild("Expression"),u=null===c?p.errorUnit:y(e,t,c);return f.APG.coproduct((h(a={},f.ns.none,f.APG.product({})),h(a,f.ns.some,u),a))}if("Reference"===i.name){var d=i.getChild("Term");if(null===d)return p.errorUnit;var g=m(e,t,d);if(!(g in e.schema)){var v=d.from,w=d.to;e.references.push({from:v,to:w,key:g})}return f.APG.reference(g)}if("Uri"===i.name)return f.APG.uri();if("Literal"===i.name){var b=i.getChild("Term");if(null===b)return p.errorUnit;var x=m(e,t,b);return f.APG.literal(x)}if("Product"===i.name){var k,S={},O=n(i.getChildren("Component"));try{for(O.s();!(k=O.n()).done;){var C=k.value,A=C.getChild("Term");if(null!==A){var P=m(e,t,A);if(P in S){var M=A.from,T=A.to;t.push({from:M,to:T,message:"Duplicate product component key",severity:"error"})}var E=C.getChild("Expression");S[P]=null===E?p.errorUnit:y(e,t,E)}}}catch(e){O.e(e)}finally{O.f()}return{type:"product",components:S}}if("Coproduct"===i.name){var D,I={},L=n(i.getChildren("Option"));try{for(L.s();!(D=L.n()).done;){var R=D.value,N=R.getChild("Term");if(null!==N){var B=m(e,t,N);if(B in I){var $=N.from,j=N.to;t.push({from:$,to:j,message:"Duplicate coproduct option key",severity:"error"})}var V=R.getChild("Expression");I[B]=null===V?f.APG.product({}):y(e,t,V)}}}catch(e){L.e(e)}finally{L.f()}return{type:"coproduct",options:I}}throw new Error("Unexpected Expression node")}function v(e,t){if(t.type.isError){var i=t.from,n=t.to;e.push({from:i,to:n,message:"Syntax error: unexpected or missing token (that's all we know)",severity:"error"})}if(t.firstChild()){do{v(e,t)}while(t.nextSibling());t.parent()}}t.lintView=g,t.makeLinter=function(e){return c.linter((function(t){var i=g(t),n=i.diagnostics,r=function(e,t){if(null==e)return{};var i,n,r=function(e,t){if(null==e)return{};var i,n,r={},s=Object.keys(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||(r[i]=e[i]);return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)i=s[n],t.indexOf(i)>=0||Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}(i,["diagnostics"]);return void 0!==e&&e(r),n}))}},536:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.syntax=void 0;var n=i(684),r=i(706),s=i(53);t.syntax=n.LezerLanguage.define({parser:s.parser.configure({props:[n.indentNodeProp.add({Product:n.continuedIndent({except:/^\s*\}/}),Coproduct:n.continuedIndent({except:/^\s*\]/})}),n.foldNodeProp.add({Product:function(e){return{from:e.from+1,to:e.to-1}},Coproduct:function(e){return{from:e.from+1,to:e.to-1}}}),r.styleTags({Comment:r.tags.comment,Prefix:r.tags.namespace,TypeName:r.tags.typeName,Variable:r.tags.typeName,Term:r.tags.name,"Class/Term":r.tags.className,"Edge/Term":r.tags.className,"Product/Term":r.tags.propertyName,"Coproduct/Term":r.tags.propertyName,Uri:r.tags.string,Literal:r.tags.string,"Literal/Term":r.tags.string,"Reference/Term":r.tags.className,Pointer:r.tags.operator,Optional:r.tags.operator,"{ }":r.tags.bracket,"[ ]":r.tags.bracket,"->":r.tags.separator,"<-":r.tags.separator,";":r.tags.separator,"Namespace/Uri":r.tags.namespace,namespace:r.tags.keyword,type:r.tags.keyword,class:r.tags.keyword,edge:r.tags.keyword,list:r.tags.keyword})]}),languageData:{closeBrackets:{brackets:["[","{","<"]},indentOnInput:/^\s*[\}\]]$/,commentTokens:{line:"#"}}})},774:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n,r=i(459);class s{constructor(e,t,i,n,r,s,o,l,a){this.cx=e,this.stack=t,this.state=i,this.reducePos=n,this.pos=r,this.score=s,this.buffer=o,this.bufferBase=l,this.parent=a}toString(){return`[${this.stack.filter(((e,t)=>t%3==0)).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,i=0){return new s(e,[],t,i,i,0,[],0,null)}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){let t=e>>19,i=65535&e,{parser:n}=this.cx,r=n.dynamicPrecedence(i);if(r&&(this.score+=r),0==t)return i<n.minRepeatTerm&&this.storeNode(i,this.reducePos,this.reducePos,4,!0),void this.pushState(n.getGoto(this.state,i,!0),this.reducePos);let s=this.stack.length-3*(t-1)-(262144&e?6:0),o=this.stack[s-2],l=this.stack[s-1],a=this.bufferBase+this.buffer.length-l;if(i<n.minRepeatTerm||131072&e){let e=n.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(i,o,e,a+4,!0)}if(262144&e)this.state=this.stack[s];else{let e=this.stack[s-3];this.state=n.getGoto(e,i,!0)}for(;this.stack.length>s;)this.stack.pop()}storeNode(e,t,i,n=4,r=!1){if(0==e){let e=this,n=this.buffer.length;if(0==n&&e.parent&&(n=e.bufferBase-e.parent.bufferBase,e=e.parent),n>0&&0==e.buffer[n-4]&&e.buffer[n-1]>-1){if(t==i)return;if(e.buffer[n-2]>=t)return void(e.buffer[n-2]=i)}}if(r&&this.pos!=i){let r=this.buffer.length;if(r>0&&0!=this.buffer[r-4])for(;r>0&&this.buffer[r-2]>i;)this.buffer[r]=this.buffer[r-4],this.buffer[r+1]=this.buffer[r-3],this.buffer[r+2]=this.buffer[r-2],this.buffer[r+3]=this.buffer[r-1],r-=4,n>4&&(n-=4);this.buffer[r]=e,this.buffer[r+1]=t,this.buffer[r+2]=i,this.buffer[r+3]=n}else this.buffer.push(e,t,i,n)}shift(e,t,i){if(131072&e)this.pushState(65535&e,this.pos);else if(0==(262144&e)){let n=this.pos,r=e,{parser:s}=this.cx;(i>this.pos||t<=s.maxNode)&&(this.pos=i,s.stateFlag(r,1)||(this.reducePos=i)),this.pushState(r,n),t<=s.maxNode&&this.buffer.push(t,n,i,4)}else t<=this.cx.parser.maxNode&&this.buffer.push(t,this.pos,i,4),this.pos=i}apply(e,t,i){65536&e?this.reduce(e):this.shift(e,t,i)}useNode(e,t){let i=this.cx.reused.length-1;(i<0||this.cx.reused[i]!=e)&&(this.cx.reused.push(e),i++);let n=this.pos;this.reducePos=this.pos=n+e.length,this.pushState(t,n),this.buffer.push(i,n,this.reducePos,-1)}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let i=e.buffer.slice(t),n=e.bufferBase+t;for(;e&&n==e.bufferBase;)e=e.parent;return new s(this.cx,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,i,n,e)}recoverByDelete(e,t){let i=e<=this.cx.parser.maxNode;i&&this.storeNode(e,this.pos,t),this.storeNode(0,this.pos,t,i?8:4),this.pos=this.reducePos=t,this.score-=200}canShift(e){for(let t=new o(this);;){let i=this.cx.parser.stateSlot(t.top,4)||this.cx.parser.hasAction(t.top,e);if(0==(65536&i))return!0;if(0==i)return!1;t.reduce(i)}}get ruleStart(){for(let e=this.state,t=this.stack.length;;){let i=this.cx.parser.stateSlot(e,5);if(!(65536&i))return 0;if(t-=3*(i>>19),(65535&i)<this.cx.parser.minRepeatTerm)return this.stack[t+1];e=this.stack[t]}}startOf(e,t){let i=this.state,n=this.stack.length,{parser:r}=this.cx;for(;;){let s=r.stateSlot(i,5),o=s>>19,l=65535&s;if(e.indexOf(l)>-1){let e=n-3*(s>>19),i=this.stack[e+1];if(null==t||t>i)return i}if(0==n)return null;0==o?(n-=3,i=this.stack[n]):(n-=3*(o-1),i=r.getGoto(this.stack[n-3],l,!0))}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.cx.parser.nextStates(this.state);if(t.length>4||this.stack.length>=120){let i=t.filter((t=>t!=this.state&&this.cx.parser.hasAction(t,e)));if(this.stack.length<120)for(let e=0;i.length<4&&e<t.length;e++)i.indexOf(t[e])<0&&i.push(t[e]);t=i}let i=[];for(let e=0;e<t.length&&i.length<4;e++){if(t[e]==this.state)continue;let n=this.split();n.storeNode(0,n.pos,n.pos,4,!0),n.pushState(t[e],this.pos),n.score-=200,i.push(n)}return i}forceReduce(){let e=this.cx.parser.stateSlot(this.state,5);return 0!=(65536&e)&&(this.cx.parser.validAction(this.state,e)||(this.storeNode(0,this.reducePos,this.reducePos,4,!0),this.score-=100),this.reduce(e),!0)}forceAll(){for(;!this.cx.parser.stateFlag(this.state,2)&&this.forceReduce(););return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:e}=this.cx;return 65535==e.data[e.stateSlot(this.state,1)]&&!e.stateSlot(this.state,4)}restart(){this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.cx.parser}dialectEnabled(e){return this.cx.parser.dialect.flags[e]}}!function(e){e[e.Token=200]="Token",e[e.Reduce=100]="Reduce",e[e.MaxNext=4]="MaxNext",e[e.MaxInsertStackDepth=300]="MaxInsertStackDepth",e[e.DampenInsertStackDepth=120]="DampenInsertStackDepth"}(n||(n={}));class o{constructor(e){this.stack=e,this.top=e.state,this.rest=e.stack,this.offset=this.rest.length}reduce(e){let t=65535&e,i=e>>19;0==i?(this.rest==this.stack.stack&&(this.rest=this.rest.slice()),this.rest.push(this.top,0,0),this.offset+=3):this.offset-=3*(i-1);let n=this.stack.cx.parser.getGoto(this.rest[this.offset-3],t,!0);this.top=n}}class l{constructor(e,t,i){this.stack=e,this.pos=t,this.index=i,this.buffer=e.buffer,0==this.index&&this.maybeNext()}static create(e){return new l(e,e.bufferBase+e.buffer.length,e.buffer.length)}maybeNext(){let e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new l(this.stack,this.pos,this.index)}}class a{constructor(){this.start=-1,this.value=-1,this.end=-1}accept(e,t){this.value=e,this.end=t}}class h{constructor(e,t){this.data=e,this.id=t}token(e,t,i){!function(e,t,i,n,r){let s=0,o=1<<r,l=n.cx.parser.dialect;e:for(let r=i.start;0!=(o&e[s]);){let a=e[s+1];for(let t=s+3;t<a;t+=2)if((e[t+1]&o)>0){let s=e[t];if(l.allows(s)&&(-1==i.value||i.value==s||n.cx.parser.overrides(s,i.value))){i.accept(s,r);break}}let h=t.get(r++);for(let t=0,i=e[s+2];t<i;){let n=t+i>>1,r=a+n+(n<<1),o=e[r],l=e[r+1];if(h<o)i=n;else{if(!(h>=l)){s=e[r+2];continue e}t=n+1}}break}}(this.data,e,t,i,this.id)}}function c(e,t=Uint16Array){if("string"!=typeof e)return e;let i=null;for(let n=0,r=0;n<e.length;){let s=0;for(;;){let t=e.charCodeAt(n++),i=!1;if(126==t){s=65535;break}t>=92&&t--,t>=34&&t--;let r=t-32;if(r>=46&&(r-=46,i=!0),s+=r,i)break;s*=46}i?i[r++]=s:i=new t(s)}return i}h.prototype.contextual=h.prototype.fallback=h.prototype.extend=!1;const u="undefined"!=typeof process&&/\bparse\b/.test(process.env.LOG);let f=null;function d(e,t,i){let n=e.cursor(t);for(;;)if(!(i<0?n.childBefore(t):n.childAfter(t)))for(;;){if((i<0?n.to<=t:n.from>=t)&&!n.type.isError)return i<0?n.to-1:n.from+1;if(i<0?n.prevSibling():n.nextSibling())break;if(!n.parent())return i<0?0:e.length}}class p{constructor(e){this.fragments=e,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?d(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?d(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let i=this.trees[t],n=this.index[t];if(n==i.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let s=i.children[n],o=this.start[t]+i.positions[n];if(o>e)return this.nextStart=o,null;if(o==e&&o+s.length<=this.safeTo)return o==e&&o>=this.safeFrom?s:null;s instanceof r.TreeBuffer?(this.index[t]++,this.nextStart=o+s.length):(this.index[t]++,o+s.length>=e&&(this.trees.push(s),this.start.push(o),this.index.push(0)))}}}class g extends a{constructor(){super(...arguments),this.extended=-1,this.mask=0}clear(e){this.start=e,this.value=this.extended=-1}}const m=new a;class y{constructor(e){this.tokens=[],this.mainToken=m,this.actions=[],this.tokens=e.tokenizers.map((e=>new g))}getActions(e,t){let i=0,n=null,{parser:r}=e.cx,{tokenizers:s}=r,o=r.stateSlot(e.state,3);for(let r=0;r<s.length;r++){if(0==(1<<r&o))continue;let l=s[r],a=this.tokens[r];if((!n||l.fallback)&&((l.contextual||a.start!=e.pos||a.mask!=o)&&(this.updateCachedToken(a,l,e,t),a.mask=o),0!=a.value)){let t=i;if(a.extended>-1&&(i=this.addActions(e,a.extended,a.end,i)),i=this.addActions(e,a.value,a.end,i),!l.extend&&(n=a,i>t))break}}for(;this.actions.length>i;)this.actions.pop();return n||(n=m,n.start=e.pos,e.pos==t.length?n.accept(e.cx.parser.eofTerm,e.pos):n.accept(0,e.pos+1)),this.mainToken=n,this.actions}updateCachedToken(e,t,i,n){if(e.clear(i.pos),t.token(n,e,i),e.value>-1){let{parser:t}=i.cx;for(let r=0;r<t.specialized.length;r++)if(t.specialized[r]==e.value){let s=t.specializers[r](n.read(e.start,e.end),i);if(s>=0&&i.cx.parser.dialect.allows(s>>1)){0==(1&s)?e.value=s>>1:e.extended=s>>1;break}}}else i.pos==n.length?e.accept(i.cx.parser.eofTerm,i.pos):e.accept(0,i.pos+1)}putAction(e,t,i,n){for(let t=0;t<n;t+=3)if(this.actions[t]==e)return n;return this.actions[n++]=e,this.actions[n++]=t,this.actions[n++]=i,n}addActions(e,t,i,n){let{state:r}=e,{parser:s}=e.cx,{data:o}=s;for(let e=0;e<2;e++)for(let l=s.stateSlot(r,e?2:1);;l+=3){if(65535==o[l]){if(1!=o[l+1]){0==n&&2==o[l+1]&&(n=this.putAction(S(o,l+1),t,i,n));break}l=S(o,l+2)}o[l]==t&&(n=this.putAction(S(o,l+1),t,i,n))}return n}}var v;!function(e){e[e.Distance=5]="Distance",e[e.MaxRemainingPerStep=3]="MaxRemainingPerStep",e[e.MinBufferLengthPrune=200]="MinBufferLengthPrune",e[e.ForceReduceLimit=10]="ForceReduceLimit"}(v||(v={}));class w{constructor(e,t,i,n){this.parser=e,this.input=t,this.startPos=i,this.context=n,this.pos=0,this.recovering=0,this.nextStackID=9812,this.nested=null,this.nestEnd=0,this.nestWrap=null,this.reused=[],this.tokens=new y(e),this.topTerm=e.top[1],this.stacks=[s.start(this,e.top[0],this.startPos)];let r=null==n?void 0:n.fragments;this.fragments=r&&r.length?new p(r):null}advance(){if(this.nested){let e=this.nested.advance();return this.pos=this.nested.pos,e&&(this.finishNested(this.stacks[0],e),this.nested=null),null}let e,t,i,n=this.stacks,r=this.pos,s=this.stacks=[];for(let o=0;o<n.length;o++){let l,a=n[o];for(;;){if(a.pos>r)s.push(a);else if(l=this.checkNest(a))(!i||i.stack.score<a.score)&&(i=l);else{if(this.advanceStack(a,s,n))continue;{e||(e=[],t=[]),e.push(a);let i=this.tokens.mainToken;t.push(i.value,i.end)}}break}}if(i)return this.startNested(i),null;if(!s.length){let t=e&&function(e){let t=null;for(let i of e)i.pos==i.cx.input.length&&i.cx.parser.stateFlag(i.state,2)&&(!t||t.score<i.score)&&(t=i);return t}(e);if(t)return this.stackToTree(t);if(this.parser.strict)throw u&&e&&console.log("Stuck with token "+this.parser.getName(this.tokens.mainToken.value)),new SyntaxError("No parse at "+r);this.recovering||(this.recovering=5)}if(this.recovering&&e){let i=this.runRecovery(e,t,s);if(i)return this.stackToTree(i.forceAll())}if(this.recovering){let e=1==this.recovering?1:3*this.recovering;if(s.length>e)for(s.sort(((e,t)=>t.score-e.score));s.length>e;)s.pop();s.some((e=>e.reducePos>r))&&this.recovering--}else if(s.length>1)e:for(let e=0;e<s.length-1;e++){let t=s[e];for(let i=e+1;i<s.length;i++){let n=s[i];if(t.sameState(n)||t.buffer.length>200&&n.buffer.length>200){if(!((t.score-n.score||t.buffer.length-n.buffer.length)>0)){s.splice(e--,1);continue e}s.splice(i--,1)}}}this.pos=s[0].pos;for(let e=1;e<s.length;e++)s[e].pos<this.pos&&(this.pos=s[e].pos);return null}advanceStack(e,t,i){let n=e.pos,{input:s,parser:o}=this,l=u?this.stackID(e)+" -> ":"";if(this.fragments)for(let t=this.fragments.nodeAt(n);t;){let i=this.parser.nodeSet.types[t.type.id]==t.type?o.getGoto(e.state,t.type.id):-1;if(i>-1&&t.length)return e.useNode(t,i),u&&console.log(l+this.stackID(e)+` (via reuse of ${o.getName(t.type.id)})`),!0;if(!(t instanceof r.Tree)||0==t.children.length||t.positions[0]>0)break;let n=t.children[0];if(!(n instanceof r.Tree))break;t=n}let a=o.stateSlot(e.state,4);if(a>0)return e.reduce(a),u&&console.log(l+this.stackID(e)+` (via always-reduce ${o.getName(65535&a)})`),!0;let h=this.tokens.getActions(e,s);for(let r=0;r<h.length;){let s=h[r++],a=h[r++],c=h[r++],f=r==h.length||!i,d=f?e:e.split();if(d.apply(s,a,c),u&&console.log(l+this.stackID(d)+` (via ${0==(65536&s)?"shift":`reduce of ${o.getName(65535&s)}`} for ${o.getName(a)} @ ${n}${d==e?"":", split"})`),f)return!0;d.pos>n?t.push(d):i.push(d)}return!1}advanceFully(e,t){let i=e.pos;for(;;){let n=this.checkNest(e);if(n)return n;if(!this.advanceStack(e,null,null))return!1;if(e.pos>i)return b(e,t),!0}}runRecovery(e,t,i){let n,r=null,s=!1;for(let o=0;o<e.length;o++){let l=e[o],a=t[o<<1],h=t[1+(o<<1)],c=u?this.stackID(l)+" -> ":"";if(l.deadEnd){if(s)continue;s=!0,l.restart(),u&&console.log(c+this.stackID(l)+" (restarted)");let e=this.advanceFully(l,i);if(e){!0!==e&&(n=e);continue}}let f=l.split(),d=c;for(let e=0;f.forceReduce()&&e<10;e++){u&&console.log(d+this.stackID(f)+" (via force-reduce)");let e=this.advanceFully(f,i);if(e){!0!==e&&(n=e);break}u&&(d=this.stackID(f)+" -> ")}for(let e of l.recoverByInsert(a))u&&console.log(c+this.stackID(e)+" (via recover-insert)"),this.advanceFully(e,i);this.input.length>l.pos?(h==l.pos&&(h++,a=0),l.recoverByDelete(a,h),u&&console.log(c+this.stackID(l)+` (via recover-delete ${this.parser.getName(a)})`),b(l,i)):(!r||r.score<l.score)&&(r=l)}if(r)return r;if(n)for(let e of this.stacks)if(e.score>n.stack.score){n=void 0;break}return n&&this.startNested(n),null}forceFinish(){let e=this.stacks[0].split();return this.nested&&this.finishNested(e,this.nested.forceFinish()),this.stackToTree(e.forceAll())}stackToTree(e,t=e.pos){return r.Tree.build({buffer:l.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.startPos,length:t-this.startPos,minRepeatType:this.parser.minRepeatTerm})}checkNest(e){let t=this.parser.findNested(e.state);if(!t)return null;let i=t.value;return"function"==typeof i&&(i=i(this.input,e)),i?{stack:e,info:t,spec:i}:null}startNested(e){let{stack:t,info:i,spec:n}=e;this.stacks=[t],this.nestEnd=this.scanForNestEnd(t,i.end,n.filterEnd),this.nestWrap="number"==typeof n.wrapType?this.parser.nodeSet.types[n.wrapType]:n.wrapType||null,n.startParse?this.nested=n.startParse(this.input.clip(this.nestEnd),t.pos,this.context):this.finishNested(t)}scanForNestEnd(e,t,i){for(let n=e.pos;n<this.input.length;n++)if(m.start=n,m.value=-1,t.token(this.input,m,e),m.value>-1&&(!i||i(this.input.read(n,m.end))))return n;return this.input.length}finishNested(e,t){this.nestWrap?t=new r.Tree(this.nestWrap,t?[t]:[],t?[0]:[],this.nestEnd-e.pos):t||(t=new r.Tree(r.NodeType.none,[],[],this.nestEnd-e.pos));let i=this.parser.findNested(e.state);e.useNode(t,this.parser.getGoto(e.state,i.placeholder,!0)),u&&console.log(this.stackID(e)+" (via unnest)")}stackID(e){let t=(f||(f=new WeakMap)).get(e);return t||f.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function b(e,t){for(let i=0;i<t.length;i++){let n=t[i];if(n.pos==e.pos&&n.sameState(e))return void(t[i].score<e.score&&(t[i]=e))}t.push(e)}class x{constructor(e,t,i){this.source=e,this.flags=t,this.disabled=i}allows(e){return!this.disabled||0==this.disabled[e]}}class k{constructor(e){if(this.bufferLength=r.DefaultBufferLength,this.strict=!1,this.nextStateCache=[],this.cachedDialect=null,13!=e.version)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (13)`);let t=c(e.tokenData),i=e.nodeNames.split(" ");this.minRepeatTerm=i.length;for(let t=0;t<e.repeatNodeCount;t++)i.push("");let n=[];for(let e=0;e<i.length;e++)n.push([]);function s(e,t,i){n[e].push([t,t.deserialize(String(i))])}if(e.nodeProps)for(let t of e.nodeProps){let e=t[0];for(let i=1;i<t.length;){let n=t[i++];if(n>=0)s(n,e,t[i++]);else{let r=t[i+-n];for(let o=-n;o>0;o--)s(t[i++],e,r);i++}}}if(this.specialized=new Uint16Array(e.specialized?e.specialized.length:0),this.specializers=[],e.specialized)for(let t=0;t<e.specialized.length;t++)this.specialized[t]=e.specialized[t].term,this.specializers[t]=e.specialized[t].get;this.states=c(e.states,Uint32Array),this.data=c(e.stateData),this.goto=c(e.goto);let o=Object.keys(e.topRules).map((t=>e.topRules[t][1]));this.nodeSet=new r.NodeSet(i.map(((t,i)=>r.NodeType.define({name:i>=this.minRepeatTerm?void 0:t,id:i,props:n[i],top:o.indexOf(i)>-1,error:0==i,skipped:e.skippedNodes&&e.skippedNodes.indexOf(i)>-1})))),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map((e=>"number"==typeof e?new h(t,e):e)),this.topRules=e.topRules,this.nested=(e.nested||[]).map((([e,t,i,n])=>({name:e,value:t,end:new h(c(i),0),placeholder:n}))),this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1;for(let e=0,t=this.states.length/6;e<t;e++)this.nextStateCache[e]=null;this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}parse(e,t=0,i={}){"string"==typeof e&&(e=r.stringInput(e));let n=new w(this,e,t,i);for(;;){let e=n.advance();if(e)return e}}startParse(e,t=0,i={}){return"string"==typeof e&&(e=r.stringInput(e)),new w(this,e,t,i)}getGoto(e,t,i=!1){let n=this.goto;if(t>=n[0])return-1;for(let r=n[t+1];;){let t=n[r++],s=1&t,o=n[r++];if(s&&i)return o;for(let i=r+(t>>1);r<i;r++)if(n[r]==e)return o;if(s)return-1}}hasAction(e,t){let i=this.data;for(let n=0;n<2;n++)for(let r,s=this.stateSlot(e,n?2:1);;s+=3){if(65535==(r=i[s])){if(1!=i[s+1]){if(2==i[s+1])return S(i,s+2);break}r=i[s=S(i,s+2)]}if(r==t||0==r)return S(i,s+1)}return 0}stateSlot(e,t){return this.states[6*e+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}findNested(e){let t=this.stateSlot(e,0);return 4&t?this.nested[t>>10]:null}validAction(e,t){if(t==this.stateSlot(e,4))return!0;for(let i=this.stateSlot(e,1);;i+=3){if(65535==this.data[i]){if(1!=this.data[i+1])return!1;i=S(this.data,i+2)}if(t==S(this.data,i+1))return!0}}nextStates(e){let t=this.nextStateCache[e];if(t)return t;let i=[];for(let t=this.stateSlot(e,1);;t+=3){if(65535==this.data[t]){if(1!=this.data[t+1])break;t=S(this.data,t+2)}0==(1&this.data[t+2])&&i.indexOf(this.data[t+1])<0&&i.push(this.data[t+1])}let n=this.goto,r=n[0];for(let t=0;t<r;t++)for(let r=n[t+1];;){let t=n[r++],s=n[r++];for(let o=r+(t>>1);r<o;r++)n[r]==e&&i.indexOf(s)<0&&i.push(s);if(1&t)break}return this.nextStateCache[e]=i}overrides(e,t){let i=O(this.data,this.tokenPrecTable,t);return i<0||O(this.data,this.tokenPrecTable,e)<i}configure(e){let t=Object.assign(Object.create(k.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let i=this.topRules[e.top];if(!i)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=i}return e.tokenizers&&(t.tokenizers=this.tokenizers.map((t=>{let i=e.tokenizers.find((e=>e.from==t));return i?i.to:t}))),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.nested&&(t.nested=this.nested.map((t=>Object.prototype.hasOwnProperty.call(e.nested,t.name)?{name:t.name,value:e.nested[t.name],end:t.end,placeholder:t.placeholder}:t))),null!=e.strict&&(t.strict=e.strict),null!=e.bufferLength&&(t.bufferLength=e.bufferLength),t}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get hasNested(){return this.nested.length>0}dynamicPrecedence(e){let t=this.dynamicPrecedences;return null==t?0:t[e]||0}parseDialect(e){if(this.cachedDialect&&this.cachedDialect.source==e)return this.cachedDialect;let t=Object.keys(this.dialects),i=t.map((()=>!1));if(e)for(let n of e.split(" ")){let e=t.indexOf(n);e>=0&&(i[e]=!0)}let n=null;for(let e=0;e<t.length;e++)if(!i[e])for(let i,r=this.dialects[t[e]];65535!=(i=this.data[r++]);)(n||(n=new Uint8Array(this.maxTerm+1)))[i]=1;return this.cachedDialect=new x(e,i,n)}static deserialize(e){return new k(e)}}function S(e,t){return e[t]|e[t+1]<<16}function O(e,t,i){for(let n,r=t;65535!=(n=e[r]);r++)if(n==i)return r-t;return-1}t.NodeProp=r.NodeProp,t.NodeSet=r.NodeSet,t.NodeType=r.NodeType,t.Tree=r.Tree,t.TreeCursor=r.TreeCursor,t.ExternalTokenizer=class{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}},t.Parser=k,t.Stack=s,t.Token=a},459:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0});const i=1024;let n=0;const r=new WeakMap;class s{constructor({deserialize:e}={}){this.id=n++,this.deserialize=e||(()=>{throw new Error("This node type doesn't define a deserialize function")})}static string(){return new s({deserialize:e=>e})}static number(){return new s({deserialize:Number})}static flag(){return new s({deserialize:()=>!0})}set(e,t){return e[this.id]=t,e}add(e){return"function"!=typeof e&&(e=l.match(e)),t=>{let i=e(t);return void 0===i?null:[this,i]}}}s.closedBy=new s({deserialize:e=>e.split(" ")}),s.openedBy=new s({deserialize:e=>e.split(" ")}),s.group=new s({deserialize:e=>e.split(" ")});const o=Object.create(null);class l{constructor(e,t,i,n=0){this.name=e,this.props=t,this.id=i,this.flags=n}static define(e){let t=e.props&&e.props.length?Object.create(null):o,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),n=new l(e.name||"",t,e.id,i);if(e.props)for(let i of e.props)Array.isArray(i)||(i=i(n)),i&&i[0].set(t,i[1]);return n}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(s.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let n of i.split(" "))t[n]=e[i];return e=>{for(let i=e.prop(s.group),n=-1;n<(i?i.length:0);n++){let r=t[n<0?e.name:i[n]];if(r)return r}}}}l.none=new l("",Object.create(null),0,8);class a{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let i of this.types){let n=null;for(let t of e){let e=t(i);e&&(n||(n=Object.assign({},i.props)),e[0].set(n,e[1]))}t.push(n?new l(i.name,n,i.id,i.flags):i)}return new a(t)}}class h{constructor(e,t,i,n){this.type=e,this.children=t,this.positions=i,this.length=n}toString(){let e=this.children.map((e=>e.toString())).join();return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(e.length?"("+e+")":""):e}cursor(e,t=0){let i=null!=e&&r.get(this)||this.topNode,n=new g(i);return null!=e&&(n.moveTo(e,t),r.set(this,n._tree)),n}fullCursor(){return new g(this.topNode,!0)}get topNode(){return new u(this,0,0,null)}resolve(e,t=0){return this.cursor(e,t).node}iterate(e){let{enter:t,leave:i,from:n=0,to:r=this.length}=e;for(let e=this.cursor();;){let s=!1;if(e.from<=r&&e.to>=n&&(e.type.isAnonymous||!1!==t(e.type,e.from,e.to))){if(e.firstChild())continue;e.type.isAnonymous||(s=!0)}for(;s&&i&&i(e.type,e.from,e.to),s=e.type.isAnonymous,!e.nextSibling();){if(!e.parent())return;s=!0}}}balance(e=i){return this.children.length<=v?this:w(this.type,l.none,this.children,this.positions,0,this.children.length,0,e,this.length)}static build(e){return function(e){var t;let{buffer:n,nodeSet:r,topID:s=0,maxBufferLength:o=i,reused:a=[],minRepeatType:u=r.types.length}=e,f=Array.isArray(n)?new y(n,n.length):n,d=r.types;function p(e,t,i,n,s){let{id:m,start:y,end:b,size:x}=f;for(;m==s;)f.next(),({id:m,start:y,end:b,size:x}=f);let k=y-e;if(x<0)return i.push(a[m]),n.push(k),void f.next();let S,O,C=d[m];if(b-y<=o&&(O=function(e,t){let i=f.fork(),n=0,r=0,s=0,l=i.end-o,a={size:0,start:0,skip:0};e:for(let o=i.pos-e;i.pos>o;){if(i.id==t){a.size=n,a.start=r,a.skip=s,s+=4,n+=4,i.next();continue}let e=i.size,h=i.pos-e;if(e<0||h<o||i.start<l)break;let c=i.id>=u?4:0,f=i.start;for(i.next();i.pos>h;){if(i.size<0)break e;i.id>=u&&(c+=4),i.next()}r=f,n+=e,s+=c}return(t<0||n==e)&&(a.size=n,a.start=r,a.skip=s),a.size>4?a:void 0}(f.pos-t,s))){let t=new Uint16Array(O.size-O.skip),i=f.pos-O.size,n=t.length;for(;f.pos>i;)n=g(O.start,t,n,s);S=new c(t,b-O.start,r,s<0?l.none:d[s]),k=O.start-e}else{let e=f.pos-x;f.next();let t=[],i=[],n=m>=u?m:-1;for(;f.pos>e;)p(y,e,t,i,n);t.reverse(),i.reverse(),S=n>-1&&t.length>v?w(C,C,t,i,0,t.length,0,o,b-y):new h(C,t,i,b-y)}i.push(S),n.push(k)}function g(e,t,i,n){let{id:r,start:s,end:o,size:l}=f;if(f.next(),r==n)return i;let a=i;if(l>4){let r=f.pos-(l-4);for(;f.pos>r;)i=g(e,t,i,n)}return r<u&&(t[--i]=a,t[--i]=o-e,t[--i]=s-e,t[--i]=r),i}let m=[],b=[];for(;f.pos>0;)p(e.start||0,0,m,b,-1);let x=null!==(t=e.length)&&void 0!==t?t:m.length?b[0]+m[0].length:0;return new h(d[s],m.reverse(),b.reverse(),x)}(e)}}h.empty=new h(l.none,[],[],0);class c{constructor(e,t,i,n=l.none){this.buffer=e,this.length=t,this.set=i,this.type=n}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],n=this.set.types[t],r=n.name;if(/\W/.test(r)&&!n.isError&&(r=JSON.stringify(r)),i==(e+=4))return r;let s=[];for(;e<i;)s.push(this.childString(e)),e=this.buffer[e+3];return r+"("+s.join(",")+")"}findChild(e,t,i,n){let{buffer:r}=this,s=-1;for(let o=e;o!=t;o=r[o+3])if(-1e8!=n){let e=r[o+1],t=r[o+2];if(i>0){if(t>n&&(s=o),t>n)break}else if(e<n&&(s=o),t>=n)break}else if(s=o,i>0)break;return s}}class u{constructor(e,t,i,n){this.node=e,this.from=t,this.index=i,this._parent=n}get type(){return this.node.type}get name(){return this.node.type.name}get to(){return this.from+this.node.length}nextChild(e,t,i,n=!1){for(let r=this;;){for(let{children:s,positions:o}=r.node,l=t>0?s.length:-1;e!=l;e+=t){let l=s[e],a=o[e]+r.from;if(-1e8==i||!(t<0?a>=i:a+l.length<=i))if(l instanceof c){let n=l.findChild(0,l.buffer.length,t,-1e8==i?-1e8:i-a);if(n>-1)return new p(new d(r,l,e,a),null,n)}else if(n||!l.type.isAnonymous||m(l)){let s=new u(l,a,e,r);return n||!s.type.isAnonymous?s:s.nextChild(t<0?l.children.length-1:0,t,i)}}if(n||!r.type.isAnonymous)return null;if(e=r.index+t,r=r._parent,!r)return null}}get firstChild(){return this.nextChild(0,1,-1e8)}get lastChild(){return this.nextChild(this.node.children.length-1,-1,-1e8)}childAfter(e){return this.nextChild(0,1,e)}childBefore(e){return this.nextChild(this.node.children.length-1,-1,e)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent?this._parent.nextChild(this.index+1,1,-1):null}get prevSibling(){return this._parent?this._parent.nextChild(this.index-1,-1,-1):null}get cursor(){return new g(this)}resolve(e,t=0){return this.cursor.moveTo(e,t).node}getChild(e,t=null,i=null){let n=f(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return f(this,e,t,i)}toString(){return this.node.toString()}}function f(e,t,i,n){let r=e.cursor,s=[];if(!r.firstChild())return s;if(null!=i)for(;!r.type.is(i);)if(!r.nextSibling())return s;for(;;){if(null!=n&&r.type.is(n))return s;if(r.type.is(t)&&s.push(r.node),!r.nextSibling())return null==n?s:[]}}class d{constructor(e,t,i,n){this.parent=e,this.buffer=t,this.index=i,this.start=n}}class p{constructor(e,t,i){this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t){let{buffer:i}=this.context,n=i.findChild(this.index+4,i.buffer[this.index+3],e,-1e8==t?-1e8:t-this.context.start);return n<0?null:new p(this.context,this,n)}get firstChild(){return this.child(1,-1e8)}get lastChild(){return this.child(-1,-1e8)}childAfter(e){return this.child(1,e)}childBefore(e){return this.child(-1,e)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,-1)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new p(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new p(this.context,this._parent,e.findChild(t,this.index,-1,-1e8))}get cursor(){return new g(this)}resolve(e,t=0){return this.cursor.moveTo(e,t).node}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,i=null){let n=f(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return f(this,e,t,i)}}class g{constructor(e,t=!1){if(this.full=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof u)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:i,buffer:n}=this.buffer;return this.type=t||n.set.types[n.buffer[e]],this.from=i+n.buffer[e+1],this.to=i+n.buffer[e+2],!0}yield(e){return!!e&&(e instanceof u?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enter(e,t){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree.node.children.length-1:0,e,t,this.full));let{buffer:i}=this.buffer,n=i.findChild(this.index+4,i.buffer[this.index+3],e,-1e8==t?-1e8:t-this.buffer.start);return!(n<0)&&(this.stack.push(this.index),this.yieldBuf(n))}firstChild(){return this.enter(1,-1e8)}lastChild(){return this.enter(-1,-1e8)}childAfter(e){return this.enter(1,e)}childBefore(e){return this.enter(-1,e)}parent(){if(!this.buffer)return this.yieldNode(this.full?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.full?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree._parent.nextChild(this._tree.index+e,e,-1e8,this.full));let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let e=i<0?0:this.stack[i]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,-1e8))}else{let e=t.buffer[this.index+3];if(e<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(e)}return i<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,-1e8,this.full))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(n.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:i}=n)}else({index:t,_parent:i}=this._tree);for(;i;({index:t,_parent:i}=i))for(let n=t+e,r=e<0?-1:i.node.children.length;n!=r;n+=e){let e=i.node.children[n];if(this.full||!e.type.isAnonymous||e instanceof c||m(e))return!1}return!0}move(e){if(this.enter(e,-1e8))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(){return this.move(1)}prev(){return this.move(-1)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;t<0?this.childBefore(e):this.childAfter(e);)if(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e)){this.parent();break}return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let n=this.index,r=this.stack.length;r>=0;){for(let s=e;s;s=s._parent)if(s.index==n){if(n==this.index)return s;t=s,i=r+1;break e}n=this.stack[--r]}for(let e=i;e<this.stack.length;e++)t=new p(this.buffer,t,this.stack[e]);return this.bufferNode=new p(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree.node}}function m(e){return e.children.some((e=>!e.type.isAnonymous||e instanceof c||m(e)))}class y{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new y(this.buffer,this.index)}}const v=8;function w(e,t,i,n,r,s,o,a,c){let u=[],f=[];if(c<=a)for(let e=r;e<s;e++)u.push(i[e]),f.push(n[e]-o);else{let e=Math.max(a,Math.ceil(1.5*c/v));for(let c=r;c<s;){let r=c,d=n[c];for(c++;c<s&&!(n[c]+i[c].length-d>e);c++);if(c==r+1){let n=i[r];if(n instanceof h&&n.type==t&&n.length>e<<1){for(let e=0;e<n.children.length;e++)u.push(n.children[e]),f.push(n.positions[e]+d-o);continue}u.push(n)}else if(c==r+1)u.push(i[r]);else{let e=w(t,t,i,n,r,c,d,a,n[c-1]+i[c-1].length-d);t==l.none||b(e.children,t)||(e=new h(l.none,e.children,e.positions,e.length)),u.push(e)}f.push(d-o)}}return new h(e,u,f,c)}function b(e,t){for(let i of e)if(i.type==t)return!0;return!1}class x{constructor(e,t,i,n,r){this.from=e,this.to=t,this.tree=i,this.offset=n,this.open=r}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static applyChanges(e,t,i=128){if(!t.length)return e;let n=[],r=1,s=e.length?e[0]:null,o=0,l=0,a=0;for(;;){let h=o<t.length?t[o++]:null,c=h?h.fromA:1e9;if(c-l>=i)for(;s&&s.from<c;){let t=s;if(l>=t.from||c<=t.to||a){let e=Math.max(t.from,l)-a,i=Math.min(t.to,c)-a;t=e>=i?null:new x(e,i,t.tree,t.offset+a,(o>0?1:0)|(h?2:0))}if(t&&n.push(t),s.to>c)break;s=r<e.length?e[r++]:null}if(!h)break;l=h.toA,a=h.toA-h.toB}return n}static addTree(e,t=[],i=!1){let n=[new x(0,e.length,e,0,i?2:0)];for(let i of t)i.to>e.length&&n.push(i);return n}}class k{constructor(e,t=e.length){this.string=e,this.length=t}get(e){return e<0||e>=this.length?-1:this.string.charCodeAt(e)}lineAfter(e){if(e<0)return"";let t=this.string.indexOf("\n",e);return this.string.slice(e,t<0?this.length:Math.min(t,this.length))}read(e,t){return this.string.slice(e,Math.min(this.length,t))}clip(e){return new k(this.string,e)}}t.DefaultBufferLength=i,t.NodeProp=s,t.NodeSet=a,t.NodeType=l,t.Tree=h,t.TreeBuffer=c,t.TreeCursor=g,t.TreeFragment=x,t.stringInput=function(e){return new k(e)}},63:(e,t,i)=>{i.r(t),i.d(t,{EditorState:()=>r.EditorState,EditorView:()=>n.EditorView,basicSetup:()=>rt});var n=i(876),r=i(400);const s=r.Annotation.define(),o=r.Annotation.define(),l=r.Facet.define(),a=r.Facet.define({combine:e=>(0,r.combineConfig)(e,{minDepth:100,newGroupDelay:500},{minDepth:Math.max,newGroupDelay:Math.min})}),h=r.StateField.define({create:()=>O.empty,update(e,t){let i=t.state.facet(a),n=t.annotation(s);if(n){let r=m.fromTransaction(t),s=n.side,o=0==s?e.undone:e.done;return o=r?y(o,o.length,i.minDepth,r):b(o,t.startState.selection),new O(0==s?n.rest:o,0==s?o:n.rest)}let l=t.annotation(o);if("full"!=l&&"before"!=l||(e=e.isolate()),!1===t.annotation(r.Transaction.addToHistory))return t.changes.length?e.addMapping(t.changes.desc):e;let h=m.fromTransaction(t),c=t.annotation(r.Transaction.time),u=t.annotation(r.Transaction.userEvent);return h?e=e.addChanges(h,c,u,i.newGroupDelay,i.minDepth):t.selection&&(e=e.addSelection(t.startState.selection,c,u,i.newGroupDelay)),"full"!=l&&"after"!=l||(e=e.isolate()),e}});function c(e,t){return function({state:i,dispatch:n}){let r=i.field(h,!1);if(!r)return!1;let s=r.pop(e,i,t);return!!s&&(n(s),!0)}}const u=c(0,!1),f=c(1,!1),d=c(0,!0),p=c(1,!0);function g(e){return function(t){let i=t.field(h,!1);if(!i)return 0;let n=0==e?i.done:i.undone;return n.length-(n.length&&!n[0].changes?1:0)}}g(0),g(1);class m{constructor(e,t,i,n,r){this.changes=e,this.effects=t,this.mapped=i,this.startSelection=n,this.selectionsAfter=r}setSelAfter(e){return new m(this.changes,this.effects,this.mapped,this.startSelection,e)}static fromTransaction(e){let t=w;for(let i of e.startState.facet(l)){let n=i(e);n.length&&(t=t.concat(n))}return!t.length&&e.changes.empty?null:new m(e.changes.invert(e.startState.doc),t,void 0,e.startState.selection,w)}static selection(e){return new m(void 0,w,void 0,void 0,e)}}function y(e,t,i,n){let r=t+1>i+20?t-i-1:0,s=e.slice(r,t);return s.push(n),s}function v(e,t){return e.length?t.length?e.concat(t):e:t}const w=[];function b(e,t){if(e.length){let i=e[e.length-1],n=i.selectionsAfter.slice(Math.max(0,i.selectionsAfter.length-200));return n.length&&n[n.length-1].eq(t)?e:(n.push(t),y(e,e.length-1,1e9,i.setSelAfter(n)))}return[m.selection([t])]}function x(e){let t=e[e.length-1],i=e.slice();return i[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),i}function k(e,t){if(!e.length)return e;let i=e.length,n=w;for(;i;){let r=S(e[i-1],t,n);if(r.changes&&!r.changes.empty||r.effects.length){let t=e.slice(0,i);return t[i-1]=r,t}t=r.mapped,i--,n=r.selectionsAfter}return n.length?[m.selection(n)]:w}function S(e,t,i){let n=v(e.selectionsAfter.length?e.selectionsAfter.map((e=>e.map(t))):w,i);if(!e.changes)return m.selection(n);let s=e.changes.map(t),o=t.mapDesc(e.changes,!0),l=e.mapped?e.mapped.composeDesc(o):o;return new m(s,r.StateEffect.mapEffects(e.effects,t),l,e.startSelection.map(o),n)}class O{constructor(e,t,i=0,n){this.done=e,this.undone=t,this.prevTime=i,this.prevUserEvent=n}isolate(){return this.prevTime?new O(this.done,this.undone):this}addChanges(e,t,i,n,r){let s=this.done,o=s[s.length-1];return s=o&&o.changes&&t-this.prevTime<n&&!o.selectionsAfter.length&&o.changes.length&&e.changes&&function(e,t){let i=[],n=!1;return e.iterChangedRanges(((e,t)=>i.push(e,t))),t.iterChangedRanges(((e,t,r,s)=>{for(let e=0;e<i.length;){let t=i[e++],o=i[e++];s>=t&&r<=o&&(n=!0)}})),n}(o.changes,e.changes)?y(s,s.length-1,r,new m(e.changes.compose(o.changes),v(e.effects,o.effects),o.mapped,o.startSelection,w)):y(s,s.length,r,e),new O(s,w,t,i)}addSelection(e,t,i,n){let r=this.done.length?this.done[this.done.length-1].selectionsAfter:w;return r.length>0&&t-this.prevTime<n&&"keyboardselection"==i&&this.prevUserEvent==i&&(s=r[r.length-1],o=e,s.ranges.length==o.ranges.length&&0===s.ranges.filter(((e,t)=>e.empty!=o.ranges[t].empty)).length)?this:new O(b(this.done,e),this.undone,t,i);var s,o}addMapping(e){return new O(k(this.done,e),k(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,i){let n=0==e?this.done:this.undone;if(0==n.length)return null;let r=n[n.length-1];if(i&&r.selectionsAfter.length)return t.update({selection:r.selectionsAfter[r.selectionsAfter.length-1],annotations:s.of({side:e,rest:x(n)})});if(r.changes){let i=1==n.length?w:n.slice(0,n.length-1);return r.mapped&&(i=k(i,r.mapped)),t.update({changes:r.changes,selection:r.startSelection,effects:r.effects,annotations:s.of({side:e,rest:i}),filter:!1})}return null}}O.empty=new O(w,w);const C=[{key:"Mod-z",run:u,preventDefault:!0},{key:"Mod-y",mac:"Mod-Shift-z",run:f,preventDefault:!0},{key:"Mod-u",run:d,preventDefault:!0},{key:"Alt-u",mac:"Mod-Shift-u",run:p,preventDefault:!0}];var A=i(684),P=i(158);function M(e,t){let i=t.mapPos(e.from,1),n=t.mapPos(e.to,-1);return i>=n?void 0:{from:i,to:n}}const T=r.StateEffect.define({map:M}),E=r.StateEffect.define({map:M});function D(e){let t=[];for(let{head:i}of e.state.selection.ranges)t.some((e=>e.from<=i&&e.to>=i))||t.push(e.visualLineAt(i));return t}const I=r.StateField.define({create:()=>n.Decoration.none,update(e,t){e=e.map(t.changes);for(let i of t.effects)i.is(T)&&!R(e,i.value.from,i.value.to)?e=e.update({add:[z.range(i.value.from,i.value.to)]}):i.is(E)&&(e=e.update({filter:(e,t)=>i.value.from!=e||i.value.to!=t,filterFrom:i.value.from,filterTo:i.value.to}));if(t.selection){let i=!1,{head:n}=t.selection.primary;e.between(n,n,((e,t)=>{e<n&&t>n&&(i=!0)})),i&&(e=e.update({filterFrom:n,filterTo:n,filter:(e,t)=>t<=n||e>=n}))}return e},provide:[n.EditorView.decorations]});function L(e,t,i){var n;let r=null;return null===(n=e.field(I,!1))||void 0===n||n.between(t,i,((e,t)=>{(!r||r.from>e)&&(r={from:e,to:t})})),r}function R(e,t,i){let n=!1;return e.between(t,t,((e,r)=>{e==t&&r==i&&(n=!0)})),n}function N(e){return e.field(I,!1)?void 0:{append:V()}}const B=[{key:"Ctrl-Shift-[",mac:"Cmd-Alt-[",run:e=>{for(let t of D(e)){let i=(0,A.foldable)(e.state,t.from,t.to);if(i)return e.dispatch({effects:T.of(i),reconfigure:N(e.state)}),!0}return!1}},{key:"Ctrl-Shift-]",mac:"Cmd-Alt-]",run:e=>{if(!e.state.field(I,!1))return!1;let t=[];for(let i of D(e)){let n=L(e.state,i.from,i.to);n&&t.push(E.of(n))}return t.length&&e.dispatch({effects:t}),t.length>0}},{key:"Ctrl-Alt-[",run:e=>{let{state:t}=e,i=[];for(let n=0;n<t.doc.length;){let r=e.visualLineAt(n),s=(0,A.foldable)(t,r.from,r.to);s&&i.push(T.of(s)),n=(s?e.visualLineAt(s.to):r).to+1}return i.length&&e.dispatch({effects:i,reconfigure:N(e.state)}),!!i.length}},{key:"Ctrl-Alt-]",run:e=>{let t=e.state.field(I,!1);if(!t||!t.size)return!1;let i=[];return t.between(0,e.state.doc.length,((e,t)=>{i.push(E.of({from:e,to:t}))})),e.dispatch({effects:i}),!0}}],$={placeholderDOM:null,placeholderText:""},j=r.Facet.define({combine:e=>(0,r.combineConfig)(e,$)});function V(e){let t=[I,F];return e&&t.push(j.of(e)),t}const z=n.Decoration.replace({widget:new class extends n.WidgetType{ignoreEvents(){return!1}toDOM(e){let{state:t}=e,i=t.facet(j);if(i.placeholderDOM)return i.placeholderDOM();let r=document.createElement("span");return r.textContent=i.placeholderText,r.setAttribute("aria-label",t.phrase("folded code")),r.title=t.phrase("unfold"),r.className=(0,n.themeClass)("foldPlaceholder"),r.onclick=t=>{let i=e.visualLineAt(e.posAtDOM(t.target)),n=L(e.state,i.from,i.to);n&&e.dispatch({effects:E.of(n)}),t.preventDefault()},r}}}),Q={openText:"",closedText:""};class _ extends P.GutterMarker{constructor(e,t){super(),this.config=e,this.open=t}eq(e){return this.config==e.config&&this.open==e.open}toDOM(e){let t=document.createElement("span");return t.textContent=this.open?this.config.openText:this.config.closedText,t.title=e.state.phrase(this.open?"Fold line":"Unfold line"),t}}const F=n.EditorView.baseTheme({$foldPlaceholder:{backgroundColor:"#eee",border:"1px solid #ddd",color:"#888",borderRadius:".2em",margin:"0 1px",padding:"0 1px",cursor:"pointer"},"$gutterElement.foldGutter":{padding:"0 1px",cursor:"pointer"}});var U=i(916),q=i(837),G=i(33),H=i(27);const W={brackets:["(","[","{","'",'"'],before:")]}'\":;>"},X=r.StateEffect.define({map(e,t){let i=t.mapPos(e,-1,r.MapMode.TrackAfter);return null==i?void 0:i}}),K=r.StateEffect.define({map:(e,t)=>t.mapPos(e)}),J=new class extends G.uU{};J.startSide=1,J.endSide=-1;const Y=r.StateField.define({create:()=>G.Xs.empty,update(e,t){if(t.selection){let i=t.state.doc.lineAt(t.selection.primary.head).from,n=t.startState.doc.lineAt(t.startState.selection.primary.head).from;i!=t.changes.mapPos(n,-1)&&(e=G.Xs.empty)}e=e.map(t.changes);for(let i of t.effects)i.is(X)?e=e.update({add:[J.range(i.value,i.value+1)]}):i.is(K)&&(e=e.update({filter:e=>e!=i.value}));return e}}),Z="()[]{}<>";function ee(e){for(let t=0;t<Z.length;t+=2)if(Z.charCodeAt(t)==e)return Z.charAt(t+1);return(0,H.bg)(e<128?e:e+1)}function te(e,t){return e.languageDataAt("closeBrackets",t)[0]||W}const ie=[{key:"Backspace",run:({state:e,dispatch:t})=>{let i=te(e,e.selection.primary.head).brackets||W.brackets,n=null,s=e.changeByRange((t=>{if(t.empty){let n=function(e,t){let i=e.sliceString(t-2,t);return(0,H.nZ)((0,H.gm)(i,0))==i.length?i:i.slice(1)}(e.doc,t.head);for(let s of i)if(s==n&&re(e.doc,t.head)==ee((0,H.gm)(s,0)))return{changes:{from:t.head-s.length,to:t.head+s.length},range:r.EditorSelection.cursor(t.head-s.length),annotations:r.Transaction.userEvent.of("delete")}}return{range:n=t}}));return n||t(e.update(s,{scrollIntoView:!0})),!n}}];function ne(e,t){let i=!1;return e.field(Y).between(0,e.doc.length,(e=>{e==t&&(i=!0)})),i}function re(e,t){let i=e.sliceString(t,t+2);return i.slice(0,(0,H.nZ)((0,H.gm)(i,0)))}function se(e,t,i,n){let s=null,o=e.changeByRange((o=>{if(!o.empty)return{changes:[{insert:t,from:o.from},{insert:i,from:o.to}],effects:X.of(o.to+t.length),range:r.EditorSelection.range(o.anchor+t.length,o.head+t.length)};let l=re(e.doc,o.head);return!l||/\s/.test(l)||n.indexOf(l)>-1?{changes:{insert:t+i,from:o.head},effects:X.of(o.head+t.length),range:r.EditorSelection.cursor(o.head+t.length)}:{range:s=o}}));return s?null:e.update(o,{scrollIntoView:!0,annotations:r.Transaction.userEvent.of("input")})}function oe(e,t,i){let n=null,s=e.selection.ranges.map((t=>t.empty&&re(e.doc,t.head)==i?r.EditorSelection.cursor(t.head+i.length):n=t));return n?null:e.update({selection:r.EditorSelection.create(s,e.selection.primaryIndex),scrollIntoView:!0,effects:e.selection.ranges.map((({from:e})=>K.of(e)))})}function le(e,t,i){let n=null,s=e.changeByRange((s=>{if(!s.empty)return{changes:[{insert:t,from:s.from},{insert:t,from:s.to}],effects:X.of(s.to+t.length),range:r.EditorSelection.range(s.anchor+t.length,s.head+t.length)};let o=s.head,l=re(e.doc,o);if(l==t){if(ae(e,o))return{changes:{insert:t+t,from:o},effects:X.of(o+t.length),range:r.EditorSelection.cursor(o+t.length)};if(ne(e,o)){let n=i&&e.sliceDoc(o,o+3*t.length)==t+t+t;return{range:r.EditorSelection.cursor(o+t.length*(n?3:1)),effects:K.of(o)}}}else{if(i&&e.sliceDoc(o-2*t.length,o)==t+t&&ae(e,o-2*t.length))return{changes:{insert:t+t+t+t,from:o},effects:X.of(o+t.length),range:r.EditorSelection.cursor(o+t.length)};if(e.charCategorizer(o)(l)!=r.CharCategory.Word){let i=e.sliceDoc(o-1,o);if(i!=t&&e.charCategorizer(o)(i)!=r.CharCategory.Word)return{changes:{insert:t+t,from:o},effects:X.of(o+t.length),range:r.EditorSelection.cursor(o+t.length)}}}return{range:n=s}}));return n?null:e.update(s,{scrollIntoView:!0,annotations:r.Transaction.userEvent.of("input")})}function ae(e,t){let i=(0,A.syntaxTree)(e).resolve(t+1);return i.parent&&i.from==t}var he=i(132),ce=i(672);class ue{constructor(e,t,i){this.state=e,this.pos=t,this.explicit=i,this.abortListeners=[]}tokenBefore(e){let t=(0,A.syntaxTree)(this.state).resolve(this.pos,-1);for(;t&&e.indexOf(t.name)<0;)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),i=Math.max(t.from,this.pos-250),n=t.slice(i-t.from,this.pos-t.from),r=n.search(pe(e,!1));return r<0?null:{from:i+r,to:this.pos,text:n.slice(r)}}get aborted(){return null==this.abortListeners}addEventListener(e,t){this.abortListeners&&this.abortListeners.push(t)}}class fe{constructor(e,t,i){this.completion=e,this.source=t,this.match=i}}function de(e){return e.selection.primary.head}function pe(e,t){var i;let{source:n}=e,r=t&&"^"!=n[0],s="$"!=n[n.length-1];return r||s?new RegExp(`${r?"^":""}(?:${n})${s?"$":""}`,null!==(i=e.flags)&&void 0!==i?i:e.ignoreCase?"i":""):e}function ge(e,t){let i=t.completion.apply||t.completion.label,n=t.source;"string"==typeof i?e.dispatch({changes:{from:n.from,to:n.to,insert:i},selection:{anchor:n.from+i.length}}):i(e,t.completion,n.from,n.to)}class me{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[];for(let t=0;t<e.length;){let i=(0,H.gm)(e,t),n=(0,H.nZ)(i);this.chars.push(i);let r=e.slice(t,t+n),s=r.toUpperCase();this.folded.push((0,H.gm)(s==r?r.toLowerCase():s,0)),t+=n}this.astral=e.length!=this.chars.length}match(e){if(0==this.pattern.length)return[0];if(e.length<this.pattern.length)return null;let{chars:t,folded:i,any:n,precise:r,byWord:s}=this;if(1==t.length){let n=(0,H.gm)(e,0);return n==t[0]?[0,0,(0,H.nZ)(n)]:n==i[0]?[-200,0,(0,H.nZ)(n)]:null}let o=e.indexOf(this.pattern);if(0==o)return[0,0,this.pattern.length];let l=t.length,a=0;if(o<0){for(let r=0,s=Math.min(e.length,200);r<s&&a<l;){let s=(0,H.gm)(e,r);s!=t[a]&&s!=i[a]||(n[a++]=r),r+=(0,H.nZ)(s)}if(a<l)return null}let h=0,c=0,u=!1,f=0,d=-1,p=-1;for(let n=0,a=Math.min(e.length,200),g=0;n<a&&c<l;){let a=(0,H.gm)(e,n);o<0&&(h<l&&a==t[h]&&(r[h++]=n),f<l&&(a==t[f]||a==i[f]?(0==f&&(d=n),p=n,f++):f=0));let m,y=a<255?a>=48&&a<=57||a>=97&&a<=122?2:a>=65&&a<=90?1:0:(m=(0,H.bg)(a))!=m.toLowerCase()?1:m!=m.toUpperCase()?2:0;(1==y||0==g&&0!=y&&(this.chars[c]==a||this.folded[c]==a&&(u=!0)))&&(s[c++]=n),g=y,n+=(0,H.nZ)(a)}return c==l&&0==s[0]?this.result((u?-200:0)-100,s,e):f==l&&0==d?[-200,0,p]:o>-1?[-700,o,o+this.pattern.length]:f==l?[-900,d,p]:c==l?this.result((u?-200:0)-100-700,s,e):2==t.length?null:this.result((n[0]?-700:0)-200-1100,n,e)}result(e,t,i){let n=[e],r=1;for(let e of t){let t=e+(this.astral?(0,H.nZ)((0,H.gm)(i,e)):1);r>1&&n[r-1]==e?n[r-1]=t:(n[r++]=e,n[r++]=t)}return n}}const ye=r.Facet.define({combine:e=>(0,r.combineConfig)(e,{activateOnTyping:!0,override:null,maxRenderedOptions:100})}),ve=n.EditorView.baseTheme({"$tooltip.autocomplete":{"& > ul":{fontFamily:"monospace",overflowY:"auto",whiteSpace:"nowrap",maxHeight:"10em",listStyle:"none",margin:0,padding:0,"& > li":{cursor:"pointer",padding:"1px 1em 1px 3px",lineHeight:1.2},"& > li[aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"}}},"$completionListIncompleteTop:before, $completionListIncompleteBottom:after":{content:'""',opacity:.5,display:"block",textAlign:"center"},"$tooltip.completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"300px"},"$tooltip.completionInfo.left":{right:"100%"},"$tooltip.completionInfo.right":{left:"100%"},"$$light $snippetField":{backgroundColor:"#ddd"},"$$dark $snippetField":{backgroundColor:"#333"},$snippetFieldPosition:{verticalAlign:"text-top",width:0,height:"1.15em",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},$completionMatchedText:{textDecoration:"underline"},$completionDetail:{marginLeft:"0.5em",fontStyle:"italic"},$completionIcon:{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6"},"$completionIcon.function, $completionIcon.method":{"&:after":{content:"''"}},"$completionIcon.class":{"&:after":{content:"''"}},"$completionIcon.interface":{"&:after":{content:"''"}},"$completionIcon.variable":{"&:after":{content:"''"}},"$completionIcon.constant":{"&:after":{content:"''"}},"$completionIcon.type":{"&:after":{content:"''"}},"$completionIcon.enum":{"&:after":{content:"''"}},"$completionIcon.property":{"&:after":{content:"''"}},"$completionIcon.keyword":{"&:after":{content:"''"}},"$completionIcon.namespace":{"&:after":{content:"''"}},"$completionIcon.text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});function we(e,t,i){const r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true");for(let s=i.from;s<i.to;s++){let{completion:i,match:o}=e[s];const l=r.appendChild(document.createElement("li"));l.id=t+"-"+s;let a=l.appendChild(document.createElement("div"));a.className=(0,n.themeClass)("completionIcon"+(i.type?"."+i.type:"")),a.setAttribute("aria-hidden","true");let h=l.appendChild(document.createElement("span"));h.className=(0,n.themeClass)("completionLabel");let{label:c,detail:u}=i,f=0;for(let e=1;e<o.length;){let t=o[e++],i=o[e++];t>f&&h.appendChild(document.createTextNode(c.slice(f,t)));let r=h.appendChild(document.createElement("span"));r.appendChild(document.createTextNode(c.slice(t,i))),r.className=(0,n.themeClass)("completionMatchedText"),f=i}if(f<c.length&&h.appendChild(document.createTextNode(c.slice(f))),u){let e=l.appendChild(document.createElement("span"));e.className=(0,n.themeClass)("completionDetail"),e.textContent=u}l.setAttribute("role","option")}return i.from&&r.classList.add((0,n.themeClass)("completionListIncompleteTop")),i.to<e.length&&r.classList.add((0,n.themeClass)("completionListIncompleteBottom")),r}function be(e,t,i){if(e<=i)return{from:0,to:e};if(t<=e>>1){let e=Math.floor(t/i);return{from:e*i,to:(e+1)*i}}let n=Math.floor((e-t)/i);return{from:e-(n+1)*i,to:e-n*i}}class xe{constructor(e,t){this.view=e,this.stateField=t,this.info=null,this.placeInfo={read:()=>this.measureInfo(),write:e=>this.positionInfo(e),key:this};let i=e.state.field(t),{options:n,selected:r}=i.open,s=e.state.facet(ye);this.range=be(n.length,r,s.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.addEventListener("mousedown",(t=>{for(let i,r=t.target;r&&r!=this.dom;r=r.parentNode)if("LI"==r.nodeName&&(i=/-(\d+)$/.exec(r.id))&&+i[1]<n.length)return ge(e,n[+i[1]]),void t.preventDefault()})),this.list=this.dom.appendChild(we(n,i.id,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfo)}))}mount(){this.updateSel()}update(e){e.state.field(this.stateField)!=e.prevState.field(this.stateField)&&this.updateSel()}positioned(){this.info&&this.view.requestMeasure(this.placeInfo)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=be(t.options.length,t.selected,this.view.state.facet(ye).maxRenderedOptions),this.list.remove(),this.list=this.dom.appendChild(we(t.options,e.id,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfo)}))),this.updateSelectedOption(t.selected)){this.info&&(this.info.remove(),this.info=null);let e=t.options[t.selected];e.completion.info&&(this.info=this.dom.appendChild(function(e){let t=document.createElement("div");t.className=(0,n.themeClass)("tooltip.completionInfo");let{info:i}=e.completion;return"string"==typeof i?t.textContent=i:t.appendChild(i(e.completion)),t}(e)),this.view.requestMeasure(this.placeInfo))}}updateSelectedOption(e){let t=null;for(let i=this.list.firstChild,n=this.range.from;i;i=i.nextSibling,n++)n==e?i.hasAttribute("aria-selected")||(i.setAttribute("aria-selected","true"),t=i):i.hasAttribute("aria-selected")&&i.removeAttribute("aria-selected");return t&&function(e,t){let i=e.getBoundingClientRect(),n=t.getBoundingClientRect();n.top<i.top?e.scrollTop-=i.top-n.top:n.bottom>i.bottom&&(e.scrollTop+=n.bottom-i.bottom)}(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e)return null;let t=this.dom.getBoundingClientRect(),i=e.getBoundingClientRect().top-t.top;if(i<0||i>this.list.clientHeight-10)return null;let r=this.view.textDirection==n.Direction.RTL,s=t.left,o=innerWidth-t.right;return r&&s<Math.min(300,o)?r=!1:!r&&o<Math.min(300,s)&&(r=!0),{top:i,left:r}}positionInfo(e){this.info&&e&&(this.info.style.top=e.top+"px",this.info.classList.toggle("cm-tooltip-completionInfo-left",e.left),this.info.classList.toggle("cm-tooltip-completionInfo-right",!e.left))}}class ke{constructor(e,t,i,n,r){this.options=e,this.attrs=t,this.tooltip=i,this.timestamp=n,this.selected=r}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new ke(this.options,Oe(t,e),this.tooltip,this.timestamp,e)}static build(e,t,i,n){let r=function(e,t){let i=[];for(let n of e)if(n.hasResult()){let e,r=new me(t.sliceDoc(n.from,n.to));for(let t of n.result.options)(e=r.match(t.label))&&(null!=t.boost&&(e[0]+=t.boost),i.push(new fe(t,n,e)))}return i.sort(Pe),i.length>300?i.slice(0,300):i}(e,t);if(!r.length)return null;let s=0;if(n){let e=n.options[n.selected].completion;for(let t=0;t<r.length&&!s;t++)r[t].completion==e&&(s=t)}return new ke(r,Oe(i,s),[{pos:e.reduce(((e,t)=>t.hasResult()?Math.min(e,t.from):e),1e8),style:"autocomplete",create:(o=Re,e=>new xe(e,o))}],n?n.timestamp:Date.now(),s);var o}map(e){return new ke(this.options,this.attrs,[Object.assign(Object.assign({},this.tooltip[0]),{pos:e.mapPos(this.tooltip[0].pos)})],this.timestamp,this.selected)}}class Se{constructor(e,t,i){this.active=e,this.id=t,this.open=i}static start(){return new Se(Ae,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(e){let{state:t}=e,i=t.facet(ye),n=(i.override||t.languageDataAt("autocomplete",de(t))).map((t=>(this.active.find((e=>e.source==t))||new Me(t,0,!1)).update(e,i)));n.length==this.active.length&&n.every(((e,t)=>e==this.active[t]))&&(n=this.active);let r=e.selection||n.some((t=>t.hasResult()&&e.changes.touchesRange(t.from,t.to)))||!function(e,t){if(e==t)return!0;for(let i=0,n=0;;){for(;i<e.length&&!e[i].hasResult;)i++;for(;n<t.length&&!t[n].hasResult;)n++;let r=i==e.length,s=n==t.length;if(r||s)return r==s;if(e[i++].result!=t[n++].result)return!1}}(n,this.active)?ke.build(n,t,this.id,this.open):this.open&&e.docChanged?this.open.map(e.changes):this.open;for(let t of e.effects)t.is(Le)&&(r=r&&r.setSelected(t.value,this.id));return n==this.active&&r==this.open?this:new Se(n,this.id,r)}get tooltip(){return this.open?this.open.tooltip:Ae}get attrs(){return this.open?this.open.attrs:Ce}}function Oe(e,t){return{"aria-autocomplete":"list","aria-activedescendant":e+"-"+t,"aria-owns":e}}const Ce={"aria-autocomplete":"list"},Ae=[];function Pe(e,t){let i=t.match[0]-e.match[0];if(i)return i;let n=e.completion.label,r=t.completion.label;return n<r?-1:n==r?0:1}class Me{constructor(e,t,i){this.source=e,this.state=t,this.explicit=i}hasResult(){return!1}update(e,t){let i=e.annotation(r.Transaction.userEvent),n=this;"input"==i||"delete"==i?n=n.handleUserEvent(e,i,t):e.docChanged?n=n.handleChange(e):e.selection&&0!=n.state&&(n=new Me(n.source,0,!1));for(let t of e.effects)if(t.is(Ee))n=new Me(n.source,1,t.value);else if(t.is(De))n=new Me(n.source,0,!1);else if(t.is(Ie))for(let e of t.value)e.source==n.source&&(n=e);return n}handleUserEvent(e,t,i){return"delete"!=t&&i.activateOnTyping?new Me(this.source,1,!1):this}handleChange(e){return e.changes.touchesRange(de(e.startState))?new Me(this.source,0,!1):this}}class Te extends Me{constructor(e,t,i,n,r,s){super(e,2,t),this.result=i,this.from=n,this.to=r,this.span=s}hasResult(){return!0}handleUserEvent(e,t,i){let n=e.changes.mapPos(this.from),r=e.changes.mapPos(this.to,1),s=de(e.state);return(this.explicit?s<n:s<=n)||s>r?new Me(this.source,"input"==t&&i.activateOnTyping?1:0,!1):this.span&&(n==r||this.span.test(e.state.sliceDoc(n,r)))?new Te(this.source,this.explicit,this.result,n,r,this.span):new Me(this.source,1,this.explicit)}handleChange(e){return e.changes.touchesRange(this.from,this.to)?new Me(this.source,0,!1):new Te(this.source,this.explicit,this.result,e.changes.mapPos(this.from),e.changes.mapPos(this.to,1),this.span)}map(e){return new Te(this.source,this.explicit,this.result,e.mapPos(this.from),e.mapPos(this.to,1),this.span)}}const Ee=r.StateEffect.define(),De=r.StateEffect.define(),Ie=r.StateEffect.define({map:(e,t)=>e.map((e=>e.hasResult()&&!t.empty?e.map(t):e))}),Le=r.StateEffect.define(),Re=r.StateField.define({create:()=>Se.start(),update:(e,t)=>e.update(t),provide:[ce.hJ.nFrom((e=>e.tooltip)),n.EditorView.contentAttributes.from((e=>e.attrs))]});function Ne(e,t="option"){return i=>{let n=i.state.field(Re,!1);if(!n||!n.open||Date.now()-n.open.timestamp<75)return!1;let r,s=1;"page"==t&&(r=i.dom.querySelector(".cm-tooltip-autocomplete"))&&(s=Math.max(2,Math.floor(r.offsetHeight/r.firstChild.offsetHeight)));let o=n.open.selected+s*(e?1:-1),{length:l}=n.open.options;return o<0?o="page"==t?0:l-1:o>=l&&(o="page"==t?l-1:0),i.dispatch({effects:Le.of(o)}),!0}}const Be=e=>{let t=e.state.field(Re,!1);return!(!t||!t.open||Date.now()-t.open.timestamp<75||(ge(e,t.open.options[t.open.selected]),0))};class $e{constructor(e,t){this.source=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const je=n.ViewPlugin.fromClass(class{constructor(e){this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.composing=0;for(let t of e.state.field(Re).active)1==t.state&&this.startQuery(t)}update(e){let t=e.state.field(Re);if(!e.selectionSet&&!e.docChanged&&e.prevState.field(Re)==t)return;let i=e.transactions.some((e=>{let t=e.annotation(r.Transaction.userEvent);return(e.selection||e.docChanged)&&"input"!=t&&"delete"!=t}));for(let t=0;t<this.running.length;t++){let r=this.running[t];if(i||r.updates.length+e.transactions.length>50&&r.time-Date.now()>1e3){for(let e of r.context.abortListeners)try{e()}catch(e){(0,n.logException)(this.view.state,e)}r.context.abortListeners=null,this.running.splice(t--,1)}else r.updates.push(...e.transactions)}if(this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),this.debounceUpdate=t.active.some((e=>1==e.state&&!this.running.some((t=>t.source==e.source))))?setTimeout((()=>this.startUpdate()),50):-1,0!=this.composing)for(let t of e.transactions)"input"==t.annotation(r.Transaction.userEvent)?this.composing=2:2==this.composing&&t.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1;let{state:e}=this.view,t=e.field(Re);for(let e of t.active)1!=e.state||this.running.some((t=>t.source==e.source))||this.startQuery(e)}startQuery(e){let{state:t}=this.view,i=de(t),r=new ue(t,i,e.explicit),s=new $e(e.source,r);this.running.push(s),Promise.resolve(e.source(r)).then((e=>{s.context.aborted||(s.done=e||null,this.scheduleAccept())}),(e=>{this.view.dispatch({effects:De.of(null)}),(0,n.logException)(this.view.state,e)}))}scheduleAccept(){this.running.every((e=>void 0!==e.done))?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout((()=>this.accept()),50))}accept(){var e;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],i=this.view.state.facet(ye);for(let n=0;n<this.running.length;n++){let r=this.running[n];if(void 0===r.done)continue;if(this.running.splice(n--,1),r.done){let n=new Te(r.source,r.context.explicit,r.done,r.done.from,null!==(e=r.done.to)&&void 0!==e?e:de(r.updates.length?r.updates[0].startState:this.view.state),r.done.span?pe(r.done.span,!0):null);for(let e of r.updates)n=n.update(e,i);if(n.hasResult()){t.push(n);continue}}let s=this.view.state.field(Re).active.find((e=>e.source==r.source));if(s&&1==s.state)if(null==r.done){let e=new Me(r.source,0,!1);for(let t of r.updates)e=e.update(t,i);1!=e.state&&t.push(e)}else this.startQuery(s)}t.length&&this.view.dispatch({effects:Ie.of(t)})}},{eventHandlers:{compositionstart(){this.composing=1},compositionend(){3==this.composing&&this.view.dispatch({effects:Ee.of(!1)}),this.composing=0}}});let Ve=n.Decoration.widget({widget:new class extends n.WidgetType{toDOM(){let e=document.createElement("span");return e.className=(0,n.themeClass)("snippetFieldPosition"),e}ignoreEvent(){return!1}}}),ze=n.Decoration.mark({class:(0,n.themeClass)("snippetField")});class Qe{constructor(e,t){this.ranges=e,this.active=t,this.deco=n.Decoration.set(e.map((e=>(e.from==e.to?Ve:ze).range(e.from,e.to))))}map(e){return new Qe(this.ranges.map((t=>t.map(e))),this.active)}selectionInsideField(e){return e.ranges.every((e=>this.ranges.some((t=>t.field==this.active&&t.from<=e.from&&t.to>=e.to))))}}const _e=r.StateEffect.define({map:(e,t)=>e&&e.map(t)}),Fe=r.StateEffect.define(),Ue=r.StateField.define({create:()=>null,update(e,t){for(let i of t.effects){if(i.is(_e))return i.value;if(i.is(Fe)&&e)return new Qe(e.ranges,i.value)}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.selectionInsideField(t.selection)&&(e=null),e},provide:[n.EditorView.decorations.from((e=>e?e.deco:n.Decoration.none))]});function qe(e){return({state:t,dispatch:i})=>{let n=t.field(Ue,!1);if(!n||e<0&&0==n.active)return!1;let s=n.active+e,o=e>0&&!n.ranges.some((t=>t.field==s+e));return i(t.update({selection:(l=n.ranges,a=s,r.EditorSelection.create(l.filter((e=>e.field==a)).map((e=>r.EditorSelection.range(e.from,e.to))))),effects:_e.of(o?null:new Qe(n.ranges,s))})),!0;var l,a}}(0,r.precedence)((0,n.keymap)([{key:"Tab",run:qe(1),shift:qe(-1)},{key:"Escape",run:({state:e,dispatch:t})=>!!e.field(Ue,!1)&&(t(e.update({effects:_e.of(null)})),!0)}]),"override");const Ge=[{key:"Mod-Space",run:e=>!!e.state.field(Re,!1)&&(e.dispatch({effects:Ee.of(!0)}),!0)},{key:"Escape",run:e=>{let t=e.state.field(Re,!1);return!(!t||!t.active.some((e=>0!=e.state))||(e.dispatch({effects:De.of(null)}),0))}}];var He=i(667);const We=2e3;function Xe(e,t){let i=e.posAtCoords({x:t.clientX,y:t.clientY});if(null==i)return null;let n=e.state.doc.lineAt(i),r=i-n.from,s=r>We?-1:r==n.length?function(e,t){let i=e.coordsAtPos(e.viewport.from);return i?Math.round(Math.abs((i.left-t)/e.defaultCharacterWidth)):-1}(e,t.clientX):(0,H.IS)(n.slice(0,i-n.from),0,e.state.tabSize);return{line:n.number,col:s,off:r}}var Ke=i(166);const Je="undefined"==typeof Symbol?"__goto-line":Symbol("goto-line");function Ye(e){let t=document.createElement("form");t.innerHTML=`<label>${e.state.phrase("Go to line:")} <input class=${(0,n.themeClass)("textfield")} name=line></label>\n<button class=${(0,n.themeClass)("button")} type=submit>${e.state.phrase("go")}</button>`;let i=t.querySelector("input");function s(){let t=parseInt(i.value,10);e.dispatch({reconfigure:{[Je]:[Ze]},selection:!isNaN(t)&&t>0&&t<=e.state.doc.lines?r.EditorSelection.cursor(e.state.doc.line(t).from):void 0,scrollIntoView:!0}),e.focus()}return t.addEventListener("keydown",(t=>{27==t.keyCode?(t.preventDefault(),e.dispatch({reconfigure:{append:[Ze]}}),e.focus()):13==t.keyCode&&(t.preventDefault(),s())})),t.addEventListener("submit",s),{dom:t,style:"gotoLine",pos:-10}}const Ze=n.EditorView.baseTheme({"$panel.gotoLine":{padding:"2px 6px 4px","& label":{fontSize:"80%"}}}),et=[{key:"Alt-g",run:e=>{let t=(0,Ke.Sd)(e,Ye);return t||(e.dispatch({reconfigure:{append:[(0,Ke.h0)(),Ke.mH.of(Ye),Ze]}}),t=(0,Ke.Sd)(e,Ye)),t&&t.dom.querySelector("input").focus(),!0}}];var tt=i(239),it=i(706),nt=i(697);const rt=[(0,P.lineNumbers)(),(0,n.highlightSpecialChars)(),function(e={}){return[h,a.of(e)]}(),function(e={}){let t=Object.assign(Object.assign({},Q),e),i=new _(t,!0),n=new _(t,!1);return[(0,P.gutter)({style:"foldGutter",lineMarker:(e,t)=>L(e.state,t.from,t.to)?n:(0,A.foldable)(e.state,t.from,t.to)?i:null,initialSpacer:()=>new _(t,!1),domEventHandlers:{click:(e,t)=>{let i=L(e.state,t.from,t.to);if(i)return e.dispatch({effects:E.of(i)}),!0;let n=(0,A.foldable)(e.state,t.from,t.to);return!!n&&(e.dispatch({effects:T.of(n)}),!0)}}}),V()]}(),(0,n.drawSelection)(),r.EditorState.allowMultipleSelections.of(!0),(0,A.indentOnInput)(),it.defaultHighlightStyle,(0,q.n)(),[n.EditorView.inputHandler.of((function(e,t,i,n){if(e.composing)return!1;let r=e.state.selection.primary;if(n.length>2||2==n.length&&1==(0,H.nZ)((0,H.gm)(n,0))||t!=r.from||i!=r.to)return!1;let s=function(e,t){let i=te(e,e.selection.primary.head),n=i.brackets||W.brackets;for(let r of n){let s=ee((0,H.gm)(r,0));if(t==r)return s==r?le(e,r,n.indexOf(r+r+r)>-1):se(e,r,s,i.before||W.before);if(t==s&&ne(e,e.selection.primary.from))return oe(e,0,s)}return null}(e.state,n);return!!s&&(e.dispatch(s),!0)})),Y],function(e={}){return[Re,ye.of(e),je,ve,(0,ce.jH)(),(0,r.precedence)((0,n.keymap)([{key:"ArrowDown",run:Ne(!0)},{key:"ArrowUp",run:Ne(!1)},{key:"PageDown",run:Ne(!0,"page")},{key:"PageUp",run:Ne(!1,"page")},{key:"Enter",run:Be}]),"override")]}(),function(e){let t=e=>e.altKey&&0==e.button;return n.EditorView.mouseSelectionStyle.of(((e,i)=>t(i)?function(e,t){let i=Xe(e,t),n=e.state.selection;return i?{update(e){if(e.docChanged){let t=e.changes.mapPos(e.prevState.doc.line(i.line).from),r=e.state.doc.lineAt(t);i={line:r.number,col:i.col,off:Math.min(i.off,r.length)},n=n.map(e.changes)}},get(t,s,o){let l=Xe(e,t);if(!l)return n;let a=function(e,t,i){let n=Math.min(t.line,i.line),s=Math.max(t.line,i.line),o=[];if(t.off>We||i.off>We||t.col<0||i.col<0){let l=Math.min(t.off,i.off),a=Math.max(t.off,i.off);for(let t=n;t<=s;t++){let i=e.doc.line(t);i.length<=a&&o.push(r.EditorSelection.range(i.from+l,i.to+a))}}else{let l=Math.min(t.col,i.col),a=Math.max(t.col,i.col);for(let t=n;t<=s;t++){let i=e.doc.line(t),n=i.length>We?i.slice(0,2*a):i.slice(),s=(0,H.Gz)(n,0,l,e.tabSize),h=(0,H.Gz)(n,0,a,e.tabSize);s.leftOver||o.push(r.EditorSelection.range(i.from+s.offset,i.from+h.offset))}}return o}(e.state,i,l);return a.length?o?r.EditorSelection.create(a.concat(n.ranges)):r.EditorSelection.create(a):n}}:null}(e,i):null))}(),(0,tt.highlightActiveLine)(),(0,tt.highlightSelectionMatches)(),(0,n.keymap)([...ie,...U.defaultKeymap,...he.Lp,...C,...B,...He.commentKeymap,...et,...Ge,...nt.lintKeymap])]},916:(e,t,i)=>{i.r(t),i.d(t,{copyLineDown:()=>$e,copyLineUp:()=>Be,cursorCharBackward:()=>y,cursorCharForward:()=>m,cursorCharLeft:()=>p,cursorCharRight:()=>g,cursorDocEnd:()=>ue,cursorDocStart:()=>ce,cursorGroupBackward:()=>k,cursorGroupForward:()=>x,cursorGroupLeft:()=>w,cursorGroupRight:()=>b,cursorLineBoundaryBackward:()=>N,cursorLineBoundaryForward:()=>R,cursorLineDown:()=>T,cursorLineEnd:()=>$,cursorLineStart:()=>B,cursorLineUp:()=>M,cursorMatchingBracket:()=>V,cursorPageDown:()=>I,cursorPageUp:()=>D,cursorSyntaxLeft:()=>C,cursorSyntaxRight:()=>A,defaultKeymap:()=>He,deleteCharBackward:()=>ke,deleteCharForward:()=>Se,deleteCodePointBackward:()=>be,deleteCodePointForward:()=>xe,deleteGroupBackward:()=>Ce,deleteGroupForward:()=>Ae,deleteLine:()=>je,deleteToLineEnd:()=>Pe,deleteTrailingWhitespace:()=>Me,emacsStyleKeymap:()=>qe,indentLess:()=>Ue,indentMore:()=>Fe,indentSelection:()=>_e,insertNewline:()=>Ve,insertNewlineAndIndent:()=>ze,moveLineDown:()=>Re,moveLineUp:()=>Le,selectAll:()=>pe,selectCharBackward:()=>G,selectCharForward:()=>q,selectCharLeft:()=>F,selectCharRight:()=>U,selectDocEnd:()=>de,selectDocStart:()=>fe,selectGroupBackward:()=>J,selectGroupForward:()=>K,selectGroupLeft:()=>W,selectGroupRight:()=>X,selectLine:()=>ge,selectLineBoundaryBackward:()=>le,selectLineBoundaryForward:()=>oe,selectLineDown:()=>ie,selectLineEnd:()=>he,selectLineStart:()=>ae,selectLineUp:()=>te,selectMatchingBracket:()=>z,selectPageDown:()=>se,selectPageUp:()=>re,selectParentSyntax:()=>me,selectSyntaxLeft:()=>Y,selectSyntaxRight:()=>Z,simplifySelection:()=>ye,splitLine:()=>Te,standardKeymap:()=>Ge,transposeChars:()=>Ee});var n=i(400),r=i(27),s=i(876),o=i(837),l=i(684),a=i(346);function h(e,t){return n.EditorSelection.create(e.ranges.map(t),e.primaryIndex)}function c(e,t){return e.update({selection:t,scrollIntoView:!0,annotations:n.Transaction.userEvent.of("keyboardselection")})}function u({state:e,dispatch:t},i){let n=h(e.selection,i);return!n.eq(e.selection)&&(t(c(e,n)),!0)}function f(e,t){return n.EditorSelection.cursor(t?e.to:e.from)}function d(e,t){return u(e,(i=>i.empty?e.moveByChar(i,t):f(i,t)))}const p=e=>d(e,e.textDirection!=s.Direction.LTR),g=e=>d(e,e.textDirection==s.Direction.LTR),m=e=>d(e,!0),y=e=>d(e,!1);function v(e,t){return u(e,(i=>i.empty?e.moveByGroup(i,t):f(i,t)))}const w=e=>v(e,e.textDirection!=s.Direction.LTR),b=e=>v(e,e.textDirection==s.Direction.LTR),x=e=>v(e,!0),k=e=>v(e,!1);function S(e,t,i){if(t.type.prop(i))return!0;let n=t.to-t.from;return n&&(n>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}function O(e,t,i){let r,s,h=(0,l.syntaxTree)(e).resolve(t.head),c=i?a.md.closedBy:a.md.openedBy;for(let n=t.head;;){let t=i?h.childAfter(n):h.childBefore(n);if(!t)break;S(e,t,c)?h=t:n=i?t.to:t.from}return s=h.type.prop(c)&&(r=i?(0,o.U)(e,h.from,1):(0,o.U)(e,h.to,-1))&&r.matched?i?r.end.to:r.end.from:i?h.to:h.from,n.EditorSelection.cursor(s,i?-1:1)}const C=e=>u(e,(t=>O(e.state,t,e.textDirection!=s.Direction.LTR))),A=e=>u(e,(t=>O(e.state,t,e.textDirection==s.Direction.LTR)));function P(e,t){return u(e,(i=>i.empty?e.moveVertically(i,t):f(i,t)))}const M=e=>P(e,!1),T=e=>P(e,!0);function E(e,t){return u(e,(i=>i.empty?e.moveVertically(i,t,e.dom.clientHeight):f(i,t)))}const D=e=>E(e,!1),I=e=>E(e,!0);function L(e,t,i){let r=e.visualLineAt(t.head),s=e.moveToLineBoundary(t,i);if(s.head==t.head&&s.head!=(i?r.to:r.from)&&(s=e.moveToLineBoundary(t,i,!1)),!i&&s.head==r.from&&r.length){let i=/^\s*/.exec(e.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;i&&t.head>r.from+i&&(s=n.EditorSelection.cursor(r.from+i))}return s}const R=e=>u(e,(t=>L(e,t,!0))),N=e=>u(e,(t=>L(e,t,!1))),B=e=>u(e,(t=>n.EditorSelection.cursor(e.visualLineAt(t.head).from,1))),$=e=>u(e,(t=>n.EditorSelection.cursor(e.visualLineAt(t.head).to,-1)));function j(e,t,i){let r=!1,s=h(e.selection,(t=>{let s=(0,o.U)(e,t.head,-1)||(0,o.U)(e,t.head,1)||t.head>0&&(0,o.U)(e,t.head-1,1)||t.head<e.doc.length&&(0,o.U)(e,t.head+1,-1);if(!s||!s.end)return t;r=!0;let l=s.start.from==t.head?s.end.to:s.end.from;return i?n.EditorSelection.range(t.anchor,l):n.EditorSelection.cursor(l)}));return!!r&&(t(c(e,s)),!0)}const V=({state:e,dispatch:t})=>j(e,t,!1),z=({state:e,dispatch:t})=>j(e,t,!0);function Q(e,t){let i=h(e.state.selection,(e=>{let i=t(e);return n.EditorSelection.range(e.anchor,i.head,i.goalColumn)}));return!i.eq(e.state.selection)&&(e.dispatch(c(e.state,i)),!0)}function _(e,t){return Q(e,(i=>e.moveByChar(i,t)))}const F=e=>_(e,e.textDirection!=s.Direction.LTR),U=e=>_(e,e.textDirection==s.Direction.LTR),q=e=>_(e,!0),G=e=>_(e,!1);function H(e,t){return Q(e,(i=>e.moveByGroup(i,t)))}const W=e=>H(e,e.textDirection!=s.Direction.LTR),X=e=>H(e,e.textDirection==s.Direction.LTR),K=e=>H(e,!0),J=e=>H(e,!1),Y=e=>Q(e,(t=>O(e.state,t,e.textDirection!=s.Direction.LTR))),Z=e=>Q(e,(t=>O(e.state,t,e.textDirection==s.Direction.LTR)));function ee(e,t){return Q(e,(i=>e.moveVertically(i,t)))}const te=e=>ee(e,!1),ie=e=>ee(e,!0);function ne(e,t){return Q(e,(i=>e.moveVertically(i,t,e.dom.clientHeight)))}const re=e=>ne(e,!1),se=e=>ne(e,!0),oe=e=>Q(e,(t=>L(e,t,!0))),le=e=>Q(e,(t=>L(e,t,!1))),ae=e=>Q(e,(t=>n.EditorSelection.cursor(e.visualLineAt(t.head).from))),he=e=>Q(e,(t=>n.EditorSelection.cursor(e.visualLineAt(t.head).to))),ce=({state:e,dispatch:t})=>(t(c(e,{anchor:0})),!0),ue=({state:e,dispatch:t})=>(t(c(e,{anchor:e.doc.length})),!0),fe=({state:e,dispatch:t})=>(t(c(e,{anchor:e.selection.primary.anchor,head:0})),!0),de=({state:e,dispatch:t})=>(t(c(e,{anchor:e.selection.primary.anchor,head:e.doc.length})),!0),pe=({state:e,dispatch:t})=>(t(e.update({selection:{anchor:0,head:e.doc.length},annotations:n.Transaction.userEvent.of("keyboardselection")})),!0),ge=({state:e,dispatch:t})=>{let i=De(e).map((({from:t,to:i})=>n.EditorSelection.range(t,Math.min(i+1,e.doc.length))));return t(e.update({selection:new n.EditorSelection(i),annotations:n.Transaction.userEvent.of("keyboardselection")})),!0},me=({state:e,dispatch:t})=>{let i=h(e.selection,(t=>{var i;let r=(0,l.syntaxTree)(e).resolve(t.head,1);for(;!(r.from<t.from&&r.to>=t.to||r.to>t.to&&r.from<=t.from)&&(null===(i=r.parent)||void 0===i?void 0:i.parent);)r=r.parent;return n.EditorSelection.range(r.to,r.from)}));return t(c(e,i)),!0},ye=({state:e,dispatch:t})=>{let i=e.selection,r=null;return i.ranges.length>1?r=new n.EditorSelection([i.primary]):i.primary.empty||(r=new n.EditorSelection([n.EditorSelection.cursor(i.primary.head)])),!!r&&(t(c(e,r)),!0)};function ve(e,t){let{state:i}=e,r=i.changeByRange((e=>{let{from:i,to:r}=e;if(i==r){let e=t(i);i=Math.min(i,e),r=Math.max(r,e)}return i==r?{range:e}:{changes:{from:i,to:r},range:n.EditorSelection.cursor(i)}}));return!r.changes.empty&&(e.dispatch(r,{scrollIntoView:!0,annotations:n.Transaction.userEvent.of("delete")}),!0)}const we=(e,t,i)=>ve(e,(n=>{let s,o,{state:a}=e,h=a.doc.lineAt(n);if(!t&&n>h.from&&n<h.from+200&&!/[^ \t]/.test(s=h.slice(0,n-h.from))){if("\t"==s[s.length-1])return n-1;let e=(0,r.IS)(s,0,a.tabSize)%(0,l.getIndentUnit)(a)||(0,l.getIndentUnit)(a);for(let t=0;t<e&&" "==s[s.length-1-t];t++)n--;return n}if(i){let e=h.slice(n-h.from+(t?0:-2),n-h.from+(t?2:0)),i=e?(0,r.nZ)((0,r.gm)(e,0)):1;o=t?Math.min(a.doc.length,n+i):Math.max(0,n-i)}else o=h.findClusterBreak(n-h.from,t)+h.from;return o==n&&h.number!=(t?a.doc.lines:1)&&(o+=t?1:-1),o})),be=e=>we(e,!1,!0),xe=e=>we(e,!0,!0),ke=e=>we(e,!1,!1),Se=e=>we(e,!0,!1),Oe=(e,t)=>ve(e,(i=>{let{state:r}=e,s=r.doc.lineAt(i),o=r.charCategorizer(i);for(let e=null;;){let l,a;if(i==(t?s.to:s.from)){if(s.number==(t?r.doc.lines:1))break;s=r.doc.line(s.number+(t?1:-1)),l=t?s.from:s.to,a="\n"}else l=s.findClusterBreak(i-s.from,t)+s.from,a=s.slice(Math.min(i,l)-s.from,Math.max(i,l)-s.from);let h=o(a);if(null!=e&&h!=e)break;h!=n.CharCategory.Space&&(e=h),i=l}return i})),Ce=e=>Oe(e,!1),Ae=e=>Oe(e,!0),Pe=e=>ve(e,(t=>{let i=e.visualLineAt(t).to;return t<i?i:Math.max(e.state.doc.length,t+1)})),Me=({state:e,dispatch:t})=>{let i=[];for(let t=0,n="",r=e.doc.iter();;){if(r.next(),r.lineBreak||r.done){let e=n.search(/\s+$/);if(e>-1&&i.push({from:t-(n.length-e),to:t}),r.done)break;n=""}else n=r.value;t+=r.value.length}return!!i.length&&(t(e.update({changes:i})),!0)},Te=({state:e,dispatch:t})=>{let i=e.changeByRange((e=>({changes:{from:e.from,to:e.to,insert:r.xv.of(["",""])},range:n.EditorSelection.cursor(e.from)})));return t(e.update(i,{scrollIntoView:!0,annotations:n.Transaction.userEvent.of("input")})),!0},Ee=({state:e,dispatch:t})=>{let i=e.changeByRange((t=>{if(!t.empty||0==t.from||t.from==e.doc.length)return{range:t};let i=t.from,r=e.doc.lineAt(i),s=i==r.from?i-1:r.findClusterBreak(i-r.from,!1)+r.from,o=i==r.to?i+1:r.findClusterBreak(i-r.from,!0)+r.from;return{changes:{from:s,to:o,insert:e.doc.slice(i,o).append(e.doc.slice(s,i))},range:n.EditorSelection.cursor(o)}}));return!i.changes.empty&&(t(e.update(i,{scrollIntoView:!0})),!0)};function De(e){let t=[],i=-1;for(let n of e.selection.ranges){let r=e.doc.lineAt(n.from),s=e.doc.lineAt(n.to);i==r.number?t[t.length-1].to=s.to:t.push({from:r.from,to:s.to}),i=s.number}return t}function Ie(e,t,i){let n=[];for(let t of De(e)){if(i?t.to==e.doc.length:0==t.from)continue;let r=e.doc.lineAt(i?t.to+1:t.from-1);i?n.push({from:t.to,to:r.to},{from:t.from,insert:r.slice()+e.lineBreak}):n.push({from:r.from,to:t.from},{from:t.to,insert:e.lineBreak+r.slice()})}return!!n.length&&(t(e.update({changes:n,scrollIntoView:!0})),!0)}const Le=({state:e,dispatch:t})=>Ie(e,t,!1),Re=({state:e,dispatch:t})=>Ie(e,t,!0);function Ne(e,t,i){let n=[];for(let t of De(e))i?n.push({from:t.from,insert:e.doc.slice(t.from,t.to)+e.lineBreak}):n.push({from:t.to,insert:e.lineBreak+e.doc.slice(t.from,t.to)});return t(e.update({changes:n,scrollIntoView:!0})),!0}const Be=({state:e,dispatch:t})=>Ne(e,t,!1),$e=({state:e,dispatch:t})=>Ne(e,t,!0),je=e=>{let{state:t}=e,i=t.changes(De(t).map((({from:e,to:i})=>(e>0?e--:i<t.doc.length&&i++,{from:e,to:i})))),n=h(t.selection,(t=>e.moveVertically(t,!0))).map(i);return e.dispatch({changes:i,selection:n,scrollIntoView:!0}),!0},Ve=({state:e,dispatch:t})=>(t(e.update(e.replaceSelection(e.lineBreak),{scrollIntoView:!0})),!0),ze=({state:e,dispatch:t})=>{let i=e.changeByRange((({from:t,to:i})=>{let s=t==i&&function(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let i,n=(0,l.syntaxTree)(e).resolve(t),r=n.childBefore(t),s=n.childAfter(t);return r&&s&&r.to<=t&&s.from>=t&&(i=r.type.prop(a.md.closedBy))&&i.indexOf(s.name)>-1?{from:r.to,to:s.from}:null}(e,t),o=new l.IndentContext(e,{simulateBreak:t,simulateDoubleBreak:!!s}),h=(0,l.getIndentation)(o,t);null==h&&(h=/^\s*/.exec(e.doc.lineAt(t).slice(0,50))[0].length);let c=e.doc.lineAt(t);for(;i<c.to&&/\s/.test(c.slice(i-c.from,i+1-c.from));)i++;s?({from:t,to:i}=s):t>c.from&&t<c.from+100&&!/\S/.test(c.slice(0,t))&&(t=c.from);let u=["",(0,l.indentString)(e,h)];return s&&u.push((0,l.indentString)(e,o.lineIndent(c))),{changes:{from:t,to:i,insert:r.xv.of(u)},range:n.EditorSelection.cursor(t+1+h)}}));return t(e.update(i,{scrollIntoView:!0})),!0};function Qe(e,t){let i=-1;return e.changeByRange((r=>{let s=[];for(let n=e.doc.lineAt(r.from);n.number>i&&(t(n,s,r),i=n.number),!(r.to<=n.to);)n=e.doc.lineAt(n.to+1);let o=e.changes(s);return{changes:s,range:n.EditorSelection.range(o.mapPos(r.anchor,1),o.mapPos(r.head,1))}}))}const _e=({state:e,dispatch:t})=>{let i=Object.create(null),n=new l.IndentContext(e,{overrideIndentation:e=>{let t=i[e];return null==t?-1:t}}),r=Qe(e,((t,r,s)=>{let o=(0,l.getIndentation)(n,t.from);if(null==o)return;let a=/^\s*/.exec(t.slice(0,Math.min(t.length,200)))[0],h=(0,l.indentString)(e,o);(a!=h||s.from<t.from+a.length)&&(i[t.from]=o,r.push({from:t.from,to:t.from+a.length,insert:h}))}));return r.changes.empty||t(e.update(r)),!0},Fe=({state:e,dispatch:t})=>(t(e.update(Qe(e,((t,i)=>{i.push({from:t.from,insert:e.facet(l.indentUnit)})})))),!0),Ue=({state:e,dispatch:t})=>(t(e.update(Qe(e,((t,i)=>{let n=t.slice(0,Math.min(t.length,200)),s=/^\s*/.exec(n)[0];if(!s)return;let o=(0,r.IS)(s,0,e.tabSize),a=0,h=(0,l.indentString)(e,Math.max(0,o-(0,l.getIndentUnit)(e)));for(;a<s.length&&a<h.length&&s.charCodeAt(a)==h.charCodeAt(a);)a++;i.push({from:t.from+a,to:t.from+s.length,insert:h.slice(a)})})))),!0),qe=[{key:"Ctrl-b",run:p,shift:F},{key:"Ctrl-f",run:g,shift:U},{key:"Ctrl-p",run:M,shift:te},{key:"Ctrl-n",run:T,shift:ie},{key:"Ctrl-a",run:B,shift:ae},{key:"Ctrl-e",run:$,shift:he},{key:"Ctrl-d",run:Se},{key:"Ctrl-h",run:ke},{key:"Ctrl-k",run:Pe},{key:"Alt-d",run:Ae},{key:"Ctrl-Alt-h",run:Ce},{key:"Ctrl-o",run:Te},{key:"Ctrl-t",run:Ee},{key:"Alt-f",run:x,shift:K},{key:"Alt-b",run:k,shift:J},{key:"Alt-<",run:ce},{key:"Alt->",run:ue},{key:"Ctrl-v",run:I},{key:"Alt-v",run:D}],Ge=[{key:"ArrowLeft",run:p,shift:F},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:w,shift:W},{mac:"Cmd-ArrowLeft",run:B,shift:ae},{key:"ArrowRight",run:g,shift:U},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:b,shift:X},{mac:"Cmd-ArrowRight",run:$,shift:he},{key:"ArrowUp",run:M,shift:te},{mac:"Cmd-ArrowUp",run:ce,shift:fe},{mac:"Ctrl-ArrowUp",run:D,shift:re},{key:"ArrowDown",run:T,shift:ie},{mac:"Cmd-ArrowDown",run:ue,shift:de},{mac:"Ctrl-ArrowDown",run:I,shift:se},{key:"PageUp",run:D,shift:re},{key:"PageDown",run:I,shift:se},{key:"Home",run:N,shift:le},{key:"Mod-Home",run:ce,shift:fe},{key:"End",run:R,shift:oe},{key:"Mod-End",run:ue,shift:de},{key:"Enter",run:ze},{key:"Mod-a",run:pe},{key:"Backspace",run:be},{key:"Delete",run:Se},{key:"Mod-Backspace",mac:"Alt-Backspace",run:Ce},{key:"Mod-Delete",mac:"Alt-Delete",run:Ae}].concat(qe.map((e=>({mac:e.key,run:e.run,shift:e.shift})))),He=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:C,shift:Y},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:A,shift:Z},{key:"Alt-ArrowUp",run:Le},{key:"Shift-Alt-ArrowUp",run:Be},{key:"Alt-ArrowDown",run:Re},{key:"Shift-Alt-ArrowDown",run:$e},{key:"Escape",run:ye},{key:"Mod-l",run:ge},{key:"Mod-i",run:me},{key:"Mod-[",run:Ue},{key:"Mod-]",run:Fe},{key:"Mod-Alt-\\",run:_e},{key:"Shift-Mod-k",run:je},{key:"Shift-Mod-\\",run:V}].concat(Ge)},667:(e,t,i)=>{i.r(t),i.d(t,{blockComment:()=>a,blockUncomment:()=>h,commentKeymap:()=>c,lineComment:()=>s,lineUncomment:()=>o,toggleBlockComment:()=>l,toggleLineComment:()=>r});var n=i(400);const r=e=>u(g(f.Toggle),e),s=e=>u(g(f.OnlyComment),e),o=e=>u(g(f.OnlyUncomment),e),l=e=>u(p(f.Toggle),e),a=e=>u(p(f.OnlyComment),e),h=e=>u(p(f.OnlyUncomment),e),c=[{key:"Mod-/",run:r},{key:"Alt-A",run:l}];function u(e,t){const i=e(t.state);return!!i&&(t.dispatch(i),!0)}var f;function d(e,t=e.selection.primary.head){return e.languageDataAt("commentTokens",t)[0]||{}}!function(e){e[e.Toggle=0]="Toggle",e[e.OnlyComment=1]="OnlyComment",e[e.OnlyUncomment=2]="OnlyUncomment"}(f||(f={}));const p=e=>t=>{const i=d(t);return i.block?new m(i.block.open,i.block.close).toggle(e,t):null},g=e=>t=>{const i=d(t);return i.line?new v(i.line).toggle(e,t):null};class m{constructor(e,t,i=" "){this.open=e,this.close=t,this.margin=i}toggle(e,t){const i=this.isSelectionCommented(t);if(null!==i){if(e!==f.OnlyComment)return t.update({changes:i.map((({open:e,close:t})=>[{from:e.pos-this.open.length,to:e.pos+e.margin},{from:t.pos-t.margin,to:t.pos+this.close.length}]))})}else if(e!==f.OnlyUncomment)return t.update(t.changeByRange((e=>{const t=(this.open+this.margin).length;return{changes:[{from:e.from,insert:this.open+this.margin},{from:e.to,insert:this.margin+this.close}],range:n.EditorSelection.range(e.anchor+t,e.head+t)}})));return null}isSelectionCommented(e){let t=[];for(const i of e.selection.ranges){const n=this.isRangeCommented(e,i);if(null===n)return null;t.push(n)}return t}isRangeCommented(e,t){let i,n,r=e.sliceDoc(t.from-y,t.from),s=e.sliceDoc(t.to,t.to+y),o=/\s*$/.exec(r)[0].length,l=/^\s*/.exec(s)[0].length,a=r.length-o;if(r.slice(a-this.open.length,a)==this.open&&s.slice(l,l+this.close.length)==this.close)return{open:{pos:t.from-o,margin:o&&1},close:{pos:t.to+l,margin:l&&1}};t.to-t.from<=2*y?i=n=e.sliceDoc(t.from,t.to):(i=e.sliceDoc(t.from,t.from+y),n=e.sliceDoc(t.to-y,t.to));let h=/^\s*/.exec(i)[0].length,c=/\s*$/.exec(n)[0].length,u=n.length-c-this.close.length;return i.slice(h,h+this.open.length)==this.open&&n.slice(u,u+this.close.length)==this.close?{open:{pos:t.from+h+this.open.length,margin:/\s/.test(i.charAt(h+this.open.length))?1:0},close:{pos:t.to-c-this.close.length,margin:/\s/.test(n.charAt(u-1))?1:0}}:null}}const y=50;class v{constructor(e,t=" "){this.lineCommentToken=e,this.margin=t}toggle(e,t){const i=[],n={};for(let e=0;e<t.selection.ranges.length;e++){const r=w(t.doc,t.selection.ranges[e]);i.push(...r),n[e]=r}const r=this.isRangeCommented(t,i);if(r.isRangeLineSkipped){if(e!=f.OnlyComment){let e=[];for(let i=0;i<t.selection.ranges.length;i++){const t=n[i];for(const i of t){if(t.length>1&&r.isLineSkipped[i.number])continue;const n=i.from+r.minCol,s=r.minCol+this.lineCommentToken.length,o=" "==i.slice(s,s+1)?1:0;e.push({from:n,to:n+this.lineCommentToken.length+o})}}return t.update({changes:e})}}else if(e!=f.OnlyUncomment){let e=[];for(let i=0;i<t.selection.ranges.length;i++){const t=n[i];for(const i of t)(t.length<=1||!r.isLineSkipped[i.number])&&e.push({from:i.from+r.minCol,insert:this.lineCommentToken+this.margin})}return t.update({changes:e})}return null}isRangeCommented(e,t){let i=1/0,n=!0;const r=[];for(const e of t){const s=e.slice(0,Math.min(e.length,y)),o=/^\s*/.exec(s)[0].length;(1==t.length||o<s.length)&&o<i&&(i=o),n&&(1==t.length||o<s.length)&&s.slice(o,o+this.lineCommentToken.length)!=this.lineCommentToken&&(n=!1),r[e.number]=o==s.length}return{minCol:i,isRangeLineSkipped:n,isLineSkipped:r}}}function w(e,t){let i=e.lineAt(t.from);const n=[];for(;(i.from+i.length<t.to||i.from<=t.to&&t.to<=i.to)&&(n.push(i),i.number+1<=e.lines);)i=e.line(i.number+1);return n}},158:(e,t,i)=>{i.r(t),i.d(t,{GutterMarker:()=>o,gutter:()=>h,gutters:()=>f,lineNumberMarkers:()=>y,lineNumbers:()=>x});var n=i(876),r=i(33),s=i(400);class o extends r.uU{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}toDOM(e){return null}at(e){return new r.e6(e,e,this)}}o.prototype.elementClass="",o.prototype.mapMode=s.MapMode.TrackBefore;const l={style:"",renderEmptyElements:!1,elementStyle:"",markers:()=>r.Xs.empty,lineMarker:()=>null,initialSpacer:null,updateSpacer:null,domEventHandlers:{}},a=s.Facet.define();function h(e){return[f(),a.of(Object.assign(Object.assign({},l),e))]}const c=n.EditorView.baseTheme({$gutters:{display:"flex",height:"100%",boxSizing:"border-box",left:0},"$$light $gutters":{backgroundColor:"#f5f5f5",color:"#999",borderRight:"1px solid #ddd"},"$$dark $gutters":{backgroundColor:"#333338",color:"#ccc"},$gutter:{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",height:"100%",overflow:"hidden"},$gutterElement:{boxSizing:"border-box"},"$gutterElement.lineNumber":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"}}),u=s.Facet.define({combine:e=>e.some((e=>e))});function f(e){let t=[d,c];return e&&!1===e.fixed&&t.push(u.of(!0)),t}const d=n.ViewPlugin.fromClass(class{constructor(e){this.view=e,this.dom=document.createElement("div"),this.dom.className=(0,n.themeClass)("gutters"),this.dom.setAttribute("aria-hidden","true"),this.gutters=e.state.facet(a).map((t=>new g(e,t)));for(let e of this.gutters)this.dom.appendChild(e.dom);this.fixed=!e.state.facet(u),this.fixed&&(this.dom.style.position="sticky"),e.scrollDOM.insertBefore(this.dom,e.contentDOM)}update(e){if(!this.updateGutters(e))return;let t=this.gutters.map((e=>new p(e,this.view.viewport)));this.view.viewportLines((e=>{let i;if(Array.isArray(e.type)){for(let t of e.type)if(t.type==n.BlockType.Text){i=t;break}}else i=e.type==n.BlockType.Text?e:void 0;if(i)for(let e of t)e.line(this.view,i)}),0);for(let e of t)e.finish();this.dom.style.minHeight=this.view.contentHeight+"px",e.state.facet(u)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"")}updateGutters(e){let t=e.prevState.facet(a),i=e.state.facet(a),n=e.docChanged||e.heightChanged||e.viewportChanged;if(t==i)for(let t of this.gutters)t.update(e)&&(n=!0);else{n=!0;let r=[];for(let n of i){let i=t.indexOf(n);i<0?r.push(new g(this.view,n)):(this.gutters[i].update(e),r.push(this.gutters[i]))}for(let e of this.gutters)e.dom.remove();for(let e of r)this.dom.appendChild(e.dom);this.gutters=r}return n}destroy(){this.dom.remove()}},{provide:n.PluginField.scrollMargins.from((e=>0!=e.gutters.length&&e.fixed?e.view.textDirection==n.Direction.LTR?{left:e.dom.offsetWidth}:{right:e.dom.offsetWidth}:null))});class p{constructor(e,t){this.gutter=e,this.localMarkers=[],this.i=0,this.height=0,this.cursor=r.Xs.iter(Array.isArray(e.markers)?e.markers:[e.markers],t.from)}line(e,t){for(this.localMarkers.length&&(this.localMarkers=[]);this.cursor.value&&this.cursor.from<=t.from;)this.cursor.from==t.from&&this.localMarkers.push(this.cursor.value),this.cursor.next();let i=this.gutter.config.lineMarker(e,t,this.localMarkers);i&&this.localMarkers.unshift(i);let n=this.gutter;if(0==this.localMarkers.length&&!n.config.renderEmptyElements)return;let r=t.top-this.height;if(this.i==n.elements.length){let i=new m(e,t.height,r,this.localMarkers,n.elementClass);n.elements.push(i),n.dom.appendChild(i.dom)}else{let i=this.localMarkers,s=n.elements[this.i];(function(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(!e[i].compare(t[i]))return!1;return!0})(i,s.markers)&&(i=s.markers,this.localMarkers.length=0),s.update(e,t.height,r,i,n.elementClass)}this.height=t.bottom,this.i++}finish(){let e=this.gutter;for(;e.elements.length>this.i;)e.dom.removeChild(e.elements.pop().dom)}}class g{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className=(0,n.themeClass)("gutter"+(this.config.style?"."+this.config.style:"")),this.elementClass=(0,n.themeClass)("gutterElement"+(this.config.style?"."+this.config.style:""));for(let i in t.domEventHandlers)this.dom.addEventListener(i,(n=>{let r=e.visualLineAtHeight(n.clientY,e.contentDOM.getBoundingClientRect().top);t.domEventHandlers[i](e,r,n)&&n.preventDefault()}));this.markers=t.markers(e.state),t.initialSpacer&&(this.spacer=new m(e,0,0,[t.initialSpacer(e)],this.elementClass),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=this.config.markers(e.state),this.spacer&&this.config.updateSpacer){let t=this.config.updateSpacer(this.spacer.markers[0],e);t!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[t],this.elementClass)}return this.markers!=t}}class m{constructor(e,t,i,n,r){this.height=-1,this.above=0,this.dom=document.createElement("div"),this.update(e,t,i,n,r)}update(e,t,i,n,r){if(this.height!=t&&(this.dom.style.height=(this.height=t)+"px"),this.above!=i&&(this.dom.style.marginTop=(this.above=i)?i+"px":""),this.markers!=n){this.markers=n;for(let e;e=this.dom.lastChild;)e.remove();let t=r;for(let i of n){let n=i.toDOM(e);n&&this.dom.appendChild(n);let r=i.elementClass;r&&(t+=" "+r)}this.dom.className=t}}}const y=s.Facet.define(),v=s.Facet.define({combine:e=>(0,s.combineConfig)(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let i=Object.assign({},e);for(let e in t){let n=i[e],r=t[e];i[e]=n?(e,t,i)=>n(e,t,i)||r(e,t,i):r}return i}})});class w extends o{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(e){let t=e.state.facet(v);return document.createTextNode(t.formatNumber(this.number))}}const b=h({style:"lineNumber",markers:e=>e.facet(y),lineMarker:(e,t,i)=>i.length?null:new w(e.state.doc.lineAt(t.from).number),initialSpacer:e=>new w(k(e.state.doc.lines)),updateSpacer(e,t){let i=k(t.view.state.doc.lines);return i==e.number?e:new w(i)}});function x(e={}){return[v.of(e),b]}function k(e){let t=9;for(;t<e;)t=10*t+9;return t}},239:(e,t,i)=>{i.r(t),i.d(t,{highlightActiveLine:()=>o,highlightSelectionMatches:()=>u});var n=i(876),r=i(400),s=i(132);function o(){return[g,a]}const l=n.Decoration.line({attributes:{class:(0,n.themeClass)("activeLine")}}),a=n.ViewPlugin.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.docChanged||e.selectionSet)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=-1,i=[];for(let n of e.state.selection.ranges){if(!n.empty)continue;let r=e.visualLineAt(n.head);r.from>t&&(i.push(l.range(r.from)),t=r.from)}return n.Decoration.set(i)}},{decorations:e=>e.decorations}),h={highlightWordAroundCursor:!1,minSelectionLength:1,maxMatches:100},c=r.Facet.define({combine:e=>(0,r.combineConfig)(e,h,{highlightWordAroundCursor:(e,t)=>e||t,minSelectionLength:Math.min,maxMatches:Math.min})});function u(e){let t=[g,p];return e&&t.push(c.of(e)),t}const f=n.Decoration.mark({class:(0,n.themeClass)("selectionMatch")}),d=n.Decoration.mark({class:(0,n.themeClass)("selectionMatch.main")}),p=n.ViewPlugin.fromClass(class{constructor(e){this.decorations=this.getDeco(e)}update(e){(e.selectionSet||e.docChanged||e.viewportChanged)&&(this.decorations=this.getDeco(e.view))}getDeco(e){let t=e.state.facet(c),{state:i}=e,o=i.selection;if(o.ranges.length>1)return n.Decoration.none;let l,a=o.primary,h=null;if(a.empty){if(!t.highlightWordAroundCursor)return n.Decoration.none;if(h=i.charCategorizer(a.head),l=function(e,t,i){let n=e.lineAt(t),s=t-n.from,o=t-n.from;for(;s>0;){let e=n.findClusterBreak(s,!1);if(i(n.slice(e,s))!=r.CharCategory.Word)break;s=e}for(;o<n.length;){let e=n.findClusterBreak(o,!0);if(i(n.slice(o,e))!=r.CharCategory.Word)break;o=e}return s==o?null:n.slice(s,o)}(i.doc,a.head,h),!l)return n.Decoration.none}else{let e=a.to-a.from;if(e<t.minSelectionLength||e>200)return n.Decoration.none;if(l=i.sliceDoc(a.from,a.to).trim(),!l)return n.Decoration.none}let u=[];for(let o of e.visibleRanges){let e=new s.FH(i.doc,l,o.from,o.to);for(;!e.next().done;){let{from:s,to:o}=e.value;if((!h||(0==s||h(i.sliceDoc(s-1,s))!=r.CharCategory.Word)&&(o==i.doc.length||h(i.sliceDoc(o,o+1))!=r.CharCategory.Word))&&(h&&s<=a.from&&o>=a.to?u.push(d.range(s,o)):(s>=a.to||o<=a.from)&&u.push(f.range(s,o)),u.length>t.maxMatches))return n.Decoration.none}}return n.Decoration.set(u)}},{decorations:e=>e.decorations}),g=n.EditorView.baseTheme({"$$light $activeLine":{backgroundColor:"#f3f9ff"},"$$dark $activeLine":{backgroundColor:"#223039"},$selectionMatch:{backgroundColor:"#99ff7780"},"$searchMatch $selectionMatch":{backgroundColor:"transparent"}})},706:(e,t,i)=>{i.r(t),i.d(t,{Tag:()=>h,defaultHighlightStyle:()=>B,highlightStyle:()=>m,styleTags:()=>d,tags:()=>N,treeHighlighter:()=>w});var n=i(346),r=i(279),s=i(876),o=i(400),l=i(33);let a=0;class h{constructor(e,t,i){this.set=e,this.base=t,this.modified=i,this.id=a++}static define(e){if(null==e?void 0:e.base)throw new Error("Can not derive from a modified tag");let t=new h([],null,[]);if(t.set.push(t),e)for(let i of e.set)t.set.push(i);return t}static defineModifier(){let e=new u;return t=>t.modified.indexOf(e)>-1?t:u.get(t.base||t,t.modified.concat(e).sort(((e,t)=>e.id-t.id)))}}let c=0;class u{constructor(){this.instances=[],this.id=c++}static get(e,t){if(!t.length)return e;let i=t[0].instances.find((i=>{return i.base==e&&(n=t,r=i.modified,n.length==r.length&&n.every(((e,t)=>e==r[t])));var n,r}));if(i)return i;let n=[],r=new h(n,e,t);for(let e of t)e.instances.push(r);let s=f(t);for(let t of e.set)for(let e of s)n.push(u.get(t,e));return r}}function f(e){let t=[e];for(let i=0;i<e.length;i++)for(let n of f(e.slice(0,i).concat(e.slice(i+1))))t.push(n);return t}function d(e){let t=Object.create(null);for(let i in e){let n=e[i];Array.isArray(n)||(n=[n]);for(let e of i.split(" "))if(e){let i=[],r=2,s=e;for(let t=0;;){if("..."==s&&t>0&&t+3==e.length){r=1;break}let n=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(s);if(!n)throw new RangeError("Invalid path: "+e);if(i.push("*"==n[0]?null:'"'==n[0][0]?JSON.parse(n[0]):n[0]),t+=n[0].length,t==e.length)break;let o=e[t++];if(t==e.length&&"!"==o){r=0;break}if("/"!=o)throw new RangeError("Invalid path: "+e);s=e.slice(t)}let o=i.length-1,l=i[o];if(!l)throw new RangeError("Invalid path: "+e);let a=new y(n,r,o>0?i.slice(0,o):null);t[l]=a.sort(t[l])}}return p.add(t)}const p=new n.md,g=o.Facet.define({combine:e=>e.length?e[0]:null});function m(...e){let t=new v(e);return[g.of(t),s.EditorView.styleModule.of(t.module)]}class y{constructor(e,t,i,n){this.tags=e,this.mode=t,this.context=i,this.next=n}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}class v{constructor(e){this.map=Object.create(null);let t=Object.create(null);for(let i of e){let e=r.V.newName();t["."+e]=Object.assign({},i,{tag:null});let n=i.tag;Array.isArray(n)||(n=[n]);for(let t of n)this.map[t.id]=e}this.module=new r.V(t)}match(e){for(let t of e.set){let i=this.map[t.id];if(i)return t!=e&&(this.map[e.id]=i),i}return this.map[e.id]=null}}function w(e){return(0,o.precedence)(s.ViewPlugin.define((t=>new b(t,e)),{decorations:e=>e.decorations}),"fallback")}class b{constructor(e,t){this.language=t,this.nodeStack=[""],this.classStack=[""],this.inheritStack=[""],this.markCache=Object.create(null),this.tree=t.getTree(e.state),this.decorations=this.buildDeco(e)}update(e){if(this.language.getTree(e.state).length<e.view.viewport.to)this.decorations=this.decorations.map(e.changes);else{let t=this.language.getTree(e.state);(t!=this.tree||e.viewportChanged)&&(this.tree=t,this.decorations=this.buildDeco(e.view))}}buildDeco(e){const t=e.state.facet(g);if(!t)return s.Decoration.none;let i,n,r,o=new l.f_,a=(e,t)=>{if(e>i&&t){let n=this.markCache[t]||(this.markCache[t]=s.Decoration.mark({class:t}));o.add(i,e,n)}i=e},{nodeStack:h,classStack:c,inheritStack:u}=this;for(let{from:s,to:o}of e.visibleRanges)n="",r=0,i=s,this.tree.iterate({from:s,to:o,enter:(e,i)=>{r++;let s=u[r-1],o=s,l=e.prop(p),f=!1;for(;l;){if(!l.context||x(l.context,h,r)){for(let e of l.tags){let i=t.match(e);i&&(o&&(o+=" "),o+=i,1==l.mode?s=o:0==l.mode&&(f=!0))}break}l=l.next}if(o!=n&&(a(i,n),n=o),f)return r--,!1;c[r]=o,u[r]=s,h[r]=e.name},leave:(e,t,i)=>{r--;let s=c[r];s!=n&&(a(Math.min(o,i),n),n=s)}});return o.finish()}}function x(e,t,i){if(e.length>i-1)return!1;for(let n=i-1,r=e.length-1;r>=0;r--,n--){let i=e[r];if(i&&i!=t[n])return!1}return!0}const k=h.define,S=k(),O=k(),C=k(),A=k(C),P=k(C),M=k(),T=k(M),E=k(),D=k(),I=k(),L=k(I),R=k(),N={comment:S,lineComment:k(S),blockComment:k(S),docComment:k(S),name:O,variableName:k(O),typeName:k(O),propertyName:k(O),className:k(O),labelName:k(O),namespace:k(O),macroName:k(O),literal:C,string:A,docString:k(A),character:k(A),number:P,integer:k(P),float:k(P),bool:k(C),regexp:k(C),escape:k(C),color:k(C),url:k(C),keyword:E,self:k(E),null:k(E),atom:k(E),unit:k(E),modifier:k(E),operatorKeyword:k(E),controlKeyword:k(E),definitionKeyword:k(E),operator:D,derefOperator:k(D),arithmeticOperator:k(D),logicOperator:k(D),bitwiseOperator:k(D),compareOperator:k(D),updateOperator:k(D),definitionOperator:k(D),typeOperator:k(D),controlOperator:k(D),punctuation:I,separator:k(I),bracket:L,angleBracket:k(L),squareBracket:k(L),paren:k(L),brace:k(L),content:M,heading:T,heading1:k(T),heading2:k(T),heading3:k(T),heading4:k(T),heading5:k(T),heading6:k(T),list:k(M),quote:k(M),emphasis:k(M),strong:k(M),link:k(M),monospace:k(M),inserted:k(),deleted:k(),changed:k(),invalid:k(),meta:R,documentMeta:k(R),annotation:k(R),processingInstruction:k(R),definition:h.defineModifier(),constant:h.defineModifier(),function:h.defineModifier(),standard:h.defineModifier(),local:h.defineModifier(),special:h.defineModifier()},B=(0,o.precedence)(m({tag:N.deleted,textDecoration:"line-through"},{tag:[N.inserted,N.link],textDecoration:"underline"},{tag:N.heading,textDecoration:"underline",fontWeight:"bold"},{tag:N.emphasis,fontStyle:"italic"},{tag:N.strong,fontWeight:"bold"},{tag:N.keyword,color:"#708"},{tag:[N.atom,N.bool,N.url],color:"#219"},{tag:N.number,color:"#164"},{tag:N.string,color:"#a11"},{tag:[N.regexp,N.escape,N.special(N.string)],color:"#e40"},{tag:N.definition(N.variableName),color:"#00f"},{tag:N.typeName,color:"#085"},{tag:N.className,color:"#167"},{tag:N.special(N.variableName),color:"#256"},{tag:N.definition(N.propertyName),color:"#00c"},{tag:N.comment,color:"#940"},{tag:N.meta,color:"#555"},{tag:N.invalid,color:"#f00"}),"fallback")},684:(e,t,i)=>{i.r(t),i.d(t,{EditorParseContext:()=>g,IndentContext:()=>C,Language:()=>u,LezerLanguage:()=>f,TreeIndentContext:()=>T,continuedIndent:()=>R,defineLanguageFacet:()=>c,delimitedIndent:()=>D,flatIndent:()=>L,foldNodeProp:()=>$,foldService:()=>B,foldable:()=>j,getIndentUnit:()=>k,getIndentation:()=>O,indentNodeProp:()=>A,indentOnInput:()=>N,indentService:()=>b,indentString:()=>S,indentUnit:()=>x,language:()=>a,languageDataProp:()=>h,syntaxTree:()=>d});var n=i(346),r=i(400),s=i(876),o=i(706),l=i(27);const a=r.Facet.define(),h=new n.md;function c(e){return r.Facet.define({combine:e?t=>t.concat(e):void 0})}class u{constructor(e,t,i=[]){this.data=e,r.EditorState.prototype.hasOwnProperty("tree")||Object.defineProperty(r.EditorState.prototype,"tree",{get(){return d(this)}});let l=r.StateEffect.define();this.parser=t,this.field=r.StateField.define({create(e){let i=new g(t,e,[],n.mp.empty,{from:0,to:e.doc.length},[]);return i.work(25)||i.takeTree(),new m(i)},update(e,t){for(let e of t.effects)if(e.is(l))return e.value;return e.apply(t)}}),this.extension=[a.of(this),this.field,s.ViewPlugin.define((e=>new w(e,this.field,l))),(0,o.treeHighlighter)(this),r.EditorState.languageData.of(((e,t)=>e.facet(this.languageDataFacetAt(e,t))))].concat(i)}getTree(e){return e.field(this.field).tree}ensureTree(e,t,i=100){let n=e.field(this.field).context;return n.tree.length>=t||n.work(i,t)?n.tree:null}languageDataFacetAt(e,t){let i=this.getTree(e).resolve(t,-1);for(;i;){let e=i.type.prop(h);if(e)return e;i=i.parent}return this.data}}class f extends u{constructor(e,t){super(e,t),this.parser=t}static define(e){let t=c(e.languageData);return new f(t,e.parser.configure({props:[h.add((e=>e.isTop?t:void 0))]}))}configure(e){return new f(this.data,this.parser.configure(e))}languageDataFacetAt(e,t){return this.parser.hasNested?super.languageDataFacetAt(e,t):this.data}}function d(e){let t=e.facet(a);return t.length?t[0].getTree(e):n.mp.empty}class p{constructor(e,t=e.length){this.doc=e,this.length=t,this.cursorPos=0,this.string="",this.prevString="",this.cursor=e.iter()}syncTo(e){return e<this.cursorPos&&(this.cursor=this.doc.iter(),this.cursorPos=0),this.prevString=e==this.cursorPos?this.string:"",this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}get(e){if(e>=this.length)return-1;let t=this.cursorPos-this.string.length;if(e<t||e>=this.cursorPos){if(e<t&&e>=t-this.prevString.length)return this.prevString.charCodeAt(e-(t-this.prevString.length));t=this.syncTo(e)}return this.string.charCodeAt(e-t)}lineAfter(e){if(e>=this.length||e<0)return"";let t=this.cursorPos-this.string.length;(e<t||e>=this.cursorPos)&&(t=this.syncTo(e));let i=e-t,n="";for(;!this.cursor.lineBreak;){if(n+=i?this.string.slice(i):this.string,this.cursorPos>=this.length){this.cursorPos>this.length&&(n=n.slice(0,n.length-(this.cursorPos-this.length)));break}this.syncTo(this.cursorPos),i=0}return n}read(e,t){let i=this.cursorPos-this.string.length;return e<i||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-i,t-i)}clip(e){return new p(this.doc,e)}}class g{constructor(e,t,i=[],n,r,s){this.parser=e,this.state=t,this.fragments=i,this.tree=n,this.viewport=r,this.skipped=s,this.parse=null,this.skippedUntil=[]}work(e,t){if(this.tree!=n.mp.empty&&(null==t?this.tree.length==this.state.doc.length:this.tree.length>=t))return!0;this.parse||(this.parse=this.parser.startParse(new p(this.state.doc),0,this));let i=Date.now()+e;for(;;){let e=this.parse.advance();if(e)return this.fragments=n.i9.addTree(e),this.parse=null,this.tree=e,!0;if(null!=t&&this.parse.pos>=t)return this.takeTree(),!0;if(Date.now()>i)return!1}}takeTree(){this.parse&&this.parse.pos>this.tree.length&&(this.tree=this.parse.forceFinish(),this.fragments=n.i9.addTree(this.tree,this.fragments,!0))}changes(e,t){let{fragments:i,tree:r,viewport:s,skipped:o}=this;if(this.takeTree(),!e.empty){let t=[];if(e.iterChangedRanges(((e,i,n,r)=>t.push({fromA:e,toA:i,fromB:n,toB:r}))),i=n.i9.applyChanges(i,t),r=n.mp.empty,s={from:e.mapPos(s.from,-1),to:e.mapPos(s.to,1)},this.skipped.length){o=[];for(let t of this.skipped){let i=e.mapPos(t.from,1),n=e.mapPos(t.to,-1);i<n&&o.push({from:i,to:n})}}}return new g(this.parser,t,i,r,s,o)}updateViewport(e){this.viewport=e;let t=this.skipped.length;for(let t=0;t<this.skipped.length;t++){let{from:i,to:n}=this.skipped[t];i<e.to&&n>e.from&&(this.cutFragments(i,n),this.skipped.splice(t--,1))}return this.skipped.length<t}cutFragments(e,t){this.fragments=n.i9.applyChanges(this.fragments,[{fromA:e,toA:t,fromB:e,toB:t}])}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}skipUntil(e,t,i){this.skippedUntil.push({from:e,to:t,until:i})}}class m{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged)return this;let t=this.context.changes(e.changes,e.state);return t.work(25),new m(t)}}let y="undefined"!=typeof window&&window.requestIdleCallback||((e,{timeout:t})=>setTimeout(e,t)),v="undefined"!=typeof window&&window.cancelIdleCallback||clearTimeout;class w{constructor(e,t,i){this.view=e,this.field=t,this.setState=i,this.working=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){e.docChanged&&this.scheduleWork();let t=this.view.state.field(this.field).context;e.viewportChanged&&t.updateViewport(e.view.viewport)&&(t.reset(),this.scheduleWork()),this.takeSkipped(t)}scheduleWork(){if(this.working>-1)return;let{state:e}=this.view;e.field(this.field).tree.length>=e.doc.length||(this.working=y(this.work,{timeout:200}))}work(e){this.working=-1;let{state:t}=this.view,i=t.field(this.field);i.tree.length>=t.doc.length||(i.context.work(e?Math.max(25,e.timeRemaining()):100),i.context.tree.length>=t.doc.length?(this.view.dispatch({effects:this.setState.of(new m(i.context))}),this.takeSkipped(i.context)):this.scheduleWork())}takeSkipped(e){for(;e.skippedUntil.length;){let{from:t,to:i,until:n}=e.skippedUntil.pop();n.then((()=>{let n=this.view.state.field(this.field,!1);n&&n.context==e&&(e.cutFragments(t,i),e.reset(),this.scheduleWork())}))}}destroy(){this.working>=0&&v(this.working)}}const b=r.Facet.define(),x=r.Facet.define({combine:e=>{if(!e.length)return"  ";if(!/^(?: +|\t+)$/.test(e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return e[0]}});function k(e){let t=e.facet(x);return 9==t.charCodeAt(0)?e.tabSize*t.length:t.length}function S(e,t){let i="",n=e.tabSize;if(9==e.facet(x).charCodeAt(0))for(;t>=n;)i+="\t",t-=n;for(let e=0;e<t;e++)i+=" ";return i}function O(e,t){e instanceof r.EditorState&&(e=new C(e));for(let i of e.state.facet(b)){let n=i(e,t);if(null!=n)return n}let i=d(e.state);return i?function(e,t,i){let n=t.resolve(i);for(let e=n,t=i;;){let i=e.childBefore(t);if(!i)break;i.type.isError&&i.from==i.to?(n=e,t=i.from):(e=i,t=e.to+1)}for(;n;n=n.parent){let t=P(n);if(t)return t(new T(e,i,n))}return null}(e,i,t):null}class C{constructor(e,t={}){this.state=e,this.options=t,this.unit=k(e)}textAfterPos(e){var t,i;let n=null===(t=this.options)||void 0===t?void 0:t.simulateBreak;return e==n&&(null===(i=this.options)||void 0===i?void 0:i.simulateDoubleBreak)?"":this.state.sliceDoc(e,Math.min(e+100,null!=n&&n>e?n:1e9,this.state.doc.lineAt(e).to))}countColumn(e,t){return(0,l.IS)(t<0?e:e.slice(0,t),0,this.state.tabSize)}lineIndent(e){var t;let i=null===(t=this.options)||void 0===t?void 0:t.overrideIndentation;if(i){let t=i(e.from);if(t>-1)return t}let n=e.slice(0,Math.min(100,e.length));return this.countColumn(n,n.search(/\S/))}column(e){var t;let i=this.state.doc.lineAt(e),n=i.slice(0,e-i.from),r=this.countColumn(n,e-i.from),s=(null===(t=this.options)||void 0===t?void 0:t.overrideIndentation)?this.options.overrideIndentation(i.from):-1;return s>-1&&(r+=s-this.countColumn(n,n.search(/\S/))),r}}const A=new n.md;function P(e){let t=e.type.prop(A);if(t)return t;let i,r=e.firstChild;if(r&&(i=r.type.prop(n.md.closedBy))){let t=e.lastChild,n=t&&i.indexOf(t.name)>-1;return e=>I(e,!0,1,void 0,n&&!function(e){var t,i;return e.pos==(null===(t=e.options)||void 0===t?void 0:t.simulateBreak)&&(null===(i=e.options)||void 0===i?void 0:i.simulateDoubleBreak)}(e)?t.from:void 0)}return null==e.parent?M:null}function M(){return 0}class T extends C{constructor(e,t,i){super(e.state,e.options),this.pos=t,this.node=i}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){let e=this.state.doc.lineAt(this.node.from);for(;;){let t=this.node.resolve(e.from);for(;t.parent&&t.parent.from==t.from;)t=t.parent;if(E(t,this.node))break;e=this.state.doc.lineAt(t.from)}return this.lineIndent(e)}}function E(e,t){for(let i=t;i;i=i.parent)if(e==i)return!0;return!1}function D({closing:e,align:t=!0,units:i=1}){return n=>I(n,t,i,e)}function I(e,t,i,n,r){let s=e.textAfter,o=s.match(/^\s*/)[0].length,l=n&&s.slice(o,o+n.length)==n||r==e.pos+o,a=t?function(e){var t;let i=e.node,n=i.childAfter(i.from),r=i.lastChild;if(!n)return null;let s=null===(t=e.options)||void 0===t?void 0:t.simulateBreak,o=e.state.doc.lineAt(n.from),l=null==s||s<=o.from?o.to:Math.min(o.to,s);for(let e=n.to;;){let t=i.childAfter(e);if(!t||t==r)return null;if(!t.type.isSkipped)return t.from<l?n:null;e=t.to}}(e):null;return a?l?e.column(a.from):e.column(a.to):e.baseIndent+(l?0:e.unit*i)}const L=e=>e.baseIndent;function R({except:e,units:t=1}={}){return i=>{let n=e&&e.test(i.textAfter);return i.baseIndent+(n?0:t*i.unit)}}function N(){return r.EditorState.transactionFilter.of((e=>{if(!e.docChanged||"input"!=e.annotation(r.Transaction.userEvent))return e;let t=e.startState.languageDataAt("indentOnInput",e.startState.selection.primary.head);if(!t.length)return e;let i=e.newDoc,{head:n}=e.newSelection.primary,s=i.lineAt(n);if(n>s.from+200)return e;let o=i.sliceString(s.from,n);if(!t.some((e=>e.test(o))))return e;let{state:l}=e,a=-1,h=[];for(let{head:e}of l.selection.ranges){let t=l.doc.lineAt(e);if(t.from==a)continue;a=t.from;let i=O(l,t.from);if(null==i)continue;let n=/^\s*/.exec(t.slice(0,Math.min(t.length,200)))[0],r=S(l,i);n!=r&&h.push({from:t.from,to:t.from+n.length,insert:r})}return h.length?[e,{changes:h}]:e}))}const B=r.Facet.define(),$=new n.md;function j(e,t,i){for(let n of e.facet(B)){let r=n(e,t,i);if(r)return r}return function(e,t,i){let n=d(e);if(0==n.length)return null;let r=null;for(let s=n.resolve(i);s;s=s.parent){if(s.to<=i||s.from>i)continue;if(r&&s.from<t)break;let n=s.type.prop($);if(n){let o=n(s,e);o&&o.from<=i&&o.from>=t&&o.to>i&&(r=o)}}return r}(e,t,i)}},697:(e,t,i)=>{i.r(t),i.d(t,{closeLintPanel:()=>w,lintKeymap:()=>x,linter:()=>S,nextDiagnostic:()=>b,openLintPanel:()=>v,setDiagnostics:()=>u});var n=i(876),r=i(400),s=i(672),o=i(166);class l{constructor(e,t,i){this.from=e,this.to=t,this.diagnostic=i}}class a{constructor(e,t,i){this.diagnostics=e,this.panel=t,this.selected=i}}function h(e,t=null,i=0){let n=null;return e.between(i,e.length,((e,i,{spec:r})=>{if(!t||r.diagnostic==t)return n=new l(e,i,r.diagnostic),!1})),n}function c(e){return e.field(g,!1)?void 0:{append:[g,n.EditorView.decorations.compute([g],(e=>{let{selected:t,panel:i}=e.field(g);return t&&i&&t.from!=t.to?n.Decoration.set([m.range(t.from,t.to)]):n.Decoration.none})),(0,o.h0)(),(0,s.bF)(y),T]}}function u(e,t){return{effects:f.of(t),reconfigure:c(e)}}const f=r.StateEffect.define(),d=r.StateEffect.define(),p=r.StateEffect.define(),g=r.StateField.define({create:()=>new a(n.Decoration.none,null,null),update(e,t){if(t.docChanged){let i=e.diagnostics.map(t.changes),n=null;if(e.selected){let r=t.changes.mapPos(e.selected.from,1);n=h(i,e.selected.diagnostic,r)||h(i,null,r)}e=new a(i,e.panel,n)}for(let i of t.effects)if(i.is(f)){let t=n.Decoration.set(i.value.map((e=>e.from<e.to?n.Decoration.mark({attributes:{class:(0,n.themeClass)("lintRange."+e.severity)},diagnostic:e}).range(e.from,e.to):n.Decoration.widget({widget:new C(e),diagnostic:e}).range(e.from))));e=new a(t,e.panel,h(t))}else i.is(d)?e=new a(e.diagnostics,i.value?P.open:null,e.selected):i.is(p)&&(e=new a(e.diagnostics,e.panel,i.value));return e},provide:[o.mH.nFrom((e=>e.panel?[e.panel]:[])),n.EditorView.decorations.from((e=>e.diagnostics))]}),m=n.Decoration.mark({class:(0,n.themeClass)("lintRange.active")});function y(e,t){let{diagnostics:i}=e.state.field(g),n=[],r=2e8,s=0;return i.between(0,e.state.doc.length,((e,i,{spec:o})=>{t(e,i)&&(n.push(o.diagnostic),r=Math.min(e,r),s=Math.max(i,s))})),n.length?{pos:r,end:s,above:e.state.doc.lineAt(r).to<s,style:"lint",create(){let t=document.createElement("ul");for(let i of n)t.appendChild(O(e,i));return{dom:t}}}:null}const v=e=>{let t=e.state.field(g,!1);t&&t.panel||e.dispatch({effects:d.of(!0),reconfigure:c(e.state)});let i=(0,o.Sd)(e,P.open);return i&&i.dom.querySelector(".cm-panel-lint ul").focus(),!0},w=e=>{let t=e.state.field(g,!1);return!(!t||!t.panel||(e.dispatch({effects:d.of(!1)}),0))},b=e=>{let t=e.state.field(g,!1);if(!t)return!1;let i=e.state.selection.primary,n=t.diagnostics.iter(i.to+1);return!(!n.value&&(n=t.diagnostics.iter(0),!n.value||n.from==i.from&&n.to==i.to)||(e.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0}),0))},x=[{key:"Mod-Shift-m",run:v},{key:"F8",run:b}],k=500;function S(e){return n.ViewPlugin.fromClass(class{constructor(e){this.view=e,this.lintTime=Date.now()+k,this.set=!0,this.run=this.run.bind(this),setTimeout(this.run,k)}run(){let t=Date.now();if(t<this.lintTime-10)setTimeout(this.run,this.lintTime-t);else{this.set=!1;let{state:t}=this.view;Promise.resolve(e(this.view)).then((e=>{var i,n;this.view.state.doc==t.doc&&(e.length||(null===(n=null===(i=this.view.state.field(g,!1))||void 0===i?void 0:i.diagnostics)||void 0===n?void 0:n.size))&&this.view.dispatch(u(this.view.state,e))}),(e=>{(0,n.logException)(this.view.state,e)}))}}update(e){e.docChanged&&(this.lintTime=Date.now()+k,this.set||(this.set=!0,setTimeout(this.run,k)))}})}function O(e,t){let i=document.createElement("li");if(i.textContent=t.message,i.className=(0,n.themeClass)("diagnostic."+t.severity),t.actions)for(let r of t.actions){let s=i.appendChild(document.createElement("button"));s.className=(0,n.themeClass)("diagnosticAction"),s.textContent=r.name,s.onclick=s.onmousedown=i=>{i.preventDefault();let n=h(e.state.field(g).diagnostics,t);n&&r.apply(e,n.from,n.to)}}return i}class C extends n.WidgetType{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){let e=document.createElement("span");return e.className=(0,n.themeClass)("lintPoint."+this.diagnostic.severity),e}}class A{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=O(e,t),this.dom.setAttribute("role","option")}}class P{constructor(e){this.view=e,this.items=[],this.dom=document.createElement("div"),this.list=this.dom.appendChild(document.createElement("ul")),this.list.tabIndex=0,this.list.setAttribute("role","listbox"),this.list.setAttribute("aria-label",this.view.state.phrase("Diagnostics")),this.list.addEventListener("keydown",(e=>{27==e.keyCode?(e.preventDefault(),w(this.view),this.view.focus()):38==e.keyCode?(e.preventDefault(),this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length)):40==e.keyCode?(e.preventDefault(),this.moveSelection((this.selectedIndex+1)%this.items.length)):36==e.keyCode?(e.preventDefault(),this.moveSelection(0)):35==e.keyCode?(e.preventDefault(),this.moveSelection(this.items.length-1)):13==e.keyCode&&(e.preventDefault(),this.view.focus())})),this.list.addEventListener("click",(e=>{for(let t=0;t<this.items.length;t++)this.items[t].dom.contains(e.target)&&this.moveSelection(t)}));let t=this.dom.appendChild(document.createElement("button"));t.setAttribute("name","close"),t.setAttribute("aria-label",this.view.state.phrase("close")),t.textContent="",t.addEventListener("click",(()=>w(this.view))),this.update()}get selectedIndex(){let e=this.view.state.field(g).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(g),i=0,n=!1,r=null;for(e.between(0,this.view.state.doc.length,((e,s,{spec:o})=>{let l,a=-1;for(let e=i;e<this.items.length;e++)if(this.items[e].diagnostic==o.diagnostic){a=e;break}a<0?(l=new A(this.view,o.diagnostic),this.items.splice(i,0,l),n=!0):(l=this.items[a],a>i&&(this.items.splice(i,a-i),n=!0)),t&&l.diagnostic==t.diagnostic?l.dom.hasAttribute("aria-selected")||(l.dom.setAttribute("aria-selected","true"),r=l):l.dom.hasAttribute("aria-selected")&&l.dom.removeAttribute("aria-selected"),i++}));i<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0);)n=!0,this.items.pop();0==this.items.length&&(this.items.push(new A(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),n=!0),r?(this.list.setAttribute("aria-activedescendant",r.id),this.view.requestMeasure({key:this,read:()=>({sel:r.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:e,panel:t})=>{e.top<t.top?this.list.scrollTop-=t.top-e.top:e.bottom>t.bottom&&(this.list.scrollTop+=e.bottom-t.bottom)}})):this.items.length||this.list.removeAttribute("aria-activedescendant"),n&&this.sync()}sync(){let e=this.list.firstChild;function t(){let t=e;e=t.nextSibling,t.remove()}for(let i of this.items)if(i.dom.parentNode==this.list){for(;e!=i.dom;)t();e=i.dom.nextSibling}else this.list.insertBefore(i.dom,e);for(;e;)t();this.list.firstChild||this.list.appendChild(O(this.view,{severity:"info",message:this.view.state.phrase("No diagnostics")}))}moveSelection(e){if(0==this.items.length)return;let t=h(this.view.state.field(g).diagnostics,this.items[e].diagnostic);t&&this.view.dispatch({selection:{anchor:t.from,head:t.to},scrollIntoView:!0,effects:p.of(t)})}get style(){return"lint"}static open(e){return new P(e)}}function M(e){return"function"!=typeof btoa?"none":`url('data:image/svg+xml;base64,${btoa(`<svg xmlns="http://www.w3.org/2000/svg" width="6" height="3">\n    <path d="m0 3 l2 -2 l1 0 l2 2 l1 0" stroke="${e}" fill="none" stroke-width=".7"/>\n  </svg>`)}')`}const T=n.EditorView.baseTheme({$diagnostic:{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block"},"$diagnostic.error":{borderLeft:"5px solid #d11"},"$diagnostic.warning":{borderLeft:"5px solid orange"},"$diagnostic.info":{borderLeft:"5px solid #999"},$diagnosticAction:{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px"},$lintRange:{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x"},"$lintRange.error":{backgroundImage:M("#d11")},"$lintRange.warning":{backgroundImage:M("orange")},"$lintRange.info":{backgroundImage:M("#999")},"$lintRange.active":{backgroundColor:"#ffdd9980"},$lintPoint:{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},"$lintPoint.warning":{"&:after":{borderBottomColor:"orange"}},"$lintPoint.info":{"&:after":{borderBottomColor:"#999"}},"$panel.lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd"},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}},"$tooltip.lint":{padding:0,margin:0}})},837:(e,t,i)=>{i.d(t,{n:()=>d,U:()=>g});var n=i(400),r=i(684),s=i(876),o=i(346);const l=s.EditorView.baseTheme({$matchingBracket:{color:"#0b0"},$nonmatchingBracket:{color:"#a22"}}),a="()[]{}",h=n.Facet.define({combine:e=>(0,n.combineConfig)(e,{afterCursor:!0,brackets:a,maxScanDistance:1e4})}),c=s.Decoration.mark({class:(0,s.themeClass)("matchingBracket")}),u=s.Decoration.mark({class:(0,s.themeClass)("nonmatchingBracket")}),f=[n.StateField.define({create:()=>s.Decoration.none,update(e,t){if(!t.docChanged&&!t.selection)return e;let i=[],n=t.state.facet(h);for(let e of t.state.selection.ranges){if(!e.empty)continue;let r=g(t.state,e.head,-1,n)||e.head>0&&g(t.state,e.head-1,1,n)||n.afterCursor&&(g(t.state,e.head,1,n)||e.head<t.state.doc.length&&g(t.state,e.head+1,-1,n));if(!r)continue;let s=r.matched?c:u;i.push(s.range(r.start.from,r.start.to)),r.end&&i.push(s.range(r.end.from,r.end.to))}return s.Decoration.set(i,!0)},provide:[s.EditorView.decorations]}),l];function d(e={}){return[h.of(e),f]}function p(e,t,i){let n=e.prop(t<0?o.md.openedBy:o.md.closedBy);if(n)return n;if(1==e.name.length){let n=i.indexOf(e.name);if(n>-1&&n%2==(t<0?1:0))return[i[n+t]]}return null}function g(e,t,i,n={}){let s,o=n.maxScanDistance||1e4,l=n.brackets||a,h=(0,r.syntaxTree)(e),c=h.resolve(t,i);return(s=p(c.type,i,l))?function(e,t,i,n,r,s){let o=n.parent,l={from:n.from,to:n.to},a=0,h=null==o?void 0:o.cursor;if(h&&(i<0?h.childBefore(n.from):h.childAfter(n.to)))do{if(i<0?h.to<=n.from:h.from>=n.to){if(0==a&&r.indexOf(h.type.name)>-1)return{start:l,end:{from:h.from,to:h.to},matched:!0};if(p(h.type,i,s))a++;else if(p(h.type,-i,s)&&(a--,0==a))return{start:l,end:{from:h.from,to:h.to},matched:!1}}}while(i<0?h.prevSibling():h.nextSibling());return{start:l,matched:!1}}(0,0,i,c,s,l):function(e,t,i,n,r,s,o){let l=i<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),a=o.indexOf(l);if(a<0||a%2==0!=i>0)return null;let h={from:i<0?t-1:t,to:i>0?t+1:t},c=e.doc.iterRange(t,i>0?e.doc.length:0),u=0;for(let e=0;!c.next().done&&e<=s;){let s=c.value;i<0&&(e+=s.length);let l=t+e*i;for(let e=i>0?0:s.length-1,t=i>0?s.length:-1;e!=t;e+=i){let t=o.indexOf(s[e]);if(!(t<0||n.resolve(l+e,1).type!=r))if(t%2==0==i>0)u++;else{if(1==u)return{start:h,end:{from:l+e,to:l+e+1},matched:t>>1==a>>1};u--}}i>0&&(e+=s.length)}return c.done?{start:h,matched:!1}:null}(e,t,i,h,c.type,o,l)}},166:(e,t,i)=>{i.d(t,{Sd:()=>a,h0:()=>o,mH:()=>l});var n=i(876),r=i(400);const s=r.Facet.define({combine(e){let t,i;for(let n of e)t=t||n.topContainer,i=i||n.bottomContainer;return{topContainer:t,bottomContainer:i}}});function o(e){let t=[h,d];return e&&t.push(s.of(e)),t}const l=r.Facet.define();function a(e,t){let i=e.plugin(h),n=e.state.facet(l).indexOf(t);return i&&n>-1?i.panels[n]:null}const h=n.ViewPlugin.fromClass(class{constructor(e){this.specs=e.state.facet(l),this.panels=this.specs.map((t=>t(e)));let t=e.state.facet(s);this.top=new u(e,!0,t.topContainer),this.bottom=new u(e,!1,t.bottomContainer),this.top.sync(this.panels.filter((e=>e.top))),this.bottom.sync(this.panels.filter((e=>!e.top)));for(let e of this.panels)e.dom.className+=" "+c(e),e.mount&&e.mount()}update(e){let t=e.state.facet(s);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new u(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new u(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let i=e.state.facet(l);if(i!=this.specs){let t=[],n=[],r=[],s=[];for(let o of i){let i,l=this.specs.indexOf(o);l<0?(i=o(e.view),s.push(i)):(i=this.panels[l],i.update&&i.update(e)),t.push(i),(i.top?n:r).push(i)}this.specs=i,this.panels=t,this.top.sync(n),this.bottom.sync(r);for(let e of s)e.dom.className+=" "+c(e),e.mount&&e.mount()}else for(let t of this.panels)t.update&&t.update(e)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:n.PluginField.scrollMargins.from((e=>({top:e.top.scrollMargin(),bottom:e.bottom.scrollMargin()})))});function c(e){return(0,n.themeClass)(e.style?`panel.${e.style}`:"panel")}class u{constructor(e,t,i){this.view=e,this.top=t,this.container=i,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){this.panels=e,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=(0,n.themeClass)(this.top?"panels.top":"panels.bottom"),this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){for(;e!=t.dom;)e=f(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);for(;e;)e=f(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-this.view.scrollDOM.getBoundingClientRect().top:this.view.scrollDOM.getBoundingClientRect().bottom-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function f(e){let t=e.nextSibling;return e.remove(),t}const d=n.EditorView.baseTheme({$panels:{boxSizing:"border-box",position:"sticky",left:0,right:0},"$$light $panels":{backgroundColor:"#f5f5f5",color:"black"},"$$light $panels.top":{borderBottom:"1px solid #ddd"},"$$light $panels.bottom":{borderTop:"1px solid #ddd"},"$$dark $panels":{backgroundColor:"#333338",color:"white"}})},33:(e,t,i)=>{i.d(t,{e6:()=>s,Xs:()=>h,f_:()=>c,uU:()=>r});var n=i(400);class r{eq(e){return this==e}range(e,t=e){return new s(e,t,this)}}r.prototype.startSide=r.prototype.endSide=0,r.prototype.point=!1,r.prototype.mapMode=n.MapMode.TrackDel;class s{constructor(e,t,i){this.from=e,this.to=t,this.value=i}}function o(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}const l=1e9;class a{constructor(e,t,i,n){this.from=e,this.to=t,this.value=i,this.maxPoint=n}get length(){return this.to[this.to.length-1]}findIndex(e,t,i=t*l,n=0){if(e<=0)return n;let r=t<0?this.to:this.from;for(let s=n,o=r.length;;){if(s==o)return s;let n=s+o>>1,l=r[n]-e||(t<0?this.value[n].startSide:this.value[n].endSide)-i;if(n==s)return l>=0?s:o;l>=0?o=n:s=n+1}}between(e,t,i,n){for(let r=this.findIndex(t,-1),s=this.findIndex(i,1,void 0,r);r<s;r++)if(!1===n(this.from[r]+e,this.to[r]+e,this.value[r]))return!1}map(e,t){let i=[],n=[],r=[],s=-1,o=-1;for(let l=0;l<this.value.length;l++){let a,h,c=this.value[l],u=this.from[l]+e,f=this.to[l]+e;if(u==f){let e=t.mapPos(u,c.startSide,c.mapMode);if(null==e)continue;a=h=e}else if(a=t.mapPos(u,c.startSide),h=t.mapPos(f,c.endSide),a>h||a==h&&c.startSide>0&&c.endSide<=0)continue;(h-a||c.endSide-c.startSide)<0||(s<0&&(s=a),c.point&&(o=Math.max(o,h-a)),i.push(c),n.push(a-s),r.push(h-s))}return{mapped:i.length?new a(n,r,i,o):null,pos:s}}}class h{constructor(e,t,i=h.empty,n){this.chunkPos=e,this.chunk=t,this.nextLayer=i,this.maxPoint=n}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this==h.empty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:i=!1,filter:n,filterFrom:r=0,filterTo:l=this.length}=e;if(0==t.length&&!n)return this;if(i&&t.slice().sort(o),this==h.empty)return t.length?h.of(t):this;let a=new u(this,null,-1).goto(0),f=0,d=[],p=new c;for(;a.value||f<t.length;)if(f<t.length&&(a.from-t[f].from||a.startSide-t[f].value.startSide)>=0){let e=t[f++];p.addInner(e.from,e.to,e.value)||d.push(e)}else 1==a.rangeIndex&&a.chunkIndex<this.chunk.length&&(f==t.length||this.chunkEnd(a.chunkIndex)<t[f].from)&&(!n||r>this.chunkEnd(a.chunkIndex)||l<this.chunkPos[a.chunkIndex])&&p.addChunk(this.chunkPos[a.chunkIndex],this.chunk[a.chunkIndex])?a.nextChunk():((!n||r>a.to||l<a.from||n(a.from,a.to,a.value))&&(p.addInner(a.from,a.to,a.value)||d.push(new s(a.from,a.to,a.value))),a.next());return p.finishInner(this.nextLayer!=h.empty||d.length?this.nextLayer.update({add:d,filter:n,filterFrom:r,filterTo:l}):h.empty)}map(e){if(0==e.length||this==h.empty)return this;let t=[],i=[],n=-1;for(let r=0;r<this.chunk.length;r++){let s=this.chunkPos[r],o=this.chunk[r],l=e.touchesRange(s,s+o.length);if(!1===l)n=Math.max(n,o.maxPoint),t.push(o),i.push(e.mapPos(s));else if(!0===l){let{mapped:r,pos:l}=o.map(s,e);r&&(n=Math.max(n,r.maxPoint),t.push(r),i.push(l))}}let r=this.nextLayer.map(e);return 0==t.length?r:new h(i,t,r,n)}between(e,t,i){if(this!=h.empty){for(let n=0;n<this.chunk.length;n++){let r=this.chunkPos[n],s=this.chunk[n];if(t>=r&&e<=r+s.length&&!1===s.between(r,e-r,t-r,i))return}this.nextLayer.between(e,t,i)}}iter(e=0){return f.from([this]).goto(e)}static iter(e,t=0){return f.from(e).goto(t)}static compare(e,t,i,n){var r;let s=null!==(r=n.minPointSize)&&void 0!==r?r:-1,o=e.filter((e=>e.maxPoint>=500||e!=h.empty&&t.indexOf(e)<0&&e.maxPoint>=s)),l=t.filter((t=>t.maxPoint>=500||t!=h.empty&&e.indexOf(t)<0&&t.maxPoint>=s)),a=function(e,t){let i=new Map;for(let t of e)for(let e=0;e<t.chunk.length;e++)t.chunk[e].maxPoint<500&&i.set(t.chunk[e],t.chunkPos[e]);let n=new Set;for(let e of t)for(let t=0;t<e.chunk.length;t++)i.get(e.chunk[t])==e.chunkPos[t]&&n.add(e.chunk[t]);return n}(o,l),c=new p(o,a,s),u=new p(l,a,s);i.iterGaps(((e,t,i)=>g(c,e,u,t,i,n))),i.empty&&0==i.length&&g(c,0,u,0,0,n)}static spans(e,t,i,n){var r;let s=new p(e,null,null!==(r=n.minPointSize)&&void 0!==r?r:-1).goto(t),o=t,l=s.openStart;for(;;){let e=Math.min(s.to,i);if(s.point?(n.point(o,e,s.point,s.activeForPoint(s.to),l),l=s.openEnd(e)+(s.to>e?1:0)):e>o&&(n.span(o,e,s.active,l),l=s.openEnd(e)),s.to>i)break;o=s.to,s.next()}return l}static of(e,t=!1){let i=new c;for(let n of e instanceof s?[e]:t?e.slice().sort(o):e)i.add(n.from,n.to,n.value);return i.finish()}}h.empty=new h([],[],null,-1),h.empty.nextLayer=h.empty;class c{constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-l,this.lastTo=-l,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}finishChunk(e){this.chunks.push(new a(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}add(e,t,i){this.addInner(e,t,i)||(this.nextLayer||(this.nextLayer=new c)).add(e,t,i)}addInner(e,t,i){let n=e-this.lastTo||i.startSide-this.last.endSide;if(n<=0&&(e-this.lastFrom||i.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(n<0||(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=i,this.lastFrom=e,this.lastTo=t,this.value.push(i),i.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),0))}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let i=t.value.length-1;return this.last=t.value[i],this.lastFrom=t.from[i]+e,this.lastTo=t.to[i]+e,!0}finish(){return this.finishInner(h.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;let t=new h(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}class u{constructor(e,t,i,n=0){this.layer=e,this.skip=t,this.minPoint=i,this.rank=n}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-l){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,i){for(;this.chunkIndex<this.layer.chunk.length;){let t=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(t)||this.layer.chunkEnd(this.chunkIndex)<e||t.maxPoint<this.minPoint))break;this.chunkIndex++,i=!1}let n=this.chunkIndex==this.layer.chunk.length?0:this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],-1,t);(!i||this.rangeIndex<n)&&(this.rangeIndex=n),this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=l,this.value=null;break}{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],i=e+t.from[this.rangeIndex];if(this.from=i,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],++this.rangeIndex==t.value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}if(this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.to-e.to||this.endSide-e.endSide}}class f{constructor(e){this.heap=e}static from(e,t=null,i=-1){let n=[];for(let r=0;r<e.length;r++)for(let s=e[r];s!=h.empty;s=s.nextLayer)s.maxPoint>=i&&n.push(new u(s,t,i,r));return 1==n.length?n[0]:new f(n)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-l){for(let i of this.heap)i.goto(e,t);for(let e=this.heap.length>>1;e>=0;e--)d(this.heap,e);return this.next(),this}forward(e,t){for(let i of this.heap)i.forward(e,t);for(let e=this.heap.length>>1;e>=0;e--)d(this.heap,e);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=l,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),d(this.heap,0)}}}function d(e,t){for(let i=e[t];;){let n=1+(t<<1);if(n>=e.length)break;let r=e[n];if(n+1<e.length&&r.compare(e[n+1])>=0&&(r=e[n+1],n++),i.compare(r)<0)break;e[n]=i,e[t]=r,t=n}}class p{constructor(e,t,i){this.minPoint=i,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-l,this.endSide=0,this.openStart=-1,this.cursor=f.from(e,t,i)}goto(e,t=-l){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){y(this.active,e),y(this.activeTo,e),y(this.activeRank,e),this.minActive=w(this.active,this.activeTo)}addActive(e){let t=0,{value:i,to:n,rank:r}=this.cursor;for(;t<this.activeRank.length&&this.activeRank[t]<=r;)t++;v(this.active,t,i),v(this.activeTo,t,n),v(this.activeRank,t,r),e&&v(e,t,this.cursor.from),this.minActive=w(this.active,this.activeTo)}next(){let e=this.to;this.point=null;let t=this.openStart<0?[]:null,i=0;for(;;){let n=this.minActive;if(n>-1&&(this.activeTo[n]-this.cursor.from||this.active[n].endSide-this.cursor.startSide)<0){if(this.activeTo[n]>e){this.to=this.activeTo[n],this.endSide=this.active[n].endSide;break}this.removeActive(n),t&&y(t,n)}else{if(!this.cursor.value){this.to=this.endSide=l;break}if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let n=this.cursor.value;if(n.point){this.point=n,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=n.endSide,this.cursor.from<e&&(i=1),this.cursor.next(),this.to>e&&this.forward(this.to,this.endSide);break}this.addActive(t),this.cursor.next()}}}if(t){let n=0;for(;n<t.length&&t[n]<e;)n++;this.openStart=n+i}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let i=0;i<this.active.length&&!(this.activeRank[i]>this.pointRank);i++)(this.activeTo[i]>e||this.activeTo[i]==e&&this.active[i].endSide>this.point.endSide)&&t.push(this.active[i]);return t}openEnd(e){let t=0;for(;t<this.activeTo.length&&this.activeTo[t]>e;)t++;return t}}function g(e,t,i,n,r,s){e.goto(t),i.goto(n);let o=n+r,l=n,a=n-t;for(;;){let t=e.to+a-i.to||e.endSide-i.endSide,n=t<0?e.to+a:i.to,r=Math.min(n,o);if(e.point||i.point?e.point&&i.point&&(e.point==i.point||e.point.eq(i.point))||s.comparePoint(l,r,e.point,i.point):r>l&&!m(e.active,i.active)&&s.compareRange(l,r,e.active,i.active),n>o)break;l=n,t<=0&&e.next(),t>=0&&i.next()}}function m(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++)if(e[i]!=t[i]&&!e[i].eq(t[i]))return!1;return!0}function y(e,t){for(let i=t,n=e.length-1;i<n;i++)e[i]=e[i+1];e.pop()}function v(e,t,i){for(let i=e.length-1;i>=t;i--)e[i+1]=e[i];e[t]=i}function w(e,t){let i=-1,n=l;for(let r=0;r<t.length;r++)(t[r]-n||e[r].endSide-e[i].endSide)<0&&(i=r,n=t[r]);return i}},132:(e,t,i)=>{i.d(t,{FH:()=>a,Lp:()=>M});var n=i(876),r=i(400),s=i(166),o=i(33);const l="function"==typeof String.prototype.normalize?e=>e.normalize("NFKD"):e=>e;class a{constructor(e,t,i=0,n=e.length,r){this.value={from:0,to:0},this.done=!1,this.matches=[],this.buffer="",this.bufferPos=0,this.iter=e.iterRange(i,n),this.bufferStart=i,this.normalize=r?e=>r(l(e)):l,this.query=this.normalize(t)}peek(){if(this.bufferPos==this.buffer.length){if(this.bufferStart+=this.buffer.length,this.iter.next(),this.iter.done)return-1;this.bufferPos=0,this.buffer=this.iter.value}return this.buffer.charCodeAt(this.bufferPos)}next(){for(;;){let e=this.peek();if(e<0)return this.done=!0,this;let t=String.fromCharCode(e),i=this.bufferStart+this.bufferPos;for(this.bufferPos++;;){let e=this.peek();if(e<56320||e>=57344)break;this.bufferPos++,t+=String.fromCharCode(e)}let n=this.normalize(t);for(let e=0,r=i;;e++){let s=n.charCodeAt(e),o=this.match(s,r);if(o)return this.value=o,this;if(e==n.length-1)break;r==i&&e<t.length&&t.charCodeAt(e)==s&&r++}}}match(e,t){let i=null;for(let n=0;n<this.matches.length;n+=2){let r=this.matches[n],s=!1;this.query.charCodeAt(r)==e&&(r==this.query.length-1?i={from:this.matches[n+1],to:t+1}:(this.matches[n]++,s=!0)),s||(this.matches.splice(n,2),n-=2)}return this.query.charCodeAt(0)==e&&(1==this.query.length?i={from:t,to:t+1}:this.matches.push(1,t)),i}}class h{constructor(e,t,i){this.search=e,this.replace=t,this.caseInsensitive=i}eq(e){return this.search==e.search&&this.replace==e.replace&&this.caseInsensitive==e.caseInsensitive}cursor(e,t=0,i=e.length){return new a(e,this.search,t,i,this.caseInsensitive?e=>e.toLowerCase():void 0)}get valid(){return!!this.search}}const c=r.StateEffect.define(),u=r.StateEffect.define(),f=r.StateField.define({create:()=>new d(new h("","",!1),[]),update(e,t){for(let i of t.effects)i.is(c)?e=new d(i.value,e.panel):i.is(u)&&(e=new d(e.query,i.value?[C]:[]));return e},provide:[s.mH.nFrom((e=>e.panel))]});class d{constructor(e,t){this.query=e,this.panel=t}}const p=n.Decoration.mark({class:(0,n.themeClass)("searchMatch")}),g=n.Decoration.mark({class:(0,n.themeClass)("searchMatch.selected")}),m=n.ViewPlugin.fromClass(class{constructor(e){this.view=e,this.decorations=this.highlight(e.state.field(f))}update(e){let t=e.state.field(f);(t!=e.prevState.field(f)||e.docChanged||e.selectionSet)&&(this.decorations=this.highlight(t))}highlight({query:e,panel:t}){if(!t.length||!e.valid)return n.Decoration.none;let i=this.view.state,r=this.view.viewport,s=e.cursor(i.doc,Math.max(0,r.from-e.search.length),Math.min(r.to+e.search.length,i.doc.length)),l=new o.f_;for(;!s.next().done;){let{from:e,to:t}=s.value,n=i.selection.ranges.some((i=>i.from==e&&i.to==t));l.add(e,t,n?g:p)}return l.finish()}},{decorations:e=>e.decorations});function y(e){return t=>{let i=t.state.field(f,!1);return i&&i.query.valid?e(t,i):A(t)}}function v(e,t,i){let n=i.cursor(e,t).next();return n.done&&(n=i.cursor(e,0,t+i.search.length-1).next(),n.done)?null:n.value}const w=y(((e,t)=>{let{from:i,to:n}=e.state.selection.primary,r=v(e.state.doc,e.state.selection.primary.from+1,t.query);return!(!r||r.from==i&&r.to==n||(e.dispatch({selection:{anchor:r.from,head:r.to},scrollIntoView:!0}),I(e),0))}));function b(e,t,i,n){for(let r=n;;){let n=Math.max(i,r-1e4-e.search.length),s=e.cursor(t,n,r),o=null;for(;!s.next().done;)o=s.value;if(o)return o;if(n==i)return null;r-=1e4}}const x=y(((e,{query:t})=>{let{state:i}=e,n=b(t,i.doc,0,i.selection.primary.to-1)||b(t,i.doc,i.selection.primary.from+1,i.doc.length);return!!n&&(e.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0}),I(e),!0)})),k=y(((e,{query:t})=>{let i=t.cursor(e.state.doc),n=[];for(;!i.next().done;)n.push(r.EditorSelection.range(i.value.from,i.value.to));return!!n.length&&(e.dispatch({selection:r.EditorSelection.create(n)}),!0)})),S=y(((e,{query:t})=>{let{state:i}=e,n=v(i.doc,i.selection.primary.from,t);if(!n)return!1;let r,{from:s,to:o}=i.selection.primary,l=[];if(n.from==s&&n.to==o&&(l.push({from:n.from,to:n.to,insert:t.replace}),n=v(i.doc,n.to,t)),n){let e=0==l.length||l[0].from>=n.to?0:n.to-n.from-t.replace.length;r={anchor:n.from-e,head:n.to-e}}return e.dispatch({changes:l,selection:r,scrollIntoView:!!r}),n&&I(e),!0})),O=y(((e,{query:t})=>{let i=t.cursor(e.state.doc),n=[];for(;!i.next().done;){let{from:e,to:r}=i.value;n.push({from:e,to:r,insert:t.replace})}return!!n.length&&(e.dispatch({changes:n}),!0)}));function C(e){let{query:t}=e.state.field(f);return{dom:E({view:e,query:t,updateQuery(i){t.eq(i)||(t=i,e.dispatch({effects:c.of(t)}))}}),mount(){this.dom.querySelector("[name=search]").select()},pos:80,style:"search"}}const A=e=>{let t=e.state.field(f,!1);if(t&&t.panel.length){let t=(0,s.Sd)(e,C);if(!t)return!1;t.dom.querySelector("[name=search]").focus()}else e.dispatch({effects:u.of(!0),reconfigure:t?void 0:{append:R}});return!0},P=e=>{let t=e.state.field(f,!1);if(!t||!t.panel.length)return!1;let i=(0,s.Sd)(e,C);return i&&i.dom.contains(e.root.activeElement)&&e.focus(),e.dispatch({effects:u.of(!1)}),!0},M=[{key:"Mod-f",run:A,scope:"editor search-panel"},{key:"F3",run:w,shift:x,scope:"editor search-panel"},{key:"Mod-g",run:w,shift:x,scope:"editor search-panel"},{key:"Escape",run:P,scope:"editor search-panel"},{key:"Mod-Shift-l",run:({state:e,dispatch:t})=>{let i=e.selection;if(i.ranges.length>1||i.primary.empty)return!1;let{from:n,to:s}=i.primary,o=[],l=0;for(let t=new a(e.doc,e.sliceDoc(n,s));!t.next().done;){if(o.length>1e3)return!1;t.value.from==n&&(l=o.length),o.push(r.EditorSelection.range(t.value.from,t.value.to))}return t(e.update({selection:new r.EditorSelection(o,l)})),!0}}];function T(e,t=null,i=[]){let n=document.createElement(e);if(t)for(let e in t){let i=t[e];"string"==typeof i?n.setAttribute(e,i):n[e]=i}for(let e of i)n.appendChild("string"==typeof e?document.createTextNode(e):e);return n}function E(e){function t(t){return e.view.state.phrase(t)}let i=T("input",{value:e.query.search,placeholder:t("Find"),"aria-label":t("Find"),class:(0,n.themeClass)("textfield"),name:"search",onchange:o,onkeyup:o}),r=T("input",{value:e.query.replace,placeholder:t("Replace"),"aria-label":t("Replace"),class:(0,n.themeClass)("textfield"),name:"replace",onchange:o,onkeyup:o}),s=T("input",{type:"checkbox",name:"case",checked:!e.query.caseInsensitive,onchange:o});function o(){e.updateQuery(new h(i.value,r.value,!s.checked))}function l(e,t,i){return T("button",{class:(0,n.themeClass)("button"),name:e,onclick:t},i)}return T("div",{onkeydown:function(t){(0,n.runScopeHandlers)(e.view,t,"search-panel")?t.preventDefault():13==t.keyCode&&t.target==i?(t.preventDefault(),(t.shiftKey?x:w)(e.view)):13==t.keyCode&&t.target==r&&(t.preventDefault(),S(e.view))}},[i,l("next",(()=>w(e.view)),[t("next")]),l("prev",(()=>x(e.view)),[t("previous")]),l("select",(()=>k(e.view)),[t("all")]),T("label",null,[s,"match case"]),T("br"),r,l("replace",(()=>S(e.view)),[t("replace")]),l("replaceAll",(()=>O(e.view)),[t("replace all")]),T("button",{name:"close",onclick:()=>P(e.view),"aria-label":t("close")},[""]),T("div",{style:"position: absolute; top: -10000px","aria-live":"polite"})])}const D=/[\s\.,:;?!]/;function I(e){let{from:t,to:i}=e.state.selection.primary,n=e.state.doc.lineAt(t).from,r=e.state.doc.lineAt(i).to,o=Math.max(n,t-30),l=Math.min(r,i+30),a=e.state.sliceDoc(o,l);if(o!=n)for(let e=0;e<30;e++)if(!D.test(a[e+1])&&D.test(a[e])){a=a.slice(e);break}if(l!=r)for(let e=a.length-1;e>a.length-30;e--)if(!D.test(a[e-1])&&D.test(a[e])){a=a.slice(0,e);break}let h=(0,s.Sd)(e,C);h&&h.dom.contains(e.root.activeElement)&&(h.dom.querySelector("div[aria-live]").textContent=e.state.phrase("current match")+". "+a)}const L=n.EditorView.baseTheme({"$panel.search":{padding:"2px 6px 4px",position:"relative","& [name=close]":{position:"absolute",top:"0",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",padding:0,margin:0},"& input, & button":{margin:".2em .5em .2em 0"},"& label":{fontSize:"80%"}},"$$light $searchMatch":{backgroundColor:"#ffff0054"},"$$dark $searchMatch":{backgroundColor:"#00ffff8a"},"$$light $searchMatch.selected":{backgroundColor:"#ff6a0054"},"$$dark $searchMatch.selected":{backgroundColor:"#ff00ff8a"}}),R=[f,(0,r.precedence)(m,"override"),(0,s.h0)(),L]},400:(e,t,i)=>{i.d(t,{Text:()=>n.xv,Annotation:()=>$,ChangeSet:()=>l,CharCategory:()=>W,EditorSelection:()=>g,EditorState:()=>J,Facet:()=>w,MapMode:()=>s,StateEffect:()=>V,StateField:()=>S,Transaction:()=>Q,combineConfig:()=>Y,precedence:()=>C});var n=i(27);const r=/\r\n?|\n/;var s;!function(e){e[e.Simple=0]="Simple",e[e.TrackDel=1]="TrackDel",e[e.TrackBefore=2]="TrackBefore",e[e.TrackAfter=3]="TrackAfter"}(s||(s={}));class o{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t+1];e+=i<0?this.sections[t]:i}return e}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(e){for(let t=0,i=0,n=0;t<this.sections.length;){let r=this.sections[t++],s=this.sections[t++];s<0?(e(i,n,r),n+=r):n+=s,i+=r}}iterChangedRanges(e,t=!1){c(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];n<0?e.push(i,n):e.push(n,i)}return new o(e)}composeDesc(e){return this.empty?e:e.empty?this:f(this,e)}mapDesc(e,t=!1){return e.empty?this:u(this,e,t)}mapPos(e,t=-1,i=s.Simple){let n=0,r=0;for(let o=0;o<this.sections.length;){let l=this.sections[o++],a=this.sections[o++],h=n+l;if(a<0){if(h>e)return r+(e-n);r+=l}else{if(i!=s.Simple&&h>=e&&(i==s.TrackDel&&n<e&&h>e||i==s.TrackBefore&&n<e||i==s.TrackAfter&&h>e))return null;if(h>e||h==e&&t<0&&!l)return e==n||t<0?r:r+a;r+=a}n=h}if(e>n)throw new RangeError(`Position ${e} is out of range for changeset of length ${n}`);return r}touchesRange(e,t=e){for(let i=0,n=0;i<this.sections.length&&n<=t;){let r=n+this.sections[i++];if(this.sections[i++]>=0&&n<=t&&r>=e)return!(n<e&&r>t)||"cover";n=r}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let i=this.sections[t++],n=this.sections[t++];e+=(e?" ":"")+i+(n>=0?":"+n:"")}return e}}class l extends o{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return c(this,((t,i,n,r,s)=>e=e.replace(n,n+(i-t),s)),!1),e}mapDesc(e,t=!1){return u(this,e,t,!0)}invert(e){let t=this.sections.slice(),i=[];for(let r=0,s=0;r<t.length;r+=2){let o=t[r],l=t[r+1];if(l>=0){t[r]=l,t[r+1]=o;let a=r>>1;for(;i.length<a;)i.push(n.xv.empty);i.push(o?e.slice(s,s+o):n.xv.empty)}s+=o}return new l(t,i)}compose(e){return this.empty?e:e.empty?this:f(this,e,!0)}map(e,t=!1){return e.empty?this:u(this,e,t,!0)}iterChanges(e,t=!1){c(this,e,t)}get desc(){return new o(this.sections)}filter(e){let t=[],i=[],n=[],r=new d(this);e:for(let s=0,o=0;;){let l=s==e.length?1e9:e[s++];for(;o<l||o==l&&0==r.len;){if(r.done)break e;let e=Math.min(r.len,l-o);a(n,e,-1);let s=-1==r.ins?-1:0==r.off?r.ins:0;a(t,e,s),s>0&&h(i,t,r.text),r.forward(e),o+=e}let c=e[s++];for(;o<c;){if(r.done)break e;let e=Math.min(r.len,c-o);a(t,e,-1),a(n,e,-1==r.ins?-1:0==r.off?r.ins:0),r.forward(e),o+=e}}return{changes:new l(t,i),filtered:new o(n)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let i=this.sections[t],n=this.sections[t+1];n<0?e.push(i):0==n?e.push([i]):e.push([i,this.inserted[t>>1].toJSON()])}return e}static of(e,t,i){let s=[],o=[],c=0,u=null;function f(e=!1){if(!e&&!s.length)return;c<t&&a(s,t-c,-1);let i=new l(s,o);u=u?u.compose(i.map(u)):i,s=[],o=[],c=0}return function e(d){if(Array.isArray(d))for(let t of d)e(t);else if(d instanceof l){if(d.length!=t)throw new RangeError(`Mismatched change set length (got ${d.length}, expected ${t})`);f(),u=u?u.compose(d.map(u)):d}else{let{from:e,to:l=e,insert:u}=d;if(e>l||e<0||l>t)throw new RangeError(`Invalid change range ${e} to ${l} (in doc of length ${t})`);let p=u?"string"==typeof u?n.xv.of(u.split(i||r)):u:n.xv.empty,g=p.length;if(e==l&&0==g)return;e<c&&f(),e>c&&a(s,e-c,-1),a(s,l-e,g),h(o,s,p),c=l}}(e),f(!u),u}static empty(e){return new l(e?[e,-1]:[],[])}static fromJSON(e){let t=[],i=[];for(let r=0;r<e.length;r++){let s=e[r];if("number"==typeof s)t.push(s,-1);else if(1==s.length)t.push(s[0],0);else{for(;i.length<r;)i.push(n.xv.empty);i[r]=n.xv.of(s[1]),t.push(s[0],i[r].length)}}return new l(t,i)}}function a(e,t,i,n=!1){if(0==t&&i<=0)return;let r=e.length-2;r>=0&&i<=0&&i==e[r+1]?e[r]+=t:0==t&&0==e[r]?e[r+1]+=i:n?(e[r]+=t,e[r+1]+=i):e.push(t,i)}function h(e,t,i){if(0==i.length)return;let r=t.length-2>>1;if(r<e.length)e[e.length-1]=e[e.length-1].append(i);else{for(;e.length<r;)e.push(n.xv.empty);e.push(i)}}function c(e,t,i){let r=e.inserted;for(let s=0,o=0,l=0;l<e.sections.length;){let a=e.sections[l++],h=e.sections[l++];if(h<0)s+=a,o+=a;else{let c=s,u=o,f=n.xv.empty;for(;c+=a,u+=h,h&&r&&(f=f.append(r[l-2>>1])),!(i||l==e.sections.length||e.sections[l+1]<0);)a=e.sections[l++],h=e.sections[l++];t(s,c,o,u,f),s=c,o=u}}}function u(e,t,i,n=!1){let r=[],s=n?[]:null,c=new d(e),u=new d(t);for(let e=0,t=0;;)if(-1==c.ins)e+=c.len,c.next();else if(-1==u.ins&&t<e){let i=Math.min(u.len,e-t);u.forward(i),a(r,i,-1),t+=i}else if(u.ins>=0&&(c.done||t<e||t==e&&(u.len<c.len||u.len==c.len&&!i))){for(a(r,u.ins,-1);e>t&&!c.done&&e+c.len<t+u.len;)e+=c.len,c.next();t+=u.len,u.next()}else{if(!(c.ins>=0)){if(c.done&&u.done)return s?new l(r,s):new o(r);throw new Error("Mismatched change set lengths")}{let i=0,n=e+c.len;for(;;)if(u.ins>=0&&t>e&&t+u.len<n)i+=u.ins,t+=u.len,u.next();else{if(!(-1==u.ins&&t<n))break;{let e=Math.min(u.len,n-t);i+=e,u.forward(e),t+=e}}a(r,i,c.ins),s&&h(s,r,c.text),e=n,c.next()}}}function f(e,t,i=!1){let n=[],r=i?[]:null,s=new d(e),c=new d(t);for(let e=!1;;){if(s.done&&c.done)return r?new l(n,r):new o(n);if(0==s.ins)a(n,s.len,0,e),s.next();else if(0!=c.len||c.done){if(s.done||c.done)throw new Error("Mismatched change set lengths");{let t=Math.min(s.len2,c.len),i=n.length;if(-1==s.ins){let i=-1==c.ins?-1:c.off?0:c.ins;a(n,t,i,e),r&&i&&h(r,n,c.text)}else-1==c.ins?(a(n,s.off?0:s.len,t,e),r&&h(r,n,s.textBit(t))):(a(n,s.off?0:s.len,c.off?0:c.ins,e),r&&!c.off&&h(r,n,c.text));e=(s.ins>t||c.ins>=0&&c.len>t)&&(e||n.length>i),s.forward2(t),c.forward(t)}}else a(n,0,c.ins,e),r&&h(r,n,c.text),c.next()}}class d{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?n.xv.empty:e[t]}textBit(e){let{inserted:t}=this.set,i=this.i-2>>1;return i>=t.length&&!e?n.xv.empty:t[i].slice(this.off,null==e?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class p{constructor(e,t,i){this.from=e,this.to=t,this.flags=i}get anchor(){return 16&this.flags?this.to:this.from}get head(){return 16&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 4&this.flags?-1:8&this.flags?1:0}get bidiLevel(){let e=3&this.flags;return 3==e?null:e}get goalColumn(){let e=this.flags>>5;return 33554431==e?void 0:e}map(e){let t=e.mapPos(this.from),i=e.mapPos(this.to);return t==this.from&&i==this.to?this:new p(t,i,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return g.range(e,t);let i=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return g.range(this.anchor,i)}eq(e){return this.anchor==e.anchor&&this.head==e.head}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid JSON representation for SelectionRange");return g.range(e.anchor,e.head)}}class g{constructor(e,t=0){this.ranges=e,this.primaryIndex=t}map(e){return e.empty?this:g.create(this.ranges.map((t=>t.map(e))),this.primaryIndex)}eq(e){if(this.ranges.length!=e.ranges.length||this.primaryIndex!=e.primaryIndex)return!1;for(let t=0;t<this.ranges.length;t++)if(!this.ranges[t].eq(e.ranges[t]))return!1;return!0}get primary(){return this.ranges[this.primaryIndex]}asSingle(){return 1==this.ranges.length?this:new g([this.primary])}addRange(e,t=!0){return g.create([e].concat(this.ranges),t?0:this.primaryIndex+1)}replaceRange(e,t=this.primaryIndex){let i=this.ranges.slice();return i[t]=e,g.create(i,this.primaryIndex)}toJSON(){return{ranges:this.ranges.map((e=>e.toJSON())),primaryIndex:this.primaryIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||"number"!=typeof e.primaryIndex||e.primaryIndex>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new g(e.ranges.map((e=>p.fromJSON(e))),e.primaryIndex)}static single(e,t=e){return new g([g.range(e,t)],0)}static create(e,t=0){if(0==e.length)throw new RangeError("A selection needs at least one range");for(let i=0,n=0;n<e.length;n++){let r=e[n];if(r.empty?r.from<=i:r.from<i)return m(e.slice(),t);i=r.to}return new g(e,t)}static cursor(e,t=0,i,n){return new p(e,e,(0==t?0:t<0?4:8)|(null==i?3:Math.min(2,i))|(null!=n?n:33554431)<<5)}static range(e,t,i){let n=(null!=i?i:33554431)<<5;return t<e?new p(t,e,16|n):new p(e,t,n)}}function m(e,t=0){let i=e[t];e.sort(((e,t)=>e.from-t.from)),t=e.indexOf(i);for(let i=1;i<e.length;i++){let n=e[i],r=e[i-1];if(n.empty?n.from<=r.to:n.from<r.to){let s=r.from,o=Math.max(n.to,r.to);i<=t&&t--,e.splice(--i,2,n.anchor>n.head?g.range(o,s):g.range(s,o))}}return new g(e,t)}function y(e,t){for(let i of e.ranges)if(i.to>t)throw new RangeError("Selection points outside of document")}let v=0;class w{constructor(e,t,i,n){this.combine=e,this.compareInput=t,this.compare=i,this.isStatic=n,this.id=v++,this.default=e([])}static define(e={}){return new w(e.combine||(e=>e),e.compareInput||((e,t)=>e===t),e.compare||(e.combine?(e,t)=>e===t:b),!!e.static)}of(e){return new x([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new x(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new x(e,this,2,t)}from(e,t){return i=>A(t,this.compute([i],(t=>e(t.field(i)))))}nFrom(e,t){return i=>A(t,this.computeN([i],(t=>e(t.field(i)))))}}function b(e,t){return e==t||e.length==t.length&&e.every(((e,i)=>e===t[i]))}class x{constructor(e,t,i,n){this.dependencies=e,this.facet=t,this.type=i,this.value=n,this.id=v++}dynamicSlot(e){var t;let i=this.value,n=this.facet.compareInput,r=e[this.id]>>1,s=2==this.type,o=!1,l=!1,a=[];for(let i of this.dependencies)"doc"==i?o=!0:"selection"==i?l=!0:0==(1&(null!==(t=e[i.id])&&void 0!==t?t:1))&&a.push(e[i.id]);return(e,t)=>{if(!t||t.reconfigure)return e.values[r]=i(e),1;{if(!(o&&t.docChanged||l&&(t.docChanged||t.selection)||a.some((t=>(1&T(e,t))>0))))return 0;let h=i(e),c=t.startState.values[r];return(s?function(e,t,i){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!i(e[n],t[n]))return!1;return!0}(h,c,n):n(h,c))?0:(e.values[r]=h,1)}}}}function k(e,t,i){let n=i.map((t=>e[t.id])),r=i.map((e=>e.type)),s=n.filter((e=>!(1&e))),o=e[t.id]>>1;return(e,i)=>{let l=i?i.reconfigure?i.startState.config.address[t.id]:o<<1:null,a=null==l;for(let t of s)1&T(e,t)&&(a=!0);if(!a)return 0;let h=[];for(let t=0;t<n.length;t++){let i=E(e,n[t]);if(2==r[t])for(let e of i)h.push(e);else h.push(i)}let c=t.combine(h);return null!=l&&t.compare(c,E(i.startState,l))?0:(e.values[o]=c,1)}}class S{constructor(e,t,i,n,r){this.id=e,this.createF=t,this.updateF=i,this.compareF=n,this.facets=r}static define(e){let t=[],i=new S(v++,e.create,e.update,e.compare||((e,t)=>e===t),t);if(e.provide)for(let n of e.provide)n instanceof w?t.push(n.compute([i],(e=>e.field(i)))):t.push(n(i));return i}slot(e){let t=e[this.id]>>1;return(e,i)=>{if(!i)return e.values[t]=this.createF(e),1;let n,r=0;if(i.reconfigure){let e=function(e,t){let i=e.config.address[t];return null==i?null:i>>1}(i.startState,this.id);n=null==e?this.createF(i.startState):i.startState.values[e],r=1}else n=i.startState.values[t];let s=this.updateF(n,i);return r||this.compareF(n,s)||(r=1),r&&(e.values[t]=s),r}}}const O={fallback:3,default:2,extend:1,override:0};function C(e,t){if(!O.hasOwnProperty(t))throw new RangeError(`Invalid precedence: ${t}`);return new P(e,O[t])}function A(e,t){return e?C(t,e):t}class P{constructor(e,t){this.e=e,this.prec=t}}class M{constructor(e,t,i,n,r){for(this.source=e,this.replacements=t,this.dynamicSlots=i,this.address=n,this.staticValues=r,this.statusTemplate=[];this.statusTemplate.length<i.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]}static resolve(e,t=Object.create(null),i){let n=[],r=Object.create(null);for(let i of function(e,t){let i=[[],[],[],[]],n=new Map,r=Object.create(null);function s(e,o){let l=n.get(e);if(null!=l){if(l>=o)return;let t=i[l].indexOf(e);t>-1&&i[l].splice(t,1)}if(n.set(e,o),Array.isArray(e))for(let t of e)s(t,o);else if(e instanceof class{constructor(e,t){this.tag=e,this.extension=t}}){if(e.tag in r)throw new RangeError(`Duplicate use of tag '${String(e.tag)}' in extensions`);r[e.tag]=!0,s(t[e.tag]||e.extension,o)}else e.extension?s(e.extension,o):e instanceof P?s(e.e,e.prec):(i[o].push(e),e instanceof S&&s(e.facets,o))}s(e,O.default);for(let e of(o=t,(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(o):[]).concat(Object.keys(o))))!(e in r)&&"full"!=e&&t[e]&&(r[e]=!0,s(t[e],O.default));var o;return i.reduce(((e,t)=>e.concat(t)))}(e,t))i instanceof S?n.push(i):(r[i.facet.id]||(r[i.facet.id]=[])).push(i);let s=Object.create(null),o=[],l=[];for(let e of n)s[e.id]=l.length<<1,l.push((t=>e.slot(t)));for(let e in r){let t=r[e],n=t[0].facet;if(t.every((e=>0==e.type))){s[n.id]=o.length<<1|1;let e=n.combine(t.map((e=>e.value))),r=i?i.config.address[n.id]:null;if(null!=r){let t=E(i,r);n.compare(e,t)&&(e=t)}o.push(e)}else{for(let e of t)0==e.type?(s[e.id]=o.length<<1|1,o.push(e.value)):(s[e.id]=l.length<<1,l.push((t=>e.dynamicSlot(t))));s[n.id]=l.length<<1,l.push((e=>k(e,n,t)))}}return new M(e,t,l.map((e=>e(s))),s,o)}}function T(e,t){if(1&t)return 2;let i=t>>1,n=e.status[i];if(4==n)throw new Error("Cyclic dependency between fields and/or facets");if(2&n)return n;e.status[i]=4;let r=e.config.dynamicSlots[i](e,e.applying);return e.status[i]=2|r}function E(e,t){return 1&t?e.config.staticValues[t>>1]:e.values[t>>1]}const D=w.define(),I=w.define({combine:e=>e.some((e=>e)),static:!0}),L=w.define({combine:e=>e.length?e[0]:void 0,static:!0}),R=w.define(),N=w.define(),B=w.define();class ${constructor(e,t){this.type=e,this.value=t}static define(){return new j}}class j{of(e){return new $(this,e)}}class V{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return void 0===t?void 0:t==this.value?this:new V(this.type,t)}is(e){return this.type==e}static define(e={}){return new z(e.map||(e=>e))}static mapEffects(e,t){if(!e.length)return e;let i=[];for(let n of e){let e=n.map(t);e&&i.push(e)}return i}}class z{constructor(e){this.map=e}of(e){return new V(this,e)}}class Q{constructor(e,t,i,n,r,s,o){this.startState=e,this.changes=t,this.selection=i,this.effects=n,this.annotations=r,this.reconfigure=s,this.scrollIntoView=o,this._doc=null,this._state=null,i&&y(i,t.newLength),r.some((e=>e.type==Q.time))||(this.annotations=r.concat(Q.time.of(Date.now())))}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}}function _(e,t){let i=[];for(let n=0,r=0;;){let s,o;if(n<e.length&&(r==t.length||t[r]>=e[n]))s=e[n++],o=e[n++];else{if(!(r<t.length))return i;s=t[r++],o=t[r++]}!i.length||i[i.length-1]<s?i.push(s,o):i[i.length-1]<o&&(i[i.length-1]=o)}}function F(e,t,i){var n;let r,s,o;return i?(r=t.changes,s=l.empty(t.changes.length),o=e.changes.compose(t.changes)):(r=t.changes.map(e.changes),s=e.changes.mapDesc(t.changes,!0),o=e.changes.compose(r)),{changes:o,selection:t.selection?t.selection.map(s):null===(n=e.selection)||void 0===n?void 0:n.map(r),effects:V.mapEffects(e.effects,r).concat(V.mapEffects(t.effects,s)),annotations:e.annotations.length?e.annotations.concat(t.annotations):t.annotations,scrollIntoView:e.scrollIntoView||t.scrollIntoView,reconfigure:t.reconfigure?t.reconfigure.full||!e.reconfigure?t.reconfigure:Object.assign({},e.reconfigure,t.reconfigure):e.reconfigure}}function U(e,t,i){let n=t.reconfigure;n&&n.append&&(n=Object.assign({},n),n["undefined"==typeof Symbol?"__append"+Math.floor(4294967295*Math.random()):Symbol("appendConf")]=n.append,n.append=void 0);let r=t.selection;return{changes:t.changes instanceof l?t.changes:l.of(t.changes||[],i,e.facet(L)),selection:r&&(r instanceof g?r:g.single(r.anchor,r.head)),effects:H(t.effects),annotations:H(t.annotations),scrollIntoView:!!t.scrollIntoView,reconfigure:n}}function q(e,t,i){let n=U(e,t.length?t[0]:{},e.doc.length);t.length&&!1===t[0].filter&&(i=!1);for(let r=1;r<t.length;r++){!1===t[r].filter&&(i=!1);let s=!!t[r].sequential;n=F(n,U(e,t[r],s?n.changes.newLength:e.doc.length),s)}let r=new Q(e,n.changes,n.selection,n.effects,n.annotations,n.reconfigure,n.scrollIntoView);return function(e){let t=e.startState,i=t.facet(B),n=e;for(let r=i.length-1;r>=0;r--){let s=i[r](e);s&&Object.keys(s).length&&(n=F(e,U(t,s,e.changes.newLength),!0))}return n==e?e:new Q(t,e.changes,e.selection,n.effects,n.annotations,n.reconfigure,n.scrollIntoView)}(i?function(e){let t=e.startState,i=!0;for(let n of t.facet(R)){let t=n(e);if(!1===t){i=!1;break}Array.isArray(t)&&(i=!0===i?t:_(i,t))}if(!0!==i){let n,r;if(!1===i)r=e.changes.invertedDesc,n=l.empty(t.doc.length);else{let t=e.changes.filter(i);n=t.changes,r=t.filtered.invertedDesc}e=new Q(t,n,e.selection&&e.selection.map(r),V.mapEffects(e.effects,r),e.annotations,e.reconfigure,e.scrollIntoView)}let n=t.facet(N);for(let i=n.length-1;i>=0;i--){let r=n[i](e);e=r instanceof Q?r:Array.isArray(r)&&1==r.length&&r[0]instanceof Q?r[0]:q(t,H(r),!1)}return e}(r):r)}Q.time=$.define(),Q.userEvent=$.define(),Q.addToHistory=$.define();const G=[];function H(e){return null==e?G:Array.isArray(e)?e:[e]}var W;!function(e){e[e.Word=0]="Word",e[e.Space=1]="Space",e[e.Other=2]="Other"}(W||(W={}));const X=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let K;try{K=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(e){}class J{constructor(e,t,i,n=null){if(this.config=e,this.doc=t,this.selection=i,this.applying=null,this.status=e.statusTemplate.slice(),n&&!n.reconfigure)this.values=n.startState.values.slice();else if(this.values=e.dynamicSlots.map((e=>null)),n)for(let t in e.address){let i=e.address[t],r=n.startState.config.address[t];null!=r&&0==(1&i)&&(this.values[i>>1]=E(n.startState,r))}this.applying=n,n&&(n._state=this);for(let e=0;e<this.config.dynamicSlots.length;e++)T(this,e<<1);this.applying=null}field(e,t=!0){let i=this.config.address[e.id];if(null!=i)return T(this,i),E(this,i);if(t)throw new RangeError("Field is not present in this state")}update(...e){return q(this,e,!0)}applyTransaction(e){let t=this.config;e.reconfigure&&(t=M.resolve(e.reconfigure.full||t.source,Object.assign(t.replacements,e.reconfigure,{full:void 0}),this)),new J(t,e.newDoc,e.newSelection,e)}replaceSelection(e){return"string"==typeof e&&(e=this.toText(e)),this.changeByRange((t=>({changes:{from:t.from,to:t.to,insert:e},range:g.cursor(t.from+e.length)})))}changeByRange(e){let t=this.selection,i=e(t.ranges[0]),n=this.changes(i.changes),r=[i.range],s=H(i.effects);for(let i=1;i<t.ranges.length;i++){let o=e(t.ranges[i]),l=this.changes(o.changes),a=l.map(n);for(let e=0;e<i;e++)r[e]=r[e].map(a);let h=n.mapDesc(l,!0);r.push(o.range.map(h)),n=n.compose(a),s=V.mapEffects(s,a).concat(V.mapEffects(H(o.effects),h))}return{changes:n,selection:g.create(r,t.primaryIndex),effects:s}}changes(e=[]){return e instanceof l?e:l.of(e,this.doc.length,this.facet(J.lineSeparator))}toText(e){return n.xv.of(e.split(this.facet(J.lineSeparator)||r))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return null==t?e.default:(T(this,t),E(this,t))}toJSON(){return{doc:this.sliceDoc(),selection:this.selection.toJSON()}}static fromJSON(e,t={}){if(!e||"string"!=typeof e.doc)throw new RangeError("Invalid JSON representation for EditorState");return J.create({doc:e.doc,selection:g.fromJSON(e.selection),extensions:t.extensions})}static create(e={}){let t=M.resolve(e.extensions||[]),i=e.doc instanceof n.xv?e.doc:n.xv.of((e.doc||"").split(t.staticFacet(J.lineSeparator)||r)),s=e.selection?e.selection instanceof g?e.selection:g.single(e.selection.anchor,e.selection.head):g.single(0);return y(s,i.length),t.staticFacet(I)||(s=s.asSingle()),new J(t,i,s)}get tabSize(){return this.facet(J.tabSize)}get lineBreak(){return this.facet(J.lineSeparator)||"\n"}phrase(e){for(let t of this.facet(J.phrases))if(Object.prototype.hasOwnProperty.call(t,e))return t[e];return e}languageDataAt(e,t){let i=[];for(let n of this.facet(D))for(let r of n(this,t))Object.prototype.hasOwnProperty.call(r,e)&&i.push(r[e]);return i}charCategorizer(e){return t=this.languageDataAt("wordChars",e).join(""),e=>{if(!/\S/.test(e))return W.Space;if(function(e){if(K)return K.test(e);for(let t=0;t<e.length;t++){let i=e[t];if(/\w/.test(i)||i>""&&(i.toUpperCase()!=i.toLowerCase()||X.test(i)))return!0}return!1}(e))return W.Word;for(let i=0;i<t.length;i++)if(e.indexOf(t[i])>-1)return W.Word;return W.Other};var t}}function Y(e,t,i={}){let n={};for(let t of e)for(let e of Object.keys(t)){let r=t[e],s=n[e];if(void 0===s)n[e]=r;else if(s===r||void 0===r);else{if(!Object.hasOwnProperty.call(i,e))throw new Error("Config merge conflict for field "+e);n[e]=i[e](s,r)}}for(let e in t)void 0===n[e]&&(n[e]=t[e]);return n}J.allowMultipleSelections=I,J.tabSize=w.define({combine:e=>e.length?e[0]:4}),J.lineSeparator=L,J.phrases=w.define(),J.languageData=D,J.changeFilter=R,J.transactionFilter=N,J.transactionExtender=B},27:(e,t,i)=>{i.d(t,{xv:()=>g,gm:()=>c,nZ:()=>f,IS:()=>d,Gz:()=>p,bg:()=>u});let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((e=>e?parseInt(e,36):1));for(let e=1;e<n.length;e++)n[e]+=n[e-1];function r(e){for(let t=1;t<n.length;t+=2)if(n[t]>e)return n[t-1]<=e;return!1}function s(e){return e>=127462&&e<=127487}function o(e,t){if(t==e.length)return t;t&&a(e.charCodeAt(t))&&h(e.charCodeAt(t-1))&&t--;let i=c(e,t);for(t+=f(i);t<e.length;){let n=c(e,t);if(8205==i||8205==n||r(n))t+=f(n),i=n;else{if(!s(n))break;{let i=0,n=t-2;for(;n>=0&&s(c(e,n));)i++,n-=2;if(i%2==0)break;t+=2}}}return t}function l(e,t){for(;t>0;){let i=o(e,t-2);if(i<t)return i;t--}return 0}function a(e){return e>=56320&&e<57344}function h(e){return e>=55296&&e<56320}function c(e,t){let i=e.charCodeAt(t);if(!h(i)||t+1==e.length)return i;let n=e.charCodeAt(t+1);return a(n)?n-56320+(i-55296<<10)+65536:i}function u(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function f(e){return e<65536?1:2}function d(e,t,i){for(let n=0;n<e.length;)9==e.charCodeAt(n)?(t+=i-t%i,n++):(t++,n=o(e,n));return t}function p(e,t,i,n){for(let r=0;r<e.length;){if(t>=i)return{offset:r,leftOver:0};t+=9==e.charCodeAt(r)?n-t%n:1,r=o(e,r)}return{offset:e.length,leftOver:i-t}}class g{constructor(){}lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);for(let t of m)if(t.doc==this&&t.from<=e&&t.to>=e)return t;return v(this.lineInner(e,!1,1,0).finish(this))}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);for(let t of m)if(t.doc==this&&t.number==e)return t;return v(this.lineInner(e,!0,1,0).finish(this))}replace(e,t,i){let n=[];return this.decompose(0,e,n),n.push(i),this.decompose(t,this.length,n),b.from(n,this.length-(t-e)+i.length)}append(e){return 0==this.length?e:0==e.length?this:b.from([this,e],this.length+e.length)}slice(e,t=this.length){let i=[];return this.decompose(e,t,i),b.from(i,t-e)}eq(e){return this==e||function(e,t){if(e.length!=t.length||e.lines!=t.lines)return!1;let i=new O(e),n=new O(t);for(let e=0,t=0;;){if(i.lineBreak!=n.lineBreak||i.done!=n.done)return!1;if(i.done)return!0;if(i.lineBreak)i.next(),n.next(),e=t=0;else{let r=i.value.slice(e),s=n.value.slice(t);if(r.length==s.length){if(r!=s)return!1;i.next(),n.next(),e=t=0}else if(r.length>s.length){if(r.slice(0,s.length)!=s)return!1;e+=s.length,n.next(),t=0}else{if(s.slice(0,r.length)!=r)return!1;t+=r.length,i.next(),e=0}}}}(this,e)}iter(e=1){return new O(this,e)}iterRange(e,t=this.length){return new C(this,e,t)}iterLines(e=0){return new A(this,e)}toString(){return this.sliceString(0)}toJSON(){let e=[];for(let t=this.iterLines();!t.next().done;)e.push(t.value);return e}static of(e){if(0==e.length)throw new RangeError("A document must have at least one line");if(1==e.length&&!e[0]&&g.empty)return g.empty;let t=x(e);return t<1024?new w(e,t):b.from(w.split(e,[]),t)}}"undefined"!=typeof Symbol&&(g.prototype[Symbol.iterator]=function(){return this.iter()});let m=[],y=-1;function v(e){return m[y=(y+1)%10]=e}class w extends g{constructor(e,t=x(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,i,n){for(let r=0;;r++){let s=this.text[r],o=n+s.length;if((t?i:o)>=e)return new P(n,o,i,s);n=o+1,i++}}decompose(e,t,i){i.push(new w(S(this.text,e,t),Math.min(t,this.length)-Math.max(0,e)))}lastLineLength(){return this.text[this.text.length-1].length}firstLineLength(){return this.text[0].length}replace(e,t,i){let n=this.length+i.length-(t-e);return n>=1024||!(i instanceof w)?super.replace(e,t,i):new w(k(this.text,k(i.text,S(this.text,0,e)),t),n)}sliceString(e,t=this.length,i="\n"){let n="";for(let r=0,s=0;r<=t&&s<this.text.length;s++){let o=this.text[s],l=r+o.length;r>e&&s&&(n+=i),e<l&&t>r&&(n+=o.slice(Math.max(0,e-r),t-r)),r=l+1}return n}flatten(e){e[e.length-1]+=this.text[0];for(let t=1;t<this.text.length;t++)e.push(this.text[t])}static split(e,t){let i=[],n=-1;for(let r of e)for(;;){let e=n+r.length+1;if(e<512){n=e,i.push(r);break}let s=512-n-1,o=r.charCodeAt(s);o>=56320&&o<57344&&s++,i.push(r.slice(0,s)),t.push(new w(i,512)),r=r.slice(s),n=-1,i=[]}return-1!=n&&t.push(new w(i,n)),t}}class b extends g{constructor(e,t){super(),this.children=e,this.length=t,this.lines=1;for(let t of e)this.lines+=t.lines-1}lineInner(e,t,i,n){for(let r=0;;r++){let s=this.children[r],o=n+s.length,l=i+s.lines-1;if((t?l:o)>=e){let l,a=s.lineInner(e,t,i,n);return a.from==n&&(l=this.lineLengthTo(r))&&(a.from-=l,a.content=null),a.to==o&&(l=this.lineLengthFrom(r+1))&&(a.to+=l,a.content=null),a}n=o,i=l}}decompose(e,t,i){for(let n=0,r=0;r<t&&n<this.children.length;n++){let s=this.children[n],o=r+s.length;e<o&&t>r&&(r>=e&&o<=t?i.push(s):s.decompose(e-r,t-r,i)),r=o}}lineLengthTo(e){let t=0;for(let i=e-1;i>=0;i--){let e=this.children[i];if(e.lines>1)return t+e.lastLineLength();t+=e.length}return t}lastLineLength(){return this.lineLengthTo(this.children.length)}lineLengthFrom(e){let t=0;for(let i=e;i<this.children.length;i++){let e=this.children[i];if(e.lines>1)return t+e.firstLineLength();t+=e.length}return t}firstLineLength(){return this.lineLengthFrom(0)}replace(e,t,i){if(i.length<512&&t-e<512){let n=i.length-(t-e);for(let r=0,s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.length;if(e>=s&&t<=l&&o.length+n<this.length+n>>2&&o.length+n>0){let l=this.children.slice();return l[r]=o.replace(e-s,t-s,i),new b(l,this.length+n)}s=l}}return super.replace(e,t,i)}sliceString(e,t=this.length,i="\n"){let n="";for(let r=0,s=0;s<t&&r<this.children.length;r++){let o=this.children[r],l=s+o.length;if(e<l&&t>s){let r=o.sliceString(e-s,t-s,i);if(e>=s&&t<=l)return r;n+=r}s=l}return n}flatten(e){for(let t of this.children)t.flatten(e)}static from(e,t){if(!e.every((e=>e instanceof g)))throw new Error("NOP");if(t<1024){let i=[""];for(let t of e)t.flatten(i);return new w(i,t)}let i=Math.max(512,t>>3),n=i<<1,r=i>>1,s=[],o=0,l=[];function a(e){let t,c=e.length;if(c)if(c>n&&e instanceof b)for(let t of e.children)a(t);else c>r&&(o>r||0==o)?(h(),s.push(e)):e instanceof w&&o>0&&(t=l[l.length-1])instanceof w&&e.length+t.length<=512?(o+=c,l[l.length-1]=new w(k(e.text,t.text.slice()),e.length+t.length)):(o+c>i&&h(),o+=c,l.push(e))}function h(){0!=o&&(s.push(1==l.length?l[0]:b.from(l,o)),o=0,l.length=0)}for(let t of e)a(t);return h(),1==s.length?s[0]:new b(s,t)}}function x(e){let t=-1;for(let i of e)t+=i.length+1;return t}function k(e,t,i=0,n=1e9){for(let r=0,s=0,o=!0;s<e.length&&r<=n;s++){let l=e[s],a=r+l.length;a>=i&&(a>n&&(l=l.slice(0,n-r)),r<i&&(l=l.slice(i-r)),o?(t[t.length-1]+=l,o=!1):t.push(l)),r=a+1}return t}function S(e,t,i){return k(e,[""],t,i)}g.empty=g.of([""]);class O{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?0:e instanceof w?e.text.length:e.children.length]}next(e=0){for(;;){let t=this.nodes.length-1;if(t<0)return this.done=!0,this.value="",this.lineBreak=!1,this;let i=this.nodes[t],n=this.offsets[t];if(i instanceof w){if(n!=(this.dir>0?0:i.text.length)&&!this.lineBreak){if(this.lineBreak=!0,0==e)return this.value="\n",this;e--;continue}let r=i.text[n-(this.dir<0?1:0)];if(this.offsets[t]=n+=this.dir,n==(this.dir>0?i.text.length:0)&&(this.nodes.pop(),this.offsets.pop()),this.lineBreak=!1,r.length>Math.max(0,e))return this.value=0==e?r:this.dir>0?r.slice(e):r.slice(0,r.length-e),this;e-=r.length}else if(n==(this.dir>0?i.children.length:0))this.nodes.pop(),this.offsets.pop();else{let r=i.children[this.dir>0?n:n-1],s=r.length;this.offsets[t]=n+this.dir,e>s?e-=s:(this.nodes.push(r),this.offsets.push(this.dir>0?0:r instanceof w?r.text.length:r.children.length))}}}}class C{constructor(e,t,i){this.value="",this.cursor=new O(e,t>i?-1:1),t>i?(this.skip=e.length-t,this.limit=t-i):(this.skip=t,this.limit=i-t)}next(){if(this.limit<=0)this.limit=-1;else{let{value:e,lineBreak:t,done:i}=this.cursor.next(this.skip);this.skip=0,this.value=e;let n=t?1:e.length;n>this.limit&&(this.value=this.cursor.dir>0?e.slice(0,this.limit):e.slice(n-this.limit)),i||0==this.value.length?this.limit=-1:this.limit-=this.value.length}return this}get lineBreak(){return this.cursor.lineBreak}get done(){return this.limit<0}}class A{constructor(e,t=0){this.value="",this.done=!1,this.cursor=e.iter(),this.skip=t}next(e=0){if(this.cursor.done)return this.done=!0,this.value="",this;for(e+=this.skip,this.skip=0,this.value="";;){let{value:t,lineBreak:i,done:n}=this.cursor.next(e);if(e=0,n||i)return this;this.value+=t}}get lineBreak(){return!1}}class P{constructor(e,t,i,n){this.from=e,this.to=t,this.number=i,this.content=n}get length(){return this.to-this.from}slice(e=0,t=this.length){if(e==t)return"";if("string"==typeof this.content)return this.content.slice(e,t);this.content||(this.content=new M(this.doc,this.from));let i=this.content.slice(e,t);return 0==e&&t==this.length&&(this.content=i),i}finish(e){return this.doc=e,this}findClusterBreak(e,t){if(e<0||e>this.length)throw new RangeError("Invalid position given to Line.findClusterBreak");let i,n;return"string"==this.content?(i=this.from,n=this.content):(i=Math.max(0,e-256),n=this.slice(i,Math.min(this.length,i+512))),(t?o:l)(n,e-i)+i}}class M{constructor(e,t){this.doc=e,this.start=t,this.cursor=null,this.strings=null}slice(e,t){this.cursor||(this.cursor=this.doc.iter(),this.strings=[this.cursor.next(this.start).value]);for(let i="",n=0,r=0;;r++){if(r==this.strings.length){let e=this.cursor.next().value;if(!e)return i;this.strings.push(e)}let s=this.strings[r],o=n;if(n+=s.length,!(n<=e)&&(i+=s.slice(Math.max(0,e-o),Math.min(s.length,t-o)),n>=t))return i}}}},672:(e,t,i)=>{i.d(t,{bF:()=>u,hJ:()=>a,jH:()=>l});var n=i(876),r=i(400);const s=n.ViewPlugin.fromClass(class{constructor(e){this.view=e,this.inView=!0,this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.tooltips=e.state.facet(a),this.tooltipViews=this.tooltips.map((e=>this.createTooltip(e)))}update(e){let t=e.state.facet(a);if(t==this.tooltips)for(let t of this.tooltipViews)t.update&&t.update(e);else{let i=[];for(let n=0;n<t.length;n++){let r=t[n],s=-1;for(let e=0;e<this.tooltips.length;e++)this.tooltips[e].create==r.create&&(s=e);if(s<0)i[n]=this.createTooltip(r);else{let t=i[n]=this.tooltipViews[s];t.update&&t.update(e)}}for(let e of this.tooltipViews)i.indexOf(e)<0&&e.dom.remove();this.tooltips=t,this.tooltipViews=i,this.maybeMeasure()}}createTooltip(e){let t=e.create(this.view);return t.dom.className=(0,n.themeClass)("tooltip"+(e.style?"."+e.style:"")),this.view.dom.appendChild(t.dom),t.mount&&t.mount(this.view),t}destroy(){for(let{dom:e}of this.tooltipViews)e.remove()}readMeasure(){return{editor:this.view.dom.getBoundingClientRect(),pos:this.tooltips.map((e=>this.view.coordsAtPos(e.pos))),size:this.tooltipViews.map((({dom:e})=>e.getBoundingClientRect())),innerWidth:window.innerWidth,innerHeight:window.innerHeight}}writeMeasure(e){let{editor:t}=e;for(let i=0;i<this.tooltipViews.length;i++){let r=this.tooltips[i],s=this.tooltipViews[i],{dom:o}=s,l=e.pos[i],a=e.size[i];if(!l||l.bottom<=t.top||l.top>=t.bottom||l.right<=t.left||l.left>=t.right){o.style.top="-10000px";continue}let h=a.right-a.left,c=a.bottom-a.top,u=this.view.textDirection==n.Direction.LTR?Math.min(l.left,e.innerWidth-h):Math.max(0,l.left-h),f=!!r.above;!r.strictSide&&(f?l.top-(a.bottom-a.top)<0:l.bottom+(a.bottom-a.top)>e.innerHeight)&&(f=!f),o.style.top=(f?l.top-c:l.bottom)+"px",o.style.left=u+"px",o.classList.toggle("cm-tooltip-above",f),o.classList.toggle("cm-tooltip-below",!f),s.positioned&&s.positioned()}}maybeMeasure(){this.tooltips.length&&((this.view.inView||this.inView)&&this.view.requestMeasure(this.measureReq),this.inView=this.view.inView)}},{eventHandlers:{scroll(){this.maybeMeasure()}}}),o=n.EditorView.baseTheme({$tooltip:{position:"fixed",border:"1px solid #ddd",backgroundColor:"#f5f5f5",zIndex:100}});function l(){return[s,o]}const a=r.Facet.define();class h{constructor(e,t,i,n){this.view=e,this.source=t,this.field=i,this.setHover=n,this.lastMouseMove=null,this.hoverTimeout=-1,this.mouseInside=!1,this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseenter",this.mouseenter=this.mouseenter.bind(this)),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,!this.mouseInside||this.active)return;let e=Date.now(),t=this.lastMouseMove;if(e-t.timeStamp<750)return void(this.hoverTimeout=setTimeout(this.checkHover,750-(e-t.timeStamp)));let i=this.view.contentDOM.contains(t.target)?this.view.posAtCoords({x:t.clientX,y:t.clientY}):-1,n=null==i?null:this.source(this.view,((e,n)=>e<=i&&n>=i&&(e==n||c(this.view,e,n,t.clientX,t.clientY))));n&&this.view.dispatch({effects:this.setHover.of(n)})}mousemove(e){var t;this.lastMouseMove=e,this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,750));let i=this.active;if(i&&!function(e){for(let t=e;t;t=t.parentNode)if(1==t.nodeType&&t.classList.contains("cm-tooltip"))return!0;return!1}(e.target)){let{pos:n}=i,r=null!==(t=i.end)&&void 0!==t?t:n;(n==r?this.view.posAtCoords({x:e.clientX,y:e.clientY})==n:c(this.view,n,r,e.clientX,e.clientY,10))||this.view.dispatch({effects:this.setHover.of(null)})}}mouseenter(){this.mouseInside=!0}mouseleave(){this.mouseInside=!1,this.active&&this.view.dispatch({effects:this.setHover.of(null)})}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseenter",this.mouseenter),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}function c(e,t,i,n,r,s=0){let o=document.createRange(),l=e.domAtPos(t),a=e.domAtPos(i);o.setEnd(a.node,a.offset),o.setStart(l.node,l.offset);let h=o.getClientRects();for(let e=0;e<h.length;e++){let t=h[e];if(Math.max(t.top-r,r-t.bottom,t.left-n,n-t.right)<=s)return!0}return!1}function u(e,t={}){const i=r.StateEffect.define(),s=r.StateField.define({create:()=>null,update(e,n){if(e&&t.hideOnChange&&(n.docChanged||n.selection))return null;for(let e of n.effects)if(e.is(i))return e.value;if(e&&n.docChanged){let t=n.changes.mapPos(e.pos,-1,r.MapMode.TrackDel);if(null==t)return null;let i=Object.assign(Object.create(null),e);return i.pos=t,null!=e.end&&(i.end=n.changes.mapPos(e.end)),i}return e},provide:[a.nFrom((e=>e?[e]:[]))]});return[s,n.ViewPlugin.define((t=>new h(t,e,s,i))),l()]}},876:(e,t,i)=>{i.r(t),i.d(t,{BidiSpan:()=>Ne,BlockInfo:()=>Ue,BlockType:()=>ae,Decoration:()=>he,Direction:()=>Me,EditorView:()=>yi,PluginField:()=>ct,PluginFieldProvider:()=>ht,Range:()=>s.e6,ViewPlugin:()=>dt,ViewUpdate:()=>kt,WidgetType:()=>le,__test:()=>ln,drawSelection:()=>Ni,highlightSpecialChars:()=>Yi,keymap:()=>Mi,logException:()=>lt,placeholder:()=>on,runScopeHandlers:()=>Ti,themeClass:()=>be});for(var n=i(400),r=i(279),s=i(33),o=i(27),l={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},a={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},h="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),c="undefined"!=typeof navigator&&/Apple Computer/.test(navigator.vendor),u="undefined"!=typeof navigator&&/Gecko\/\d+/.test(navigator.userAgent),f="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),d="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),p=h&&(f||+h[1]<57)||u&&f,g=0;g<10;g++)l[48+g]=l[96+g]=String(g);for(g=1;g<=24;g++)l[g+111]="F"+g;for(g=65;g<=90;g++)l[g]=String.fromCharCode(g+32),a[g]=String.fromCharCode(g);for(var m in l)a.hasOwnProperty(m)||(a[m]=l[m]);let[y,v]="undefined"!=typeof navigator?[navigator,document]:[{userAgent:"",vendor:"",platform:""},{documentElement:{style:{}}}];const w=/Edge\/(\d+)/.exec(y.userAgent),b=/MSIE \d/.test(y.userAgent),x=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(y.userAgent),k=!!(b||x||w),S=!k&&/gecko\/(\d+)/i.test(y.userAgent),O=!k&&/Chrome\/(\d+)/.exec(y.userAgent),C="webkitFontSmoothing"in v.documentElement.style;var A={mac:/Mac/.test(y.platform),ie:k,ie_version:b?v.documentMode||6:x?+x[1]:w?+w[1]:0,gecko:S,gecko_version:S?+(/Firefox\/(\d+)/.exec(y.userAgent)||[0,0])[1]:0,chrome:!!O,chrome_version:O?+O[1]:0,ios:!k&&/AppleWebKit/.test(y.userAgent)&&/Mobile\/\w+/.test(y.userAgent),android:/Android\b/.test(y.userAgent),webkit:C,safari:/Apple Computer/.test(y.vendor),webkit_version:C?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0,tabSize:null!=v.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};function P(e){return e.getSelection?e.getSelection():document.getSelection()}function M(e,t){if(!t.anchorNode)return!1;try{return e.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)}catch(e){return!1}}function T(e){if(3==e.nodeType){let t=z();return t.setEnd(e,e.nodeValue.length),t.setStart(e,0),t.getClientRects()}return 1==e.nodeType?e.getClientRects():[]}function E(e,t,i,n){return!!i&&(I(e,t,i,n,-1)||I(e,t,i,n,1))}function D(e){for(var t=0;;t++)if(!(e=e.previousSibling))return t}function I(e,t,i,n,r){for(;;){if(e==i&&t==n)return!0;if(t==(r<0?0:L(e))){if("DIV"==e.nodeName)return!1;let i=e.parentNode;if(!i||1!=i.nodeType)return!1;t=D(e)+(r<0?0:1),e=i}else{if(1!=e.nodeType)return!1;e=e.childNodes[t+(r<0?-1:0)],t=r<0?L(e):0}}}function L(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function R(e,t){let i=t?e.left:e.right;return{left:i,right:i,top:e.top,bottom:e.bottom}}function N(e){return{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}class B{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}}let $,j=null;function V(e){if(e.setActive)return e.setActive();if(j)return e.focus(j);let t=[];for(let i=e;i&&(t.push(i,i.scrollTop,i.scrollLeft),i!=i.ownerDocument);i=i.parentNode);if(e.focus(null==j?{get preventScroll(){return j={preventScroll:!0},!0}}:void 0),!j){j=!1;for(let e=0;e<t.length;){let i=t[e++],n=t[e++],r=t[e++];i.scrollTop!=n&&(i.scrollTop=n),i.scrollLeft!=r&&(i.scrollLeft=r)}}}function z(){return $||($=document.createRange())}class Q{constructor(e,t,i=!0){this.node=e,this.offset=t,this.precise=i}static before(e,t){return new Q(e.parentNode,D(e),t)}static after(e,t){return new Q(e.parentNode,D(e)+1,t)}}const _=[];class F{constructor(){this.parent=null,this.dom=null,this.dirty=2}get editorView(){if(!this.parent)throw new Error("Accessing view in orphan content view");return this.parent.editorView}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let i of this.children){if(i==e)return t;t+=i.length+i.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}coordsAt(e,t){return null}sync(e){if(2&this.dirty){let t=this.dom,i=null;for(let n of this.children){if(n.dirty){let r=i?i.nextSibling:t.firstChild;!r||n.dom||F.get(r)||n.reuseDOM(r),n.sync(e),n.dirty=0}e&&e.node==t&&i!=n.dom&&(e.written=!0),q(t,i,n.dom),i=n.dom}let n=i?i.nextSibling:t.firstChild;for(n&&e&&e.node==t&&(e.written=!0);n;)n=U(n)}else if(1&this.dirty)for(let t of this.children)t.dirty&&(t.sync(e),t.dirty=0)}reuseDOM(e){return!1}localPosFromDOM(e,t){let i;if(e==this.dom)i=this.dom.childNodes[t];else{let n=0==L(e)?0:0==t?-1:1;for(;;){let t=e.parentNode;if(t==this.dom)break;0==n&&t.firstChild!=t.lastChild&&(n=e==t.firstChild?-1:1),e=t}i=n<0?e:e.nextSibling}if(i==this.dom.firstChild)return 0;for(;i&&!F.get(i);)i=i.nextSibling;if(!i)return this.length;for(let e=0,t=0;;e++){let n=this.children[e];if(n.dom==i)return t;t+=n.length+n.breakAfter}}domBoundsAround(e,t,i=0){let n=-1,r=-1,s=-1,o=-1;for(let l=0,a=i;l<this.children.length;l++){let i=this.children[l],h=a+i.length;if(a<e&&h>t)return i.domBoundsAround(e,t,a);if(h>=e&&-1==n&&(n=l,r=a),h>=t&&h!=a&&-1==s){s=l,o=h;break}a=h+i.breakAfter}return{from:r,to:o<0?i+this.length:o,startDOM:(n?this.children[n-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:s<this.children.length-1&&s>=0?this.children[s+1].dom:null}}markDirty(e=!1){2&this.dirty||(this.dirty|=2,this.markParentsDirty(e))}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.dirty|=2),1&t.dirty)return;t.dirty|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.dirty&&this.markParentsDirty(!0))}setDOM(e){this.dom=e,e.cmView=this}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,i=_){this.markDirty();for(let i=e;i<t;i++)this.children[i].parent=null;this.children.splice(e,t-e,...i);for(let e=0;e<i.length;e++)i[e].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new G(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}}function U(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}function q(e,t,i){let n=t?t.nextSibling:e.firstChild;if(i.parentNode==e)for(;n!=i;)n=U(n);else e.insertBefore(i,n)}F.prototype.breakAfter=0;class G{constructor(e,t,i){this.children=e,this.pos=t,this.i=i,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let i=this.children[--this.i];this.pos-=i.length+i.breakAfter}}}const H=[];class W extends F{become(e){return!1}getSide(){return 0}}W.prototype.children=H;class X extends W{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){return 3==e.nodeType&&(this.createDOM(e),!0)}merge(e,t,i){return(!i||i instanceof X&&!(this.length-(t-e)+i.length>256))&&(this.text=this.text.slice(0,e)+(i?i.text:"")+this.text.slice(t),this.markDirty(),!0)}slice(e){return new X(this.text.slice(e))}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new Q(this.dom,e)}domBoundsAround(e,t,i){return{from:i,to:i+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return J(this.dom,e,t,this.length)}}class K extends W{constructor(e,t=[],i=0){super(),this.mark=e,this.children=t,this.length=i;for(let e of t)e.setParent(this)}createDOM(){let e=document.createElement(this.mark.tagName);if(this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);this.setDOM(e)}sync(e){this.dom||this.createDOM(),super.sync(e)}merge(e,t,i,n,r){return!(i&&(!(i instanceof K&&i.mark.eq(this.mark))||e&&n<=0||t<this.length&&r<=0)||(ee(this,e,t,i?i.children:H,n-1,r-1),this.markDirty(),0))}slice(e){return new K(this.mark,function(e,t){let i=[],n=0;for(let r of e){let e=n+r.length;e>t&&i.push(n<t?r.slice(t-n):r),n=e}return i}(this.children,e),this.length-e)}domAtPos(e){return te(this.dom,this.children,e)}coordsAt(e,t){return ne(this,e,t)}}function J(e,t,i,n){let r=t,s=t,o=0;0==t&&i<0||t==n&&i>=0?A.chrome||A.gecko||(t?(r--,o=1):(s++,o=-1)):i<0?r--:s++;let l=z();l.setEnd(e,s),l.setStart(e,r);let a=l.getClientRects(),h=a[(o?o<0:i>=0)?0:a.length-1];return A.safari&&!o&&0==h.width&&(h=Array.prototype.find.call(a,(e=>e.width))||h),o?R(h,o<0):h}class Y extends W{constructor(e,t,i){super(),this.widget=e,this.length=t,this.side=i}static create(e,t,i){return new(e.customView||Y)(e,t,i)}slice(e){return Y.create(this.widget,this.length-e,this.side)}sync(){this.dom&&this.widget.updateDOM(this.dom)||(this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}getSide(){return this.side}merge(e,t,i,n,r){return!(i&&(!(i instanceof Y&&this.widget.compare(i.widget))||e>0&&n<=0||t<this.length&&r<=0)||(this.length=e+(i?i.length:0)+(this.length-t),0))}become(e){return e.length==this.length&&e instanceof Y&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.eq(e.widget)||this.markDirty(!0),this.widget=e.widget,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(0==this.length)return o.xv.empty;let e=this;for(;e.parent;)e=e.parent;let t=e.editorView,i=t&&t.state.doc,n=this.posAtStart;return i?i.slice(n,n+this.length):o.xv.empty}domAtPos(e){return 0==e?Q.before(this.dom):Q.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let i=this.dom.getClientRects(),n=null;for(let t=e>0?i.length-1:0;n=i[t],!(e>0?0==t:t==i.length-1||n.top<n.bottom);t+=e>0?-1:1);return 0==e&&t>0||e==this.length&&t<=0?n:R(n,0==e)}}class Z extends Y{domAtPos(e){return new Q(this.widget.text,e)}sync(){this.dom||this.setDOM(this.widget.toDOM())}localPosFromDOM(e,t){return t?3==e.nodeType?Math.min(t,this.length):this.length:0}ignoreMutation(){return!1}get overrideDOMText(){return null}coordsAt(e,t){return J(this.widget.text,e,t,this.length)}}function ee(e,t,i,n,r,s){let o=e.childCursor(),{i:l,off:a}=o.findPos(i,1),{i:h,off:c}=o.findPos(t,-1),u=t-i;for(let e of n)u+=e.length;e.length+=u;let{children:f}=e;if(h==l&&c){let e=f[h];if(1==n.length&&e.merge(c,a,n[0],r,s))return;if(0==n.length)return void e.merge(c,a,null,r,s);let t=e.slice(a);t.merge(0,0,n[n.length-1],0,s)?n[n.length-1]=t:n.push(t),l++,s=a=0}if(a){let e=f[l];n.length&&e.merge(0,a,n[n.length-1],0,s)?(n.pop(),s=0):e.merge(0,a,null,0,0)}else l<f.length&&n.length&&f[l].merge(0,0,n[n.length-1],0,s)&&(n.pop(),s=0);if(c){let e=f[h];n.length&&e.merge(c,e.length,n[0],r,0)?(n.shift(),r=0):e.merge(c,e.length,null,0,0),h++}else if(h&&n.length){let e=f[h-1];e.merge(e.length,e.length,n[0],r,0)&&(n.shift(),r=0)}for(;h<l&&n.length&&f[l-1].become(n[n.length-1]);)n.pop(),l--,s=0;for(;h<l&&n.length&&f[h].become(n[0]);)n.shift(),h++,r=0;!n.length&&h&&l<f.length&&r&&s&&f[l].merge(0,0,f[h-1],r,s)&&h--,(n.length||h!=l)&&e.replaceChildren(h,l,n)}function te(e,t,i){let n=0;for(let r=0;n<t.length;n++){let s=t[n],o=r+s.length;if(!(o==r&&s.getSide()<=0)){if(i>r&&i<o&&s.dom.parentNode==e)return s.domAtPos(i-r);if(i<=r)break;r=o}}for(;n>0;n--){let i=t[n-1].dom;if(i.parentNode==e)return Q.after(i)}return new Q(e,0)}function ie(e,t,i){let n,{children:r}=e;i>0&&t instanceof K&&r.length&&(n=r[r.length-1])instanceof K&&n.mark.eq(t.mark)?ie(n,t.children[0],i-1):(r.push(t),t.setParent(e)),e.length+=t.length}function ne(e,t,i){for(let n=0,r=0;r<e.children.length;r++){let s=e.children[r],o=n+s.length;if(!(o==n&&s.getSide()<=0)){if(i<=0||o==e.length?o>=t:o>t)return s.coordsAt(t-n,i);n=o}}return(e.dom.lastChild||e.dom).getBoundingClientRect()}function re(e,t){for(let i in e)"class"==i&&t.class?t.class+=" "+e.class:"style"==i&&t.style?t.style+=";"+e.style:t[i]=e[i];return t}function se(e,t){if(e==t)return!0;if(!e||!t)return!1;let i=Object.keys(e),n=Object.keys(t);if(i.length!=n.length)return!1;for(let r of i)if(-1==n.indexOf(r)||e[r]!==t[r])return!1;return!0}function oe(e,t,i){if(t)for(let n in t)i&&n in i||e.removeAttribute(n);if(i)for(let n in i)t&&t[n]==i[n]||e.setAttribute(n,i[n])}class le{eq(e){return!1}updateDOM(e){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}ignoreEvent(e){return!0}get customView(){return null}}var ae;!function(e){e[e.Text=0]="Text",e[e.WidgetBefore=1]="WidgetBefore",e[e.WidgetAfter=2]="WidgetAfter",e[e.WidgetRange=3]="WidgetRange"}(ae||(ae={}));class he extends s.uU{constructor(e,t,i,n){super(),this.startSide=e,this.endSide=t,this.widget=i,this.spec=n}get heightRelevant(){return!1}static mark(e){return new ce(e)}static widget(e){let t=e.side||0;return e.block&&(t+=200000001*(t>0?1:-1)),new fe(e,t,t,!!e.block,e.widget||null,!1)}static replace(e){let t=!!e.block,{start:i,end:n}=de(e);return new fe(e,t?-2e8*(i?2:1):1e8*(i?-1:1),t?2e8*(n?2:1):1e8*(n?1:-1),t,e.widget||null,!0)}static line(e){return new ue(e)}static set(e,t=!1){return s.Xs.of(e,t)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}he.none=s.Xs.empty;class ce extends he{constructor(e){let{start:t,end:i}=de(e);super(1e8*(t?-1:1),1e8*(i?1:-1),null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){return this==e||e instanceof ce&&this.tagName==e.tagName&&this.class==e.class&&se(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}ce.prototype.point=!1;class ue extends he{constructor(e){super(-1e8,-1e8,null,e)}eq(e){return e instanceof ue&&se(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}ue.prototype.mapMode=n.MapMode.TrackBefore,ue.prototype.point=!0;class fe extends he{constructor(e,t,i,r,s,o){super(t,i,s,e),this.block=r,this.isReplace=o,this.mapMode=r?t<0?n.MapMode.TrackBefore:n.MapMode.TrackAfter:n.MapMode.TrackDel}get type(){return this.startSide<this.endSide?ae.WidgetRange:this.startSide<0?ae.WidgetBefore:ae.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&this.widget.estimatedHeight>=5}eq(e){return e instanceof fe&&((t=this.widget)==(i=e.widget)||!!(t&&i&&t.compare(i)))&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide;var t,i}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}function de(e){let{inclusiveStart:t,inclusiveEnd:i}=e;return null==t&&(t=e.inclusive),null==i&&(i=e.inclusive),{start:t||!1,end:i||!1}}function pe(e,t,i){let n=i.length-1;n>=0&&i[n]+4>e?i[n]=Math.max(i[n],t):i.push(e,t)}fe.prototype.point=!0;const ge=n.Facet.define({combine:e=>e.join(" ")}),me=n.Facet.define({combine:e=>e.indexOf(!0)>-1}),ye=r.V.newName();function ve(e){return e.replace(/\$\w[\w\.]*/g,(e=>{let t=e.slice(1).split("."),i="";for(let e=1;e<=t.length;e++)i+=".cm-"+t.slice(0,e).join("-");return i}))}function we(e,t){return new r.V(t,{process:t=>(t=ve(t),/\$/.test(t)?t.replace(/\$/,e):e+" "+t),extend:(t,i)=>(t=ve(t),i.slice(0,e.length+1)==e+" "?e+" "+t.replace(/&/,i.slice(e.length+1)):t.replace(/&/,i))})}function be(e){if(e.indexOf(".")<0)return"cm-"+e;let t=e.split("."),i="";for(let e=1;e<=t.length;e++)i+=(i?" ":"")+"cm-"+t.slice(0,e).join("-");return i}const xe=we("."+ye,{$:{position:"relative !important",boxSizing:"border-box","&$focused":{outline_fallback:"1px dotted #212121",outline:"5px auto -webkit-focus-ring-color"},display:"flex !important",flexDirection:"column"},$scroller:{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0},$content:{margin:0,flexGrow:2,minHeight:"100%",display:"block",whiteSpace:"pre",boxSizing:"border-box",padding:"4px 0",outline:"none"},"$$light $content":{caretColor:"black"},"$$dark $content":{caretColor:"white"},$line:{display:"block",padding:"0 2px 0 4px"},$selectionLayer:{zIndex:-1,contain:"size style"},$selectionBackground:{position:"absolute"},"$$light $selectionBackground":{background:"#d9d9d9"},"$$dark $selectionBackground":{background:"#222"},"$$focused$light $selectionBackground":{background:"#d7d4f0"},"$$focused$dark $selectionBackground":{background:"#233"},$cursorLayer:{zIndex:100,contain:"size style",pointerEvents:"none"},"$$focused $cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{visibility:"hidden"},"100%":{}},$cursor:{position:"absolute",borderLeft:"1.2px solid #bbb",marginLeft:"-0.6px",pointerEvents:"none"},"$$dark $cursor":{borderLeftColor:"#444"},"$$focused $cursor":{borderLeft:"1.2px solid black"},$placeholder:{color:"#888",display:"inline-block"},$button:{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"3px"},"$$light $button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"$$dark $button":{backgroundImage:"linear-gradient(#555, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},$textfield:{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"$$light $textfield":{backgroundColor:"white"},"$$dark $textfield":{border:"1px solid #555",backgroundColor:"inherit"}}),ke=be("line");class Se extends F{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,i,n,r,s){if(i){if(!(i instanceof Se))return!1;this.dom||i.transferDOM(this)}return n&&this.setDeco(i?i.attrs:null),ee(this,e,t,i?i.children:Oe,r,s),!0}split(e){let t=new Se;if(t.breakAfter=this.breakAfter,0==this.length)return t;let{i,off:n}=this.childPos(e);n&&(t.append(this.children[i].slice(n),0),this.children[i].merge(n,this.children[i].length,null,0,0),i++);for(let e=i;e<this.children.length;e++)t.append(this.children[e],0);for(;i>0&&0==this.children[i-1].length;)this.children[i-1].parent=null,i--;return this.children.length=i,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){se(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){ie(this,e,t)}addLineDeco(e){let t=e.spec.attributes;t&&(this.attrs=re(t,this.attrs||{}))}domAtPos(e){return te(this.dom,this.children,e)}sync(e){this.dom||(this.setDOM(document.createElement("div")),this.dom.className=ke,this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(oe(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add(ke),this.prevAttrs=void 0),super.sync(e);let t=this.dom.lastChild;if(!t||"BR"!=t.nodeName&&F.get(t)instanceof Y){let e=document.createElement("BR");e.cmIgnore=!0,this.dom.appendChild(e)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let e=0;for(let t of this.children){if(!(t instanceof X))return null;let i=T(t.dom);if(1!=i.length)return null;e+=i[0].width}return{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length}}coordsAt(e,t){return ne(this,e,t)}match(e){return!1}get type(){return ae.Text}static find(e,t){for(let i=0,n=0;;i++){let r=e.children[i],s=n+r.length;if(s>=t){if(r instanceof Se)return r;if(r.length)return null}n=s+r.breakAfter}}}const Oe=[];class Ce extends F{constructor(e,t,i){super(),this.widget=e,this.length=t,this.type=i,this.breakAfter=0}merge(e,t,i,n,r,s){return!(i&&(!(i instanceof Ce&&this.widget.compare(i.widget))||e>0&&r<=0||t<this.length&&s<=0)||(this.length=e+(i?i.length:0)+(this.length-t),0))}domAtPos(e){return 0==e?Q.before(this.dom):Q.after(this.dom,e==this.length)}split(e){let t=this.length-e;return this.length=e,new Ce(this.widget,t,this.type)}get children(){return Oe}sync(){this.dom&&this.widget.updateDOM(this.dom)||(this.setDOM(this.widget.toDOM(this.editorView)),this.dom.contentEditable="false")}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):n.Text.empty}domBoundsAround(){return null}match(e){return e instanceof Ce&&e.type==this.type&&e.widget.constructor==this.widget.constructor&&(e.widget.eq(this.widget)||this.markDirty(!0),this.widget=e.widget,this.length=e.length,this.breakAfter=e.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}}class Ae{constructor(e,t,i){this.doc=e,this.pos=t,this.end=i,this.content=[],this.curLine=null,this.breakAtStart=0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Ce&&e.type==ae.WidgetBefore)}getLine(){return this.curLine||this.content.push(this.curLine=new Se),this.curLine}addWidget(e){this.curLine=null,this.content.push(e)}finish(){this.posCovered()||this.getLine()}wrapMarks(e,t){for(let i=t.length-1;i>=0;i--)e=new K(t[i],[e],e.length);return e}buildText(e,t,i){for(;e>0;){if(this.textOff==this.text.length){let{value:t,lineBreak:i,done:n}=this.cursor.next(this.skip);if(this.skip=0,n)throw new Error("Ran out of text content when drawing inline views");if(i){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.curLine=null,e--;continue}this.text=t,this.textOff=0}let n=Math.min(this.text.length-this.textOff,e);this.getLine().append(this.wrapMarks(new X(this.text.slice(this.textOff,this.textOff+n)),t),i),e-=n,this.textOff+=n}}span(e,t,i,n){this.buildText(t-e,i,n),this.pos=t,this.openStart<0&&(this.openStart=n)}point(e,t,i,n,r){let s=t-e;if(i instanceof fe)if(i.block){let{type:e}=i;e!=ae.WidgetAfter||this.posCovered()||this.getLine(),this.addWidget(new Ce(i.widget||new Pe("div"),s,e))}else{let e=this.wrapMarks(Y.create(i.widget||new Pe("span"),s,i.startSide),n);this.getLine().append(e,r)}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(i);s&&(this.textOff+s<=this.text.length?this.textOff+=s:(this.skip+=s-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=r)}static build(e,t,i,n){let r=new Ae(e,t,i);return r.openEnd=s.Xs.spans(n,t,i,r),r.openStart<0&&(r.openStart=r.openEnd),r.finish(),r}}class Pe extends le{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}}var Me;!function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"}(Me||(Me={}));const Te=Me.LTR,Ee=Me.RTL;function De(e){let t=[];for(let i=0;i<e.length;i++)t.push(1<<+e[i]);return t}const Ie=De("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Le=De("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Re=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;class Ne{constructor(e,t,i){this.from=e,this.to=t,this.level=i}get dir(){return this.level%2?Ee:Te}side(e,t){return this.dir==t==e?this.to:this.from}static find(e,t,i,n){let r=-1;for(let s=0;s<e.length;s++){let o=e[s];if(o.from<=t&&o.to>=t){if(o.level==i)return s;(r<0||(0!=n?n<0?o.from<t:o.to>t:e[r].level>o.level))&&(r=s)}}if(r<0)throw new RangeError("Index out of range");return r}}const Be=[];function $e(e,t){let i=e.length,n=t==Te?1:2;if(!e||1==n&&!Re.test(e))return je(i);for(let t=0,s=n,o=n;t<i;t++){let i=(r=e.charCodeAt(t))<=247?Ie[r]:1424<=r&&r<=1524?2:1536<=r&&r<=1785?Le[r-1536]:1774<=r&&r<=2220?4:8192<=r&&r<=8203||8204==r?256:1;512==i?i=s:8==i&&4==o&&(i=16),Be[t]=4==i?2:i,7&i&&(o=i),s=i}var r;for(let e=0,t=n,r=n;e<i;e++){let n=Be[e];if(128==n)e<i-1&&t==Be[e+1]&&24&t?n=Be[e]=t:Be[e]=256;else if(64==n){let n=e+1;for(;n<i&&64==Be[n];)n++;let s=e&&8==t||n<i&&8==Be[n]?1==r?1:8:256;for(let t=e;t<n;t++)Be[t]=s;e=n-1}else 8==n&&1==r&&(Be[e]=1);t=n,7&n&&(r=n)}for(let e=0;e<i;e++)if(256==Be[e]){let t=e+1;for(;t<i&&256==Be[t];)t++;let r=1==(e?Be[e-1]:n),s=r==(1==(t<i?Be[t]:n))?r?1:2:n;for(let i=e;i<t;i++)Be[i]=s;e=t-1}let s=[];if(1==n)for(let e=0;e<i;){let t=e,n=1!=Be[e++];for(;e<i&&n==(1!=Be[e]);)e++;if(n)for(let i=e;i>t;){let e=i,n=2!=Be[--i];for(;i>t&&n==(2!=Be[i-1]);)i--;s.push(new Ne(i,e,n?2:1))}else s.push(new Ne(t,e,0))}else for(let e=0;e<i;){let t=e,n=2==Be[e++];for(;e<i&&n==(2==Be[e]);)e++;s.push(new Ne(t,e,n?1:2))}return s}function je(e){return[new Ne(0,e,0)]}let Ve="";function ze(e,t,i,r,s){var o;let l=r.head-e.from,a=-1;if(0==l){if(!s||!e.length)return null;t[0].level!=i&&(l=t[0].side(!1,i),a=0)}else if(l==e.length){if(s)return null;let e=t[t.length-1];e.level!=i&&(l=e.side(!0,i),a=t.length-1)}a<0&&(a=Ne.find(t,l,null!==(o=r.bidiLevel)&&void 0!==o?o:-1,r.assoc));let h=t[a];l==h.side(s,i)&&(h=t[a+=s?1:-1],l=h.side(!s,i));let c=s==(h.dir==i),u=e.findClusterBreak(l,c);if(Ve=e.slice(Math.min(l,u),Math.max(l,u)),u!=h.side(s,i))return n.EditorSelection.cursor(u+e.from,c?-1:1,h.level);let f=a==(s?t.length-1:0)?null:t[a+(s?1:-1)];return f||h.level==i?f&&f.level<h.level?n.EditorSelection.cursor(f.side(!s,i)+e.from,0,f.level):n.EditorSelection.cursor(u+e.from,0,h.level):n.EditorSelection.cursor(s?e.to:e.from,s?-1:1,i)}const Qe=["pre-wrap","normal","pre-line"];class _e{constructor(){this.doc=o.xv.empty,this.lineWrapping=!1,this.direction=Me.LTR,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.lineLength=30,this.heightChanged=!1}heightForGap(e,t){let i=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(i+=Math.ceil((t-e-i*this.lineLength*.5)/this.lineLength)),this.lineHeight*i}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefresh(e,t,i){let n=!1;for(let t=0;t<e.length;t++){let i=e[t];i<0?t++:this.heightSamples[Math.floor(10*i)]||(n=!0,this.heightSamples[Math.floor(10*i)]=!0)}return n||Qe.indexOf(t)>-1!=this.lineWrapping||this.direction!=i}refresh(e,t,i,n,r,s){let o=Qe.indexOf(e)>-1,l=Math.round(i)!=Math.round(this.lineHeight)||this.lineWrapping!=o||this.direction!=t;if(this.lineWrapping=o,this.direction=t,this.lineHeight=i,this.charWidth=n,this.lineLength=r,l){this.heightSamples={};for(let e=0;e<s.length;e++){let t=s[e];t<0?e++:this.heightSamples[Math.floor(10*t)]=!0}}return l}}class Fe{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Ue{constructor(e,t,i,n,r){this.from=e,this.length=t,this.top=i,this.height=n,this.type=r}get to(){return this.from+this.length}get bottom(){return this.top+this.height}join(e){let t=(Array.isArray(this.type)?this.type:[this]).concat(Array.isArray(e.type)?e.type:[e]);return new Ue(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var qe;!function(e){e[e.ByPos=0]="ByPos",e[e.ByHeight=1]="ByHeight",e[e.ByPosNoHeight=2]="ByPosNoHeight"}(qe||(qe={}));class Ge{constructor(e,t,i=2){this.length=e,this.height=t,this.flags=i}get outdated(){return(2&this.flags)>0}set outdated(e){this.flags=(e?2:0)|-3&this.flags}setHeight(e,t){this.height!=t&&(Math.abs(this.height-t)>1e-4&&(e.heightChanged=!0),this.height=t)}replace(e,t,i){return Ge.of(i)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,i,n){let r=this;for(let s=n.length-1;s>=0;s--){let{fromA:o,toA:l,fromB:a,toB:h}=n[s],c=r.lineAt(o,qe.ByPosNoHeight,t,0,0),u=c.to>=l?c:r.lineAt(l,qe.ByPosNoHeight,t,0,0);for(h+=u.to-l,l=u.to;s>0&&c.from<=n[s-1].toA;)o=n[s-1].fromA,a=n[s-1].fromB,s--,o<c.from&&(c=r.lineAt(o,qe.ByPosNoHeight,t,0,0));a+=c.from-o,o=c.from;let f=Ye.build(i,e,a,h);r=r.replace(o,l,f)}return r.updateHeight(i,0)}static empty(){return new We(0,0)}static of(e){if(1==e.length)return e[0];let t=0,i=e.length,n=0,r=0;for(;;)if(t==i)if(n>2*r){let r=e[t-1];r.break?e.splice(--t,1,r.left,null,r.right):e.splice(--t,1,r.left,r.right),i+=1+r.break,n-=r.size}else{if(!(r>2*n))break;{let t=e[i];t.break?e.splice(i,1,t.left,null,t.right):e.splice(i,1,t.left,t.right),i+=2+t.break,r-=t.size}}else if(n<r){let i=e[t++];i&&(n+=i.size)}else{let t=e[--i];t&&(r+=t.size)}let s=0;return null==e[t-1]?(s=1,t--):null==e[t]&&(s=1,i++),new Ke(Ge.of(e.slice(0,t)),s,Ge.of(e.slice(i)))}}Ge.prototype.size=1;class He extends Ge{constructor(e,t,i){super(e,t),this.type=i}blockAt(e,t,i,n){return new Ue(n,this.length,i,this.height,this.type)}lineAt(e,t,i,n,r){return this.blockAt(0,i,n,r)}forEachLine(e,t,i,n,r,s){s(this.blockAt(0,i,n,r))}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more&&this.setHeight(e,n.heights[n.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class We extends He{constructor(e,t){super(e,t,ae.Text),this.collapsed=0,this.widgetHeight=0}replace(e,t,i){let n=i[0];return 1==i.length&&(n instanceof We||n instanceof Xe&&4&n.flags)&&Math.abs(this.length-n.length)<10?(n instanceof Xe?n=new We(n.length,this.height):n.height=this.height,this.outdated||(n.outdated=!1),n):Ge.of(i)}updateHeight(e,t=0,i=!1,n){return n&&n.from<=t&&n.more?this.setHeight(e,n.heights[n.index++]):(i||this.outdated)&&this.setHeight(e,Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Xe extends Ge{constructor(e){super(e,0)}lines(e,t){let i=e.lineAt(t).number,n=e.lineAt(t+this.length).number;return{firstLine:i,lastLine:n,lineHeight:this.height/(n-i+1)}}blockAt(e,t,i,n){let{firstLine:r,lastLine:s,lineHeight:o}=this.lines(t,n),l=Math.max(0,Math.min(s-r,Math.floor((e-i)/o))),{from:a,length:h}=t.line(r+l);return new Ue(a,h,i+o*l,o,ae.Text)}lineAt(e,t,i,n,r){if(t==qe.ByHeight)return this.blockAt(e,i,n,r);if(t==qe.ByPosNoHeight){let{from:t,to:n}=i.lineAt(e);return new Ue(t,n-t,0,0,ae.Text)}let{firstLine:s,lineHeight:o}=this.lines(i,r),{from:l,length:a,number:h}=i.lineAt(e);return new Ue(l,a,n+o*(h-s),o,ae.Text)}forEachLine(e,t,i,n,r,s){let{firstLine:o,lineHeight:l}=this.lines(i,r);for(let r=e;r<t;){let t=i.lineAt(r);r==e&&(n+=l*(t.number-o)),s(new Ue(t.from,t.length,n,n+=l,ae.Text)),r=t.to+1}}replace(e,t,i){let n=this.length-t;if(n>0){let e=i[i.length-1];e instanceof Xe?i[i.length-1]=new Xe(e.length+n):i.push(null,new Xe(n-1))}if(e>0){let t=i[0];t instanceof Xe?i[0]=new Xe(e+t.length):i.unshift(new Xe(e-1),null)}return Ge.of(i)}decomposeLeft(e,t){t.push(new Xe(e-1),null)}decomposeRight(e,t){t.push(null,new Xe(this.length-e-1))}updateHeight(e,t=0,i=!1,n){let r=t+this.length;if(n&&n.from<=t+this.length&&n.more){let i=[],s=Math.max(t,n.from);for(n.from>t&&i.push(new Xe(n.from-t-1).updateHeight(e,t));s<=r&&n.more;){let t=e.doc.lineAt(s).length;i.length&&i.push(null);let r=new We(t,n.heights[n.index++]);r.outdated=!1,i.push(r),s+=t+1}return s<=r&&i.push(null,new Xe(r-s).updateHeight(e,s)),e.heightChanged=!0,Ge.of(i)}return(i||this.outdated)&&(this.setHeight(e,e.heightForGap(t,t+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class Ke extends Ge{constructor(e,t,i){super(e.length+t+i.length,e.height+i.height,t|(e.outdated||i.outdated?2:0)),this.left=e,this.right=i,this.size=e.size+i.size}get break(){return 1&this.flags}blockAt(e,t,i,n){let r=i+this.left.height;return e<r||0==this.right.height?this.left.blockAt(e,t,i,n):this.right.blockAt(e,t,r,n+this.left.length+this.break)}lineAt(e,t,i,n,r){let s=n+this.left.height,o=r+this.left.length+this.break,l=t==qe.ByHeight?e<s||0==this.right.height:e<o,a=l?this.left.lineAt(e,t,i,n,r):this.right.lineAt(e,t,i,s,o);if(this.break||(l?a.to<o:a.from>o))return a;let h=t==qe.ByPosNoHeight?qe.ByPosNoHeight:qe.ByPos;return l?a.join(this.right.lineAt(o,h,i,s,o)):this.left.lineAt(o,h,i,n,r).join(a)}forEachLine(e,t,i,n,r,s){let o=n+this.left.height,l=r+this.left.length+this.break;if(this.break)e<l&&this.left.forEachLine(e,t,i,n,r,s),t>=l&&this.right.forEachLine(e,t,i,o,l,s);else{let a=this.lineAt(l,qe.ByPos,i,n,r);e<a.from&&this.left.forEachLine(e,a.from-1,i,n,r,s),a.to>=e&&a.from<=t&&s(a),t>a.to&&this.right.forEachLine(a.to+1,t,i,o,l,s)}}replace(e,t,i){let n=this.left.length+this.break;if(t<n)return this.balanced(this.left.replace(e,t,i),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-n,t-n,i));let r=[];e>0&&this.decomposeLeft(e,r);let s=r.length;for(let e of i)r.push(e);if(e>0&&Je(r,s-1),t<this.length){let e=r.length;this.decomposeRight(t,r),Je(r,e)}return Ge.of(r)}decomposeLeft(e,t){let i=this.left.length;if(e<=i)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(i++,e>=i&&t.push(null)),e>i&&this.right.decomposeLeft(e-i,t)}decomposeRight(e,t){let i=this.left.length,n=i+this.break;if(e>=n)return this.right.decomposeRight(e-n,t);e<i&&this.left.decomposeRight(e,t),this.break&&e<n&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Ge.of(this.break?[e,null,t]:[e,t]):(this.left=e,this.right=t,this.height=e.height+t.height,this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,i=!1,n){let{left:r,right:s}=this,o=t+r.length+this.break,l=null;return n&&n.from<=t+r.length&&n.more?l=r=r.updateHeight(e,t,i,n):r.updateHeight(e,t,i),n&&n.from<=o+s.length&&n.more?l=s=s.updateHeight(e,o,i,n):s.updateHeight(e,o,i),l?this.balanced(r,s):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Je(e,t){let i,n;null==e[t]&&(i=e[t-1])instanceof Xe&&(n=e[t+1])instanceof Xe&&e.splice(t-1,3,new Xe(i.length+1+n.length))}class Ye{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let e=Math.min(t,this.lineEnd),i=this.nodes[this.nodes.length-1];i instanceof We?i.length+=e-this.pos:(e>this.pos||!this.isCovered)&&this.nodes.push(new We(e-this.pos,-1)),this.writtenTo=e,t>e&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,i){if(e<t||i.heightRelevant){let n=i.widget?Math.max(0,i.widget.estimatedHeight):0,r=t-e;i.block?this.addBlock(new He(r,n,i.type)):(r||n>=5)&&this.addLineDeco(n,r)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new We(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let i=new Xe(t-e);return this.oracle.doc.lineAt(e).to==t&&(i.flags|=4),i}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof We)return e;let t=new We(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine(),e.type!=ae.WidgetAfter||this.isCovered||this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,e.type!=ae.WidgetBefore&&(this.covering=e)}addLineDeco(e,t){let i=this.ensureLine();i.length+=t,i.collapsed+=t,i.widgetHeight=Math.max(i.widgetHeight,e),this.writtenTo=this.pos=this.pos+t}finish(e){let t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof We||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new We(0,-1));let i=e;for(let e of this.nodes)e instanceof We&&e.updateHeight(this.oracle,i),i+=e?e.length:1;return this.nodes}static build(e,t,i,n){let r=new Ye(i,e);return s.Xs.spans(t,i,n,r),r.finish(i)}get minPointSize(){return 0}}class Ze{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,i,n){(e<t||i&&i.heightRelevant||n&&n.heightRelevant)&&pe(e,t,this.changes)}get minPointSize(){return 0}}const et=[],tt=n.Facet.define(),it=n.Facet.define(),nt=n.Facet.define(),rt=n.Facet.define(),st=n.Facet.define(),ot=n.Facet.define();function lt(e,t,i){let n=e.facet(rt);n.length?n[0](t):window.onerror?window.onerror(String(t),i,void 0,void 0,t):i?console.error(i+":",t):console.error(t)}const at=n.Facet.define({combine:e=>!e.length||e[0]});class ht{constructor(e,t){this.field=e,this.get=t}}class ct{from(e){return new ht(this,e)}static define(){return new ct}}ct.scrollMargins=ct.define();let ut=0;const ft=n.Facet.define();class dt{constructor(e,t,i){this.id=e,this.create=t,this.fields=i,this.extension=ft.of(this)}static define(e,t){let{eventHandlers:i,provide:n,decorations:r}=t||{},s=[];if(n)for(let e of Array.isArray(n)?n:[n])s.push(e);if(i&&s.push(gt.from((e=>({plugin:e,handlers:i})))),r)for(let e of Array.isArray(r)?r:[r])s.push(pt.from(e));return new dt(ut++,e,s)}static fromClass(e,t){return dt.define((t=>new e(t)),t)}}const pt=ct.define(),gt=ct.define();class mt{constructor(e,t){this.value=e,this.spec=t}static create(e,t){let i;try{i=e.create(t)}catch(e){return lt(t.state,e,"CodeMirror plugin crashed"),mt.dummy}return new mt(i,e)}takeField(e,t){for(let{field:i,get:n}of this.spec.fields)i==e&&t.push(n(this.value))}update(e){if(!this.value.update)return this;try{return this.value.update(e),this}catch(t){if(lt(e.state,t,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(e){}return mt.dummy}}destroy(e){if(this.value.destroy)try{this.value.destroy()}catch(t){lt(e.state,t,"CodeMirror plugin crashed")}}}mt.dummy=new mt({},dt.define((()=>({}))));const yt=n.Facet.define({combine:e=>e.reduce(((e,t)=>re(t,e)),{})}),vt=n.Facet.define({combine:e=>e.reduce(((e,t)=>re(t,e)),{})}),wt=n.Facet.define(),bt=n.Facet.define();class xt{constructor(e,t,i,n){this.fromA=e,this.toA=t,this.fromB=i,this.toB=n}join(e){return new xt(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,i=this;for(;t>0;t--){let n=e[t-1];if(!(n.fromA>i.toA)){if(n.toA<i.fromA)break;i=i.join(n),e.splice(t-1,1)}}return e.splice(t,0,i),e}static extendWithRanges(e,t){if(0==t.length)return e;let i=[];for(let n=0,r=0,s=0,o=0;;n++){let l=n==e.length?null:e[n],a=s-o,h=l?l.fromB:1e9;for(;r<t.length&&t[r]<h;){let e=t[r],n=t[r+1],s=Math.max(o,e),l=Math.min(h,n);if(s<=l&&new xt(s+a,l+a,s,l).addToSet(i),n>h)break;r+=2}if(!l)return i;new xt(l.fromA,l.toA,l.fromB,l.toB).addToSet(i),s=l.toA,o=l.toB}}}class kt{constructor(e,t,i=et){this.view=e,this.state=t,this.transactions=i,this.flags=0,this.prevState=e.state,this.changes=n.ChangeSet.empty(this.prevState.doc.length);for(let e of i)this.changes=this.changes.compose(e.changes);let r=[];this.changes.iterChangedRanges(((e,t,i,n)=>r.push(new xt(e,t,i,n)))),this.changedRanges=r;let s=e.hasFocus;s!=e.inputState.notifiedFocused&&(e.inputState.notifiedFocused=s,this.flags),this.docChanged&&(this.flags|=2)}get viewportChanged(){return(4&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(18&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return this.transactions.some((e=>e.docChanged))}get selectionSet(){return this.transactions.some((e=>e.selection))}get empty(){return 0==this.flags&&0==this.transactions.length}}class St{constructor(e,t,i){this.from=e,this.to=t,this.size=i}static same(e,t){if(e.length!=t.length)return!1;for(let i=0;i<e.length;i++){let n=e[i],r=t[i];if(n.from!=r.from||n.to!=r.to||n.size!=r.size)return!1}return!0}draw(e){return he.replace({widget:new Ot(this.size,e)}).range(this.from,this.to)}}class Ot extends le{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Ct{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentWidth=0,this.heightOracle=new _e,this.heightMap=Ge.empty(),this.scrollTo=null,this.printing=!1,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1,this.heightMap=this.heightMap.applyChanges(e.facet(wt),o.xv.empty,this.heightOracle.setDoc(e.doc),[new xt(0,0,0,e.doc.length)]),this.viewport=this.getViewport(0,null),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=he.set(this.lineGaps.map((e=>e.draw(!1)))),this.computeVisibleRanges()}update(e,t=null){let i=this.state;this.state=e.state;let r=this.state.facet(wt),o=e.changedRanges,l=xt.extendWithRanges(o,function(e,t,i){let n=new Ze;return s.Xs.compare(e,t,i,n),n.changes}(e.prevState.facet(wt),r,e?e.changes:n.ChangeSet.empty(this.state.doc.length))),a=this.heightMap.height;this.heightMap=this.heightMap.applyChanges(r,i.doc,this.heightOracle.setDoc(this.state.doc),l),this.heightMap.height!=a&&(e.flags|=2);let h=l.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.head<h.from||t.head>h.to)||!this.viewportIsAppropriate(h))&&(h=this.getViewport(0,t)),h.eq(this.viewport)||(this.viewport=h,e.flags|=4),(this.lineGaps.length||this.viewport.to-this.viewport.from>15e3)&&(e.flags|=this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes)))),this.computeVisibleRanges(),t&&(this.scrollTo=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.primary.empty&&e.state.selection.primary.assoc&&(this.mustEnforceCursorAssoc=!0)}measure(e,t){let i=e.dom,n="",r=Me.LTR;if(!t){let e=window.getComputedStyle(i);n=e.whiteSpace,r="rtl"==e.direction?Me.RTL:Me.LTR,this.paddingTop=parseInt(e.paddingTop)||0,this.paddingBottom=parseInt(e.paddingBottom)||0}let s=this.printing?{top:-1e8,bottom:1e8,left:-1e8,right:1e8}:function(e,t){let i=e.getBoundingClientRect(),n=Math.max(0,i.left),r=Math.min(innerWidth,i.right),s=Math.max(0,i.top),o=Math.min(innerHeight,i.bottom);for(let t=e.parentNode;t;)if(1==t.nodeType){if((t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)&&"visible"!=window.getComputedStyle(t).overflow){let e=t.getBoundingClientRect();n=Math.max(n,e.left),r=Math.min(r,e.right),s=Math.max(s,e.top),o=Math.min(o,e.bottom)}t=t.parentNode}else{if(11!=t.nodeType)break;t=t.host}return{left:n-i.left,right:r-i.left,top:s-(i.top+t),bottom:o-(i.top+t)}}(i,this.paddingTop),o=s.top-this.pixelViewport.top,l=s.bottom-this.pixelViewport.bottom;if(this.pixelViewport=s,this.inView=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left,!this.inView)return 0;let a=e.measureVisibleLineHeights(),h=!1,c=0,u=0,f=this.heightOracle;if(!t){let t=e.dom.clientWidth;if(f.mustRefresh(a,n,r)||f.lineWrapping&&Math.abs(t-this.contentWidth)>f.charWidth){let{lineHeight:i,charWidth:s}=e.measureTextSize();h=f.refresh(n,r,i,s,t/s,a),h&&(e.minWidth=0,u|=16)}this.contentWidth!=t&&(this.contentWidth=t,u|=16),o>0&&l>0?c=Math.max(o,l):o<0&&l<0&&(c=Math.min(o,l))}return f.heightChanged=!1,this.heightMap=this.heightMap.updateHeight(f,0,h,new Fe(this.viewport.from,a)),f.heightChanged&&(u|=2),(!this.viewportIsAppropriate(this.viewport,c)||this.scrollTo&&(this.scrollTo.head<this.viewport.from||this.scrollTo.head>this.viewport.to))&&(this.viewport=this.getViewport(c,this.scrollTo),u|=4),(this.lineGaps.length||this.viewport.to-this.viewport.from>15e3)&&(u|=this.updateLineGaps(this.ensureLineGaps(h?[]:this.lineGaps))),this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.enforceCursorAssoc()),u}getViewport(e,t){let i=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),n=this.heightMap,r=this.state.doc,{top:s,bottom:o}=this.pixelViewport,l=new At(n.lineAt(s-1e3*i,qe.ByHeight,r,0,0).from,n.lineAt(o+1e3*(1-i),qe.ByHeight,r,0,0).to);if(t)if(t.head<l.from){let{top:e}=n.lineAt(t.head,qe.ByPos,r,0,0);l=new At(n.lineAt(e-500,qe.ByHeight,r,0,0).from,n.lineAt(e+(o-s)+500,qe.ByHeight,r,0,0).to)}else if(t.head>l.to){let{bottom:e}=n.lineAt(t.head,qe.ByPos,r,0,0);l=new At(n.lineAt(e-(o-s)-500,qe.ByHeight,r,0,0).from,n.lineAt(e+500,qe.ByHeight,r,0,0).to)}return l}mapViewport(e,t){let i=t.mapPos(e.from,-1),n=t.mapPos(e.to,1);return new At(this.heightMap.lineAt(i,qe.ByPos,this.state.doc,0,0).from,this.heightMap.lineAt(n,qe.ByPos,this.state.doc,0,0).to)}viewportIsAppropriate({from:e,to:t},i=0){let{top:n}=this.heightMap.lineAt(e,qe.ByPos,this.state.doc,0,0),{bottom:r}=this.heightMap.lineAt(t,qe.ByPos,this.state.doc,0,0);return(0==e||n<=this.pixelViewport.top-Math.max(10,Math.min(-i,250)))&&(t==this.state.doc.length||r>=this.pixelViewport.bottom+Math.max(10,Math.min(i,250)))&&n>this.pixelViewport.top-2e3&&r<this.pixelViewport.bottom+2e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let i=[];for(let n of e)t.touchesRange(n.from,n.to)||i.push(new St(t.mapPos(n.from),t.mapPos(n.to),n.size));return i}ensureLineGaps(e){let t=[];return this.heightOracle.direction!=Me.LTR||this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.state.doc,0,0,(i=>{if(i.length<1e4)return;let n,r,o=function(e,t,i){let n=[],r=e,o=0;return s.Xs.spans(i.facet(wt),e,t,{span(){},point(e,t){e>r&&(n.push({from:r,to:e}),o+=e-r),r=t},minPointSize:20}),r<t&&(n.push({from:r,to:t}),o+=t-r),{total:o,ranges:n}}(i.from,i.to,this.state);if(o.total<1e4)return;if(this.heightOracle.lineWrapping)n=i.from!=this.viewport.from?i.from:Pt(o,(this.pixelViewport.top-i.top)/i.height),r=i.to!=this.viewport.to?i.to:Pt(o,(this.pixelViewport.bottom-i.top)/i.height);else{let e=o.total*this.heightOracle.charWidth;n=Pt(o,this.pixelViewport.left/e),r=Pt(o,this.pixelViewport.right/e)}let l=this.state.selection.primary;l.from<=n&&l.to>=i.from&&(n=l.from),l.from<=i.to&&l.to>=r&&(r=l.to);let a=n-1e4,h=r+1e4;a>i.from+5e3&&t.push(Tt(e,(e=>e.from==i.from&&e.to>a-5e3&&e.to<a+5e3))||new St(i.from,a,this.gapSize(i,a,!0,o))),h<i.to-5e3&&t.push(Tt(e,(e=>e.to==i.to&&e.from>h-5e3&&e.from<h+5e3))||new St(h,i.to,this.gapSize(i,h,!1,o)))})),t}gapSize(e,t,i,n){if(this.heightOracle.lineWrapping){let r=e.height*Mt(n,t);return i?r:e.height-r}{let e=Mt(n,t);return n.total*this.heightOracle.charWidth*(i?e:1-e)}}updateLineGaps(e){return St.same(e,this.lineGaps)?0:(this.lineGaps=e,this.lineGapDeco=he.set(e.map((e=>e.draw(this.heightOracle.lineWrapping)))),8)}computeVisibleRanges(){let e=this.state.facet(wt);this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];s.Xs.spans(e,this.viewport.from,this.viewport.to,{span(e,i){t.push({from:e,to:i})},point(){},minPointSize:20}),this.visibleRanges=t}lineAt(e,t){return this.heightMap.lineAt(e,qe.ByPos,this.state.doc,t+this.paddingTop,0)}lineAtHeight(e,t){return this.heightMap.lineAt(e,qe.ByHeight,this.state.doc,t+this.paddingTop,0)}blockAtHeight(e,t){return this.heightMap.blockAt(e,this.state.doc,t+this.paddingTop,0)}forEachLine(e,t,i,n){return this.heightMap.forEachLine(e,t,this.state.doc,n+this.paddingTop,0,i)}}class At{constructor(e,t){this.from=e,this.to=t}eq(e){return this.from==e.from&&this.to==e.to}}function Pt({total:e,ranges:t},i){if(i<=0)return t[0].from;if(i>=1)return t[t.length-1].to;let n=Math.floor(e*i);for(let e=0;;e++){let{from:i,to:r}=t[e],s=r-i;if(n<=s)return i+n;n-=s}}function Mt(e,t){let i=0;for(let{from:n,to:r}of e.ranges){if(t<=r){i+=t-n;break}i+=r-n}return i/e.total}function Tt(e,t){for(let i of e)if(t(i))return i}const Et=[];class Dt extends F{constructor(e){super(),this.view=e,this.viewports=Et,this.compositionDeco=he.none,this.decorations=[],this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.setDOM(e.contentDOM),this.children=[new Se],this.children[0].setParent(this),this.updateInner([new xt(0,0,0,e.state.doc.length)],this.updateDeco(),0)}get root(){return this.view.root}get editorView(){return this.view}get length(){return this.view.state.doc.length}update(e){var t;let i=e.changedRanges;this.minWidth>0&&i.length&&(i.every((({fromA:e,toA:t})=>t<this.minWidthFrom||e>this.minWidthTo))?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=0),(null===(t=this.view.inputState)||void 0===t?void 0:t.composing)?e.transactions.length&&(this.compositionDeco=function(e,t){let i=P(e.root),n=i.focusNode&&Nt(i.focusNode,i.focusOffset,0);if(!n)return he.none;let r,s,o=e.docView.nearest(n),l=n;if(o instanceof W){for(;o.parent instanceof W;)o=o.parent;r=o.posAtStart,s=r+o.length,l=o.dom}else{if(!(o instanceof Se))return he.none;{for(;l.parentNode!=o.dom;)l=l.parentNode;let e=l.previousSibling;for(;e&&!F.get(e);)e=e.previousSibling;r=s=e?F.get(e).posAtEnd:o.posAtStart}}let a=t.mapPos(r,1),h=Math.max(a,t.mapPos(s,-1)),c=n.nodeValue,{state:u}=e;if(h-a<c.length)if(u.sliceDoc(a,Math.min(u.doc.length,a+c.length))==c)h=a+c.length;else{if(u.sliceDoc(Math.max(0,h-c.length),h)!=c)return he.none;a=h-c.length}else if(u.sliceDoc(a,h)!=c)return he.none;return he.set(he.replace({widget:new Rt(l,n)}).range(a,h))}(this.view,e.changes)):this.compositionDeco=he.none;let r=(A.ie||A.chrome)&&!this.compositionDeco.size&&e&&e.state.doc.lines!=e.prevState.doc.lines,o=this.decorations,l=this.updateDeco(),a=function(e,t,i){let n=new $t;return s.Xs.compare(e,t,i,n),n.changes}(o,l,e.changes);i=xt.extendWithRanges(i,a);let h=e.transactions.some((e=>"pointerselection"==e.annotation(n.Transaction.userEvent)));return 0==this.dirty&&0==i.length&&!(12&e.flags)&&e.state.selection.primary.from>=this.view.viewport.from&&e.state.selection.primary.to<=this.view.viewport.to?(this.updateSelection(r,h),!1):(this.updateInner(i,l,e.prevState.doc.length,r,h),!0)}updateInner(e,t,i,n=!1,r=!1){this.updateChildren(e,t,i),this.view.observer.ignore((()=>{this.dom.style.height=this.view.viewState.heightMap.height+"px",this.dom.style.minWidth=this.minWidth?this.minWidth+"px":"";let e=A.chrome?{node:P(this.view.root).focusNode,written:!1}:void 0;this.sync(e),this.dirty=0,(null==e?void 0:e.written)&&(n=!0),this.updateSelection(n,r),this.dom.style.height=""}))}updateChildren(e,t,i){let n=this.childCursor(i);for(let i=e.length-1;;i--){let r=i>=0?e[i]:null;if(!r)break;let{fromA:s,toA:o,fromB:l,toB:a}=r,{content:h,breakAtStart:c,openStart:u,openEnd:f}=Ae.build(this.view.state.doc,l,a,t),{i:d,off:p}=n.findPos(o,1),{i:g,off:m}=n.findPos(s,-1);this.replaceRange(g,m,d,p,h,c,u,f)}}replaceRange(e,t,i,n,r,s,o,l){let a=this.children[e],h=r.length?r[r.length-1]:null,c=h?h.breakAfter:s;if(e==i&&!s&&!c&&r.length<2&&a.merge(t,n,r.length?h:null,0==t,o,l))return;let u=this.children[i];for(n<u.length||u.children.length&&0==u.children[u.children.length-1].length?(e==i&&(u=u.split(n),n=0),!c&&h&&u.merge(0,n,h,!0,0,l)?r[r.length-1]=u:((n||u.children.length&&0==u.children[0].length)&&u.merge(0,n,null,!1,0,l),r.push(u))):u.breakAfter&&(h?h.breakAfter=1:s=1),i++,a.breakAfter=s,t>0&&(!s&&r.length&&a.merge(t,a.length,r[0],!1,o,0)?a.breakAfter=r.shift().breakAfter:(t<a.length||a.children.length&&0==a.children[a.children.length-1].length)&&a.merge(t,a.length,null,!1,o,0),e++);e<i&&r.length;)if(this.children[i-1].match(r[r.length-1]))i--,r.pop();else{if(!this.children[e].match(r[0]))break;e++,r.shift()}(e<i||r.length)&&this.replaceChildren(e,i,r)}updateSelection(e=!1,t=!1){if(!t&&!this.mayControlSelection())return;let i=this.view.state.selection.primary,n=this.domAtPos(i.anchor),r=this.domAtPos(i.head),s=P(this.root);(e||!s.focusNode||A.gecko&&i.empty&&Bt(s.focusNode,s.focusOffset)||!E(n.node,n.offset,s.anchorNode,s.anchorOffset)||!E(r.node,r.offset,s.focusNode,s.focusOffset))&&this.view.observer.ignore((()=>{if(i.empty){if(A.gecko){let e=Bt(n.node,n.offset);if(e&&3!=e){let t=Nt(n.node,n.offset,1==e?1:-1);t&&(n=new Q(t,1==e?0:t.nodeValue.length))}}s.collapse(n.node,n.offset),null!=i.bidiLevel&&null!=s.cursorBidiLevel&&(s.cursorBidiLevel=i.bidiLevel)}else if(s.extend)s.collapse(n.node,n.offset),s.extend(r.node,r.offset);else{let e=document.createRange();i.anchor>i.head&&([n,r]=[r,n]),e.setEnd(r.node,r.offset),e.setStart(n.node,n.offset),s.removeAllRanges(),s.addRange(e)}})),this.impreciseAnchor=n.precise?null:new Q(s.anchorNode,s.anchorOffset),this.impreciseHead=r.precise?null:new Q(s.focusNode,s.focusOffset)}enforceCursorAssoc(){let e=this.view.state.selection.primary,t=P(this.root);if(!e.empty||!e.assoc||!t.modify)return;let i=Se.find(this,e.head);if(!i)return;let n=i.posAtStart;if(e.head==n||e.head==n+i.length)return;let r=this.coordsAt(e.head,-1),s=this.coordsAt(e.head,1);if(!r||!s||r.bottom>s.top)return;let o=this.domAtPos(e.head+e.assoc);t.collapse(o.node,o.offset),t.modify("move",e.assoc<0?"forward":"backward","lineboundary")}mayControlSelection(){return this.view.state.facet(at)?this.root.activeElement==this.dom:M(this.dom,P(this.root))}nearest(e){for(let t=e;t;){let e=F.get(t);if(e&&e.rootView==this)return e;t=t.parentNode}return null}posFromDOM(e,t){let i=this.nearest(e);if(!i)throw new RangeError("Trying to find position for a DOM position outside of the document");return i.localPosFromDOM(e,t)+i.posAtStart}domAtPos(e){let{i:t,off:i}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let e=this.children[t];if(i<e.length||e instanceof Se)break;t++,i=0}return this.children[t].domAtPos(i)}coordsAt(e,t){for(let i=this.length,n=this.children.length-1;;n--){let r=this.children[n],s=i-r.breakAfter-r.length;if(e>s||e==s&&(r.type==ae.Text||!n||this.children[n-1].breakAfter))return r.coordsAt(e-s,t);i=s}}measureVisibleLineHeights(){let e=[],{from:t,to:i}=this.view.viewState.viewport,n=Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1;for(let r=0,s=0;s<this.children.length;s++){let o=this.children[s],l=r+o.length;if(l>i)break;if(r>=t){e.push(o.dom.getBoundingClientRect().height);let t=o.dom.scrollWidth;t>n&&(this.minWidth=n=t,this.minWidthFrom=r,this.minWidthTo=l)}r=l+o.breakAfter}return e}measureTextSize(){for(let e of this.children)if(e instanceof Se){let t=e.measureTextSize();if(t)return t}let e,t,i=document.createElement("div");return i.className="cm-line",i.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((()=>{this.dom.appendChild(i);let n=T(i.firstChild)[0];e=i.getBoundingClientRect().height,t=n?n.width/27:7,i.remove()})),{lineHeight:e,charWidth:t}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new G(this.children,e,t)}computeBlockGapDeco(){let e=this.view.viewState.viewport,t=[e],{head:i,anchor:n}=this.view.state.selection.primary;if(i<e.from||i>e.to){let{from:e,to:n}=this.view.viewState.lineAt(i,0);t.push(new At(e,n))}if(!t.some((({from:e,to:t})=>n>=e&&n<=t))){let{from:e,to:i}=this.view.viewState.lineAt(n,0);t.push(new At(e,i))}this.viewports=t.sort(((e,t)=>e.from-t.from));let r=[];for(let e=0,i=0;;i++){let n=i==t.length?null:t[i],s=n?n.from-1:this.length;if(s>e){let t=this.view.viewState.lineAt(s,0).bottom-this.view.viewState.lineAt(e,0).top;r.push(he.replace({widget:new Lt(t),block:!0,inclusive:!0}).range(e,s))}if(!n)break;e=n.to+1}return he.set(r)}updateDeco(){return this.decorations=[this.computeBlockGapDeco(),this.view.viewState.lineGapDeco,this.compositionDeco,...this.view.state.facet(wt),...this.view.pluginField(pt)]}scrollPosIntoView(e,t){let i=this.coordsAt(e,t);if(!i)return;let n=0,r=0,s=0,o=0;for(let e of this.view.pluginField(ct.scrollMargins))if(e){let{left:t,right:i,top:l,bottom:a}=e;null!=t&&(n=Math.max(n,t)),null!=i&&(r=Math.max(r,i)),null!=l&&(s=Math.max(s,l)),null!=a&&(o=Math.max(o,a))}!function(e,t){let i=e.ownerDocument.defaultView;for(let n=e.parentNode;n;)if(1==n.nodeType){let e,r=n==document.body;if(r)e=N(i);else{if(n.scrollHeight<=n.clientHeight&&n.scrollWidth<=n.clientWidth){n=n.parentNode;continue}let t=n.getBoundingClientRect();e={left:t.left,right:t.left+n.clientWidth,top:t.top,bottom:t.top+n.clientHeight}}let s=0,o=0;if(t.top<e.top?o=-(e.top-t.top+5):t.bottom>e.bottom&&(o=t.bottom-e.bottom+5),t.left<e.left?s=-(e.left-t.left+5):t.right>e.right&&(s=t.right-e.right+5),s||o)if(r)i.scrollBy(s,o);else{if(o){let e=n.scrollTop;n.scrollTop+=o,o=n.scrollTop-e}if(s){let e=n.scrollLeft;n.scrollLeft+=s,s=n.scrollLeft-e}t={left:t.left-s,top:t.top-o,right:t.right-s,bottom:t.bottom-o}}if(r)break;n=n.parentNode}else{if(11!=n.nodeType)break;n=n.host}}(this.dom,{left:i.left-n,top:i.top-s,right:i.right+r,bottom:i.bottom+o})}}const It=1e7;class Lt extends le{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){if(this.height<It){for(;e.lastChild;)e.lastChild.remove();e.style.height=this.height+"px"}else{e.style.height="";for(let t=this.height;t>0;t-=It)e.appendChild(document.createElement("div")).style.height=Math.min(t,It)+"px"}return!0}get estimatedHeight(){return this.height}}class Rt extends le{constructor(e,t){super(),this.top=e,this.text=t}eq(e){return this.top==e.top&&this.text==e.text}toDOM(){return this.top}ignoreEvent(){return!1}get customView(){return Z}}function Nt(e,t,i){for(;;){if(3==e.nodeType)return e;if(1==e.nodeType&&t>0&&i<=0)t=L(e=e.childNodes[t-1]);else{if(!(1==e.nodeType&&t<e.childNodes.length&&i>=0))return null;e=e.childNodes[t],t=0}}}function Bt(e,t){return 1!=e.nodeType?0:(t&&"false"==e.childNodes[t-1].contentEditable?1:0)|(t<e.childNodes.length&&"false"==e.childNodes[t].contentEditable?2:0)}class $t{constructor(){this.changes=[]}compareRange(e,t){pe(e,t,this.changes)}comparePoint(e,t){pe(e,t,this.changes)}}function jt(e,t){return t.left>e?t.left-e:Math.max(0,e-t.right)}function Vt(e,t){return t.top>e?t.top-e:Math.max(0,e-t.bottom)}function zt(e,t){return e.top<t.bottom-1&&e.bottom>t.top+1}function Qt(e,t){return t<e.top?{top:t,left:e.left,right:e.right,bottom:e.bottom}:e}function _t(e,t){return t>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:t}:e}function Ft(e,t,i){let n,r,s,o,l,a,h,c;for(let u=e.firstChild;u;u=u.nextSibling){let e=T(u);for(let f=0;f<e.length;f++){let d=e[f];r&&zt(r,d)&&(d=Qt(_t(d,r.bottom),r.top));let p=jt(t,d),g=Vt(i,d);if(0==p&&0==g)return 3==u.nodeType?Ut(u,t,i):Ft(u,t,i);(!n||o>g||o==g&&s>p)&&(n=u,r=d,s=p,o=g),0==p?i>d.bottom&&(!h||h.bottom<d.bottom)?(l=u,h=d):i<d.top&&(!c||c.top>d.top)&&(a=u,c=d):h&&zt(h,d)?h=_t(h,d.bottom):c&&zt(c,d)&&(c=Qt(c,d.top))}}if(h&&h.bottom>=i?(n=l,r=h):c&&c.top<=i&&(n=a,r=c),!n)return{node:e,offset:0};let u=Math.max(r.left,Math.min(r.right,t));return 3==n.nodeType?Ut(n,u,i):s||"true"!=n.contentEditable?{node:e,offset:Array.prototype.indexOf.call(e.childNodes,n)+(t>=(r.left+r.right)/2?1:0)}:Ft(n,u,i)}function Ut(e,t,i){let n=e.nodeValue.length,r=z();for(let s=0;s<n;s++){r.setEnd(e,s+1),r.setStart(e,s);let n=r.getClientRects();for(let o=0;o<n.length;o++){let l=n[o];if(l.top!=l.bottom&&l.left-1<=t&&l.right+1>=t&&l.top-1<=i&&l.bottom+1>=i){let i=t>=(l.left+l.right)/2,n=i;return(A.chrome||A.gecko)&&(r.setEnd(e,s),r.getBoundingClientRect().left==l.right&&(n=!i)),{node:e,offset:s+(n?1:0)}}}}return{node:e,offset:0}}function qt(e,{x:t,y:i},n=-1){let r,s=e.contentDOM.getBoundingClientRect(),o=e.defaultLineHeight/2;for(let t=!1;;){if(r=e.blockAtHeight(i,s.top),r.top>i||r.bottom<i){if(n=r.top>i?-1:1,i=Math.min(r.bottom-o,Math.max(r.top+o,i)),t)return-1;t=!0}if(r.type==ae.Text)break;i=n>0?r.bottom+o:r.top-o}let l=r.from;if(l<e.viewport.from)return 0==e.viewport.from?0:null;if(l>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:null;t=Math.max(s.left+1,Math.min(s.right-1,t));let a,h=e.root,c=h.elementFromPoint(t,i),u=-1;if(c&&e.contentDOM.contains(c)&&!(e.docView.nearest(c)instanceof Y))if(h.caretPositionFromPoint){let e=h.caretPositionFromPoint(t,i);e&&({offsetNode:a,offset:u}=e)}else if(h.caretRangeFromPoint){let e=h.caretRangeFromPoint(t,i);e&&({startContainer:a,startOffset:u}=e)}if(!a||!e.docView.dom.contains(a)){let n=Se.find(e.docView,l);({node:a,offset:u}=Ft(n.dom,t,i))}return e.docView.posFromDOM(a,u)}function Gt(e,t,i,r){let s=e.state.doc.lineAt(t.head),o=e.bidiSpans(s);for(let l=t,a=null;;){let t=ze(s,o,e.textDirection,l,i),h=Ve;if(!t){if(s.number==(i?e.state.doc.lines:1))return l;h="\n",s=e.state.doc.line(s.number+(i?1:-1)),o=e.bidiSpans(s),t=n.EditorSelection.cursor(i?s.from:s.to)}if(a){if(!a(h))return l}else{if(!r)return t;a=r(h)}l=t}}class Ht{constructor(e){this.lastKeyCode=0,this.lastKeyTime=0,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.scrollHandlers=[],this.registeredEvents=[],this.customHandlers=[],this.composing=!1,this.compositionEndedAt=0,this.mouseSelection=null;for(let t in Kt){let i=Kt[t];e.contentDOM.addEventListener(t,(n=>{Xt(e,n)&&!this.ignoreDuringComposition(n)&&(this.mustFlushObserver(n)&&e.observer.forceFlush(),this.runCustomHandlers(t,e,n)?n.preventDefault():i(e,n))})),this.registeredEvents.push(t)}e.contentDOM.addEventListener("keydown",(t=>{e.inputState.lastKeyCode=t.keyCode,e.inputState.lastKeyTime=Date.now()})),this.notifiedFocused=e.hasFocus,this.ensureHandlers(e)}setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}ensureHandlers(e){let t=this.customHandlers=e.pluginField(gt);for(let i of t)for(let t in i.handlers)this.registeredEvents.indexOf(t)<0&&"scroll"!=t&&(this.registeredEvents.push(t),e.contentDOM.addEventListener(t,(i=>{Xt(e,i)&&this.runCustomHandlers(t,e,i)&&i.preventDefault()})))}runCustomHandlers(e,t,i){for(let n of this.customHandlers){let r=n.handlers[e];if(r)try{if(r.call(n.plugin,i,t)||i.defaultPrevented)return!0}catch(e){lt(t.state,e)}}return!1}runScrollHandlers(e,t){for(let i of this.customHandlers){let n=i.handlers.scroll;if(n)try{n.call(i.plugin,t,e)}catch(t){lt(e.state,t)}}}ignoreDuringComposition(e){return!(!/^key/.test(e.type)||!this.composing&&(!(A.safari&&e.timeStamp-this.compositionEndedAt<500)||(this.compositionEndedAt=0,0)))}mustFlushObserver(e){return"keydown"==e.type||"compositionend"==e.type}startMouseSelection(e,t,i){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=new Wt(this,e,t,i)}update(e){this.mouseSelection&&this.mouseSelection.update(e),this.lastKeyCode=this.lastSelectionTime=0}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}class Wt{constructor(e,t,i,r){this.inputState=e,this.view=t,this.startEvent=i,this.style=r;let s=t.contentDOM.ownerDocument;s.addEventListener("mousemove",this.move=this.move.bind(this)),s.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=i.shiftKey,this.multiple=t.state.facet(n.EditorState.allowMultipleSelections)&&function(e,t){let i=e.state.facet(tt);return i.length?i[0](t):A.mac?t.metaKey:t.ctrlKey}(t,i),this.dragMove=function(e,t){let i=e.state.facet(it);return i.length?i[0](t):A.mac?!t.altKey:!t.ctrlKey}(t,i),this.dragging=!!function(e,t){let{primary:i}=e.state.selection;if(i.empty)return!1;let n=P(e.root);if(0==n.rangeCount)return!0;let r=n.getRangeAt(0).getClientRects();for(let e=0;e<r.length;e++){let i=r[e];if(i.left<=t.clientX&&i.right>=t.clientX&&i.top<=t.clientY&&i.bottom>=t.clientY)return!0}return!1}(t,i)&&null,!1===this.dragging&&(i.preventDefault(),this.select(i))}move(e){if(0==e.buttons)return this.destroy();!1===this.dragging&&this.select(e)}up(e){null==this.dragging&&this.select(this.startEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.inputState.mouseSelection=null}select(e){let t=this.style.get(e,this.extend,this.multiple);t.eq(this.view.state.selection)&&t.primary.assoc==this.view.state.selection.primary.assoc||this.view.dispatch({selection:t,annotations:n.Transaction.userEvent.of("pointerselection"),scrollIntoView:!0})}update(e){e.docChanged&&this.dragging&&(this.dragging=this.dragging.map(e.changes)),this.style.update(e)}}function Xt(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let i,n=t.target;n!=e.contentDOM;n=n.parentNode)if(!n||11==n.nodeType||(i=F.get(n))&&i.ignoreEvent(t))return!1;return!0}const Kt=Object.create(null),Jt=A.ie&&A.ie_version<15||A.ios&&A.webkit_version<604;function Yt(e,t){let i,{state:r}=e,s=1,o=r.toText(t),l=o.lines==r.selection.ranges.length;i=li&&r.selection.ranges.every((e=>e.empty))&&li==o.toString()?{changes:r.selection.ranges.map((e=>r.doc.lineAt(e.from))).filter(((e,t,i)=>0==t||i[t-1]!=e)).map((e=>({from:e.from,insert:(l?o.line(s++).slice():t)+r.lineBreak})))}:l?r.changeByRange((e=>{let t=o.line(s++);return{changes:{from:e.from,to:e.to,insert:t.slice()},range:n.EditorSelection.cursor(e.from+t.length)}})):r.replaceSelection(o),e.dispatch(i,{annotations:n.Transaction.userEvent.of("paste"),scrollIntoView:!0})}function Zt(e,t,i,r){if(1==r)return n.EditorSelection.cursor(t,i);if(2==r)return function(e,t,i=1){let r=e.charCategorizer(t),s=e.doc.lineAt(t),o=t-s.from;if(0==s.length)return n.EditorSelection.cursor(t);0==o?i=1:o==s.length&&(i=-1);let l=o,a=o;i<0?l=s.findClusterBreak(o,!1):a=s.findClusterBreak(o,!0);let h=r(s.slice(l,a));for(;l>0;){let e=s.findClusterBreak(l,!1);if(r(s.slice(e,l))!=h)break;l=e}for(;a<s.length;){let e=s.findClusterBreak(a,!0);if(r(s.slice(a,e))!=h)break;a=e}return n.EditorSelection.range(l+s.from,a+s.from)}(e.state,t,i);{let i=Se.find(e.docView,t);if(i)return n.EditorSelection.range(i.posAtStart,i.posAtEnd);let{from:r,to:s}=e.state.doc.lineAt(t);return n.EditorSelection.range(r,s)}}Kt.keydown=(e,t)=>{(function(e){let t=(e.ctrlKey?1:0)|(e.metaKey?8:0)|(e.altKey?2:0)|(e.shiftKey?4:0),i=e.keyCode,n=A.mac&&1==t;return 8==i||n&&72==i||46==i||n&&68==i||27==i||t==(A.mac?8:1)&&(66==i||73==i||89==i||90==i)})(t)&&t.preventDefault(),e.inputState.setSelectionOrigin("keyboardselection")},Kt.touchdown=Kt.touchmove=e=>{e.inputState.setSelectionOrigin("pointerselection")},Kt.mousedown=(e,t)=>{let i=null;for(let n of e.state.facet(nt))if(i=n(e,t),i)break;i||0!=t.button||(i=function(e,t){let i=ni(e,t),r=function(e){if(!ri)return e.detail;let t=si;return si=e,oi=!t||t.timeStamp>Date.now()-400&&Math.abs(t.clientX-e.clientX)<2&&Math.abs(t.clientY-e.clientY)<2?(oi+1)%3:1}(t),s=e.state.selection,o=i,l=t;return{update(e){e.changes&&(i&&(i.pos=e.changes.mapPos(i.pos)),s=s.map(e.changes))},get(t,a,h){let c;if(t.clientX==l.clientX&&t.clientY==l.clientY?c=o:(c=o=ni(e,t),l=t),!c||!i)return s;let u=Zt(e,c.pos,c.bias,r);if(i.pos!=c.pos&&!a){let t=Zt(e,i.pos,i.bias,r),s=Math.min(t.from,u.from),o=Math.max(t.to,u.to);u=s<u.from?n.EditorSelection.range(s,o):n.EditorSelection.range(o,s)}return a?s.replaceRange(s.primary.extend(u.from,u.to)):h?s.addRange(u):n.EditorSelection.create([u])}}}(e,t)),i&&(e.root.activeElement!=e.contentDOM&&e.observer.ignore((()=>V(e.contentDOM))),e.inputState.startMouseSelection(e,t,i))};let ei=(e,t)=>e>=t.top&&e<=t.bottom,ti=(e,t,i)=>ei(t,i)&&e>=i.left&&e<=i.right;function ii(e,t,i,n){let r=Se.find(e.docView,t);if(!r)return 1;let s=t-r.posAtStart;if(0==s)return 1;if(s==r.length)return-1;let o=r.coordsAt(s,-1);if(o&&ti(i,n,o))return-1;let l=r.coordsAt(s,1);return l&&ti(i,n,l)?1:o&&ei(n,o)?-1:1}function ni(e,t){let i=e.posAtCoords({x:t.clientX,y:t.clientY});return null==i?null:{pos:i,bias:ii(e,i,t.clientX,t.clientY)}}const ri=A.ie&&A.ie_version<=11;let si=null,oi=0;Kt.dragstart=(e,t)=>{let{selection:{primary:i}}=e.state,{mouseSelection:n}=e.inputState;n&&(n.dragging=i),t.dataTransfer&&(t.dataTransfer.setData("Text",e.state.sliceDoc(i.from,i.to)),t.dataTransfer.effectAllowed="copyMove")},Kt.drop=(e,t)=>{if(!t.dataTransfer)return;let i=e.posAtCoords({x:t.clientX,y:t.clientY}),r=t.dataTransfer.getData("Text");if(null==i||!r)return;t.preventDefault();let{mouseSelection:s}=e.inputState,o=s&&s.dragging&&s.dragMove?{from:s.dragging.from,to:s.dragging.to}:null,l={from:i,insert:r},a=e.state.changes(o?[o,l]:l);e.focus(),e.dispatch({changes:a,selection:{anchor:a.mapPos(i,-1),head:a.mapPos(i,1)},annotations:n.Transaction.userEvent.of("drop")})},Kt.paste=(e,t)=>{e.observer.flush();let i=Jt?null:t.clipboardData,n=i&&i.getData("text/plain");n?(Yt(e,n),t.preventDefault()):function(e){let t=e.dom.parentNode;if(!t)return;let i=t.appendChild(document.createElement("textarea"));i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus(),setTimeout((()=>{e.focus(),i.remove(),Yt(e,i.value)}),50)}(e)};let li=null;function ai(e){e.docView.compositionDeco.size&&e.update([])}Kt.copy=Kt.cut=(e,t)=>{let{text:i,ranges:r,linewise:s}=function(e){let t=[],i=[],n=!1;for(let n of e.selection.ranges)n.empty||(t.push(e.sliceDoc(n.from,n.to)),i.push(n));if(!t.length){let r=-1;for(let{from:n}of e.selection.ranges){let s=e.doc.lineAt(n);s.number>r&&(t.push(s.slice()),i.push({from:s.from,to:Math.min(e.doc.length,s.to+1)})),r=s.number}n=!0}return{text:t.join(e.lineBreak),ranges:i,linewise:n}}(e.state);if(!i)return;li=s?i:null;let o=Jt?null:t.clipboardData;o?(t.preventDefault(),o.clearData(),o.setData("text/plain",i)):function(e,t){let i=e.dom.parentNode;if(!i)return;let n=i.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.value=t,n.focus(),n.selectionEnd=t.length,n.selectionStart=0,setTimeout((()=>{n.remove(),e.focus()}),50)}(e,i),"cut"==t.type&&e.dispatch({changes:r,scrollIntoView:!0,annotations:n.Transaction.userEvent.of("cut")})},Kt.focus=Kt.blur=e=>{setTimeout((()=>{e.hasFocus!=e.inputState.notifiedFocused&&e.update([])}),10)},Kt.beforeprint=e=>{e.viewState.printing=!0,e.requestMeasure(),setTimeout((()=>{e.viewState.printing=!1,e.requestMeasure()}),2e3)},Kt.compositionstart=Kt.compositionupdate=e=>{e.inputState.composing||(e.docView.compositionDeco.size&&(e.observer.flush(),ai(e)),e.inputState.composing=!0)},Kt.compositionend=e=>{e.inputState.composing=!1,e.inputState.compositionEndedAt=Date.now(),setTimeout((()=>{e.inputState.composing||ai(e)}),50)};const hi={childList:!0,characterData:!0,subtree:!0,characterDataOldValue:!0},ci=A.ie&&A.ie_version<=11;class ui{constructor(e,t,i){this.view=e,this.onChange=t,this.onScrollChanged=i,this.active=!1,this.ignoreSelection=new B,this.delayedFlush=-1,this.queue=[],this.scrollTargets=[],this.intersection=null,this.intersecting=!1,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver((e=>{for(let t of e)this.queue.push(t);A.ie&&A.ie_version<=11&&e.some((e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length))?this.flushSoon():this.flush()})),ci&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=e=>{if(this.view.root.activeElement!=this.dom)return;let t=P(this.view.root),i=t.anchorNode&&this.view.docView.nearest(t.anchorNode);i&&i.ignoreEvent(e)||(A.ie&&A.ie_version<=11&&!this.view.state.selection.primary.empty&&t.focusNode&&E(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)?this.flushSoon():this.flush())},this.start(),this.onScroll=this.onScroll.bind(this),window.addEventListener("scroll",this.onScroll),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.onScrollChanged(document.createEvent("Event")))}),{}),this.intersection.observe(this.dom)),this.listenForScroll()}onScroll(e){this.intersecting&&(this.flush(),this.onScrollChanged(e))}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let i=this.dom;i;)if(1==i.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==i?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(i),i=i.parentNode;else{if(11!=i.nodeType)break;i=i.host}if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);for(let e of this.scrollTargets=t)e.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,hi),this.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange),ci&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),this.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange),ci&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clearSelection(){this.ignoreSelection.set(P(this.view.root))}clear(){this.observer.takeRecords(),this.queue.length=0,this.clearSelection()}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=window.setTimeout((()=>{this.delayedFlush=-1,this.flush()}),20))}forceFlush(){this.delayedFlush>=0&&(window.clearTimeout(this.delayedFlush),this.delayedFlush=-1,this.flush())}flush(){if(this.delayedFlush>=0)return;let e=this.queue;for(let t of this.observer.takeRecords())e.push(t);e.length&&(this.queue=[]);let t=P(this.view.root),i=!this.ignoreSelection.eq(t)&&M(this.dom,t);if(0==e.length&&!i)return;let n=-1,r=-1,s=!1;for(let t of e){let e=this.readMutation(t);e&&(e.typeOver&&(s=!0),-1==n?({from:n,to:r}=e):(n=Math.min(e.from,n),r=Math.max(e.to,r)))}let o=this.view.state;(n>-1||i)&&this.onChange(n,r,s),this.view.state==o&&(this.view.docView.dirty&&(this.ignore((()=>this.view.docView.sync())),this.view.docView.dirty=0),this.view.docView.updateSelection()),this.clearSelection()}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(),"childList"==e.type){let i=fi(t,e.previousSibling||e.target.previousSibling,-1),n=fi(t,e.nextSibling||e.target.nextSibling,1);return{from:i?t.posAfter(i):t.posAtStart,to:n?t.posBefore(n):t.posAtEnd,typeOver:!1}}return{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}}destroy(){this.stop(),this.intersection&&this.intersection.disconnect();for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);window.removeEventListener("scroll",this.onScroll),clearTimeout(this.parentCheck)}}function fi(e,t,i){for(;t;){let n=F.get(t);if(n&&n.parent==e)return n;let r=t.parentNode;t=r!=e.dom?r:i>0?t.nextSibling:t.previousSibling}return null}class di{constructor(e,t){this.points=e,this.lineSep=t,this.text=""}readRange(e,t){if(!e)return;let i=e.parentNode;for(let n=e;;){this.findPointBefore(i,n),this.readNode(n);let e=n.nextSibling;if(e==t)break;let r=F.get(n),s=F.get(e);((r?r.breakAfter:pi(n))||(s?s.breakAfter:pi(e))&&("BR"!=n.nodeName||n.cmIgnore))&&(this.text+=this.lineSep),n=e}this.findPointBefore(i,t)}readNode(e){if(e.cmIgnore)return;let t,i=F.get(e),n=i&&i.overrideDOMText;null!=n?t=n.sliceString(0,void 0,this.lineSep):3==e.nodeType?t=e.nodeValue:"BR"==e.nodeName?t=e.nextSibling?this.lineSep:"":1==e.nodeType&&this.readRange(e.firstChild,null),null!=t&&(this.findPointIn(e,t.length),this.text+=t)}findPointBefore(e,t){for(let i of this.points)i.node==e&&e.childNodes[i.offset]==t&&(i.pos=this.text.length)}findPointIn(e,t){for(let i of this.points)i.node==e&&(i.pos=this.text.length+Math.min(i.offset,t))}}function pi(e){return 1==e.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}class gi{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}function mi(e,t,i){let n={key:t,code:t,keyCode:i,which:i,cancelable:!0},r=new KeyboardEvent("keydown",n);e.contentDOM.dispatchEvent(r);let s=new KeyboardEvent("keyup",n);return e.contentDOM.dispatchEvent(s),r.defaultPrevented||s.defaultPrevented}class yi{constructor(e={}){this.plugins=[],this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.className=be("scroller"),this.scrollDOM.appendChild(this.contentDOM),this.dom=document.createElement("div"),this.dom.appendChild(this.scrollDOM),this._dispatch=e.dispatch||(e=>this.update([e])),this.dispatch=this.dispatch.bind(this),this.root=e.root||document,this.viewState=new Ct(e.state||n.EditorState.create()),this.plugins=this.state.facet(ft).map((e=>mt.create(e,this))),this.observer=new ui(this,((e,t,i)=>{!function(e,t,i,r){let s,o,l,a=e.state.selection.primary;if(t>-1&&(l=e.docView.domBoundsAround(t,i,0))){let{from:t,to:i}=l,r=e.docView.impreciseHead||e.docView.impreciseAnchor?[]:function(e,t){let i=[];if(t.activeElement!=e)return i;let{anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:o}=P(t);return n&&(i.push(new gi(n,r)),s==n&&o==r||i.push(new gi(s,o))),i}(e.contentDOM,e.root),h=new di(r,e.state.lineBreak);h.readRange(l.startDOM,l.endDOM),o=function(e,t){if(0==e.length)return null;let i=e[0].pos,r=2==e.length?e[1].pos:i;return i>-1&&r>-1?n.EditorSelection.single(i+t,r+t):null}(r,t);let c=a.from,u=null;8===e.inputState.lastKeyCode&&e.inputState.lastKeyTime>Date.now()-100&&(c=a.to,u="end");let f=function(e,t,i,n){let r=Math.min(e.length,t.length),s=0;for(;s<r&&e.charCodeAt(s)==t.charCodeAt(s);)s++;if(s==r&&e.length==t.length)return null;let o=e.length,l=t.length;for(;o>0&&l>0&&e.charCodeAt(o-1)==t.charCodeAt(l-1);)o--,l--;return"end"==n&&(i-=o+Math.max(0,s-Math.min(o,l))-s),o<s&&e.length<t.length?(s-=i<=s&&i>=o?s-i:0,l=s+(l-o),o=s):l<s&&(s-=i<=s&&i>=l?s-i:0,o=s+(o-l),l=s),{from:s,toA:o,toB:l}}(e.state.sliceDoc(t,i),h.text,c-t,u);f&&(s={from:t+f.from,to:t+f.toA,insert:e.state.toText(h.text.slice(f.from,f.toB))})}else if(e.hasFocus){let t=P(e.root),{impreciseHead:i,impreciseAnchor:r}=e.docView,s=i&&i.node==t.focusNode&&i.offset==t.focusOffset?e.state.selection.primary.head:e.docView.posFromDOM(t.focusNode,t.focusOffset),l=r&&r.node==t.anchorNode&&r.offset==t.anchorOffset?e.state.selection.primary.anchor:function(e){let t=e.isCollapsed;return t&&A.chrome&&e.rangeCount&&!e.getRangeAt(0).collapsed&&(t=!1),t}(t)?s:e.docView.posFromDOM(t.anchorNode,t.anchorOffset);s==a.head&&l==a.anchor||(o=n.EditorSelection.single(l,s))}if(s||o)if(!s&&r&&!a.empty&&o&&o.primary.empty&&(s={from:a.from,to:a.to,insert:e.state.doc.slice(a.from,a.to)}),s){let t=e.state;if(A.android&&(s.from==a.from&&s.to==a.to&&1==s.insert.length&&2==s.insert.lines&&mi(e,"Enter",10)||s.from==a.from-1&&s.to==a.to&&0==s.insert.length&&mi(e,"Backspace",8)||s.from==a.from&&s.to==a.to+1&&0==s.insert.length&&mi(e,"Delete",46)))return;let i,r=s.insert.toString();if(e.state.facet(ot).some((t=>t(e,s.from,s.to,r))))return;if(s.from>=a.from&&s.to<=a.to&&s.to-s.from>=(a.to-a.from)/3){let n=a.from<s.from?t.sliceDoc(a.from,s.from):"",r=a.to>s.to?t.sliceDoc(s.to,a.to):"";i=t.replaceSelection(e.state.toText(n+s.insert.sliceString(0,void 0,e.state.lineBreak)+r))}else{let e=t.changes(s);i={changes:e,selection:o&&!t.selection.primary.eq(o.primary)&&o.primary.to<=e.newLength?t.selection.replaceRange(o.primary):void 0}}e.dispatch(i,{scrollIntoView:!0,annotations:n.Transaction.userEvent.of("input")})}else if(o&&!o.primary.eq(a)){let t,i=!1;e.inputState.lastSelectionTime>Date.now()-50&&("keyboardselection"==e.inputState.lastSelectionOrigin?i=!0:t=n.Transaction.userEvent.of(e.inputState.lastSelectionOrigin)),e.dispatch({selection:o,scrollIntoView:i,annotations:t})}}(this,e,t,i)}),(e=>{this.inputState.runScrollHandlers(this,e),this.measure()})),this.docView=new Dt(this),this.inputState=new Ht(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,window.addEventListener("resize",(()=>{-1==bi&&(bi=setTimeout(xi,50))})),this.requestMeasure(),e.parent&&e.parent.appendChild(this.dom)}get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing}dispatch(...e){this._dispatch(1==e.length&&e[0]instanceof n.Transaction?e[0]:this.state.update(...e))}update(e){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t,i=!1;this.updateState=2;try{let n=this.state;for(let t of e){if(t.startState!=n)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");n=t.state}t=new kt(this,n,e);let r=e.some((e=>e.scrollIntoView))?n.selection.primary:null;this.viewState.update(t,r),this.bidiCache=Si.update(this.bidiCache,t.changes),t.empty||this.updatePlugins(t),i=this.docView.update(t),this.state.facet(bt)!=this.styleModules&&this.mountStyles(),this.updateAttrs()}finally{this.updateState=0}(i||scrollTo||this.viewState.mustEnforceCursorAssoc)&&this.requestMeasure();for(let e of this.state.facet(st))e(t)}setState(e){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");this.updateState=2;try{for(let e of this.plugins)e.destroy(this);this.viewState=new Ct(e),this.plugins=e.facet(ft).map((e=>mt.create(e,this))),this.docView=new Dt(this),this.inputState.ensureHandlers(this),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}this.requestMeasure()}updatePlugins(e){let t=e.prevState.facet(ft),i=e.state.facet(ft);if(t!=i){let n=[],r=[];for(let s of i){let i=t.indexOf(s);if(i<0)n.push(mt.create(s,this));else{let t=this.plugins[i].update(e);r.push(t),n.push(t)}}for(let e of this.plugins)r.indexOf(e)<0&&e.destroy(this);this.plugins=n,this.inputState.ensureHandlers(this)}else for(let t=0;t<this.plugins.length;t++)this.plugins[t]=this.plugins[t].update(e)}measure(){this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled),this.measureScheduled=-1;let e=null;try{for(let t=0;;t++){this.updateState=1;let i=this.viewState.measure(this.docView,t>0),n=this.measureRequests;if(!i&&!n.length&&null==this.viewState.scrollTo)break;if(this.measureRequests=[],t>5){console.warn("Viewport failed to stabilize");break}let r=n.map((e=>{try{return e.read(this)}catch(e){return lt(this.state,e),ki}})),s=new kt(this,this.state);s.flags|=i,e?e.flags|=i:e=s,this.updateState=2,this.updatePlugins(s),this.updateAttrs(),i&&this.docView.update(s);for(let e=0;e<n.length;e++)if(r[e]!=ki)try{n[e].write(r[e],this)}catch(e){lt(this.state,e)}if(this.viewState.scrollTo&&(this.docView.scrollPosIntoView(this.viewState.scrollTo.head,this.viewState.scrollTo.assoc),this.viewState.scrollTo=null),!(4&i)&&0==this.measureRequests.length)break}}finally{this.updateState=0}if(this.measureScheduled=-1,e)for(let t of this.state.facet(st))t(e)}get themeClasses(){return ye+" "+(this.state.facet(me)?"cm-dark":"cm-light")+" "+this.state.facet(ge)}updateAttrs(){let e=re(this.state.facet(yt),{class:be("wrap")+(this.hasFocus?" cm-focused ":" ")+this.themeClasses});oe(this.dom,this.editorAttrs,e),this.editorAttrs=e;let t=re(this.state.facet(vt),{spellcheck:"false",contenteditable:String(this.state.facet(at)),class:be("content"),style:`${A.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"});oe(this.contentDOM,this.contentAttrs,t),this.contentAttrs=t}mountStyles(){this.styleModules=this.state.facet(bt),r.V.mount(this.root,this.styleModules.concat(xe).reverse())}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure()}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=requestAnimationFrame((()=>this.measure()))),e){if(null!=e.key)for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key)return void(this.measureRequests[t]=e);this.measureRequests.push(e)}}pluginField(e){let t=[];for(let i of this.plugins)i.takeField(e,t);return t}plugin(e){for(let t of this.plugins)if(t.spec==e)return t.value;return null}blockAtHeight(e,t){return this.readMeasured(),this.viewState.blockAtHeight(e,wi(t,this.contentDOM))}visualLineAtHeight(e,t){return this.readMeasured(),this.viewState.lineAtHeight(e,wi(t,this.contentDOM))}visualLineAt(e,t=0){return this.viewState.lineAt(e,t)}viewportLines(e,t){let{from:i,to:n}=this.viewport;this.viewState.forEachLine(i,n,e,wi(t,this.contentDOM))}get contentHeight(){return this.viewState.heightMap.height+this.viewState.paddingTop+this.viewState.paddingBottom}moveByChar(e,t,i){return Gt(this,e,t,i)}moveByGroup(e,t){return Gt(this,e,t,(t=>function(e,t,i){let r=e.state.charCategorizer(t),s=r(i);return e=>{let t=r(e);return s==n.CharCategory.Space&&(s=t),s==t}}(this,e.head,t)))}moveToLineBoundary(e,t,i=!0){return function(e,t,i,r){let s=e.state.doc.lineAt(t.head),o=r&&e.lineWrapping?e.coordsAtPos(t.assoc<0&&t.head>s.from?t.head-1:t.head):null;if(o){let t=e.dom.getBoundingClientRect(),r=e.posAtCoords({x:i==(e.textDirection==Me.LTR)?t.right-1:t.left+1,y:(o.top+o.bottom)/2});if(null!=r)return n.EditorSelection.cursor(r,i?-1:1)}let l=Se.find(e.docView,t.head),a=l?i?l.posAtEnd:l.posAtStart:i?s.to:s.from;return n.EditorSelection.cursor(a,i?-1:1)}(this,e,t,i)}moveVertically(e,t,i){return function(e,t,i,r){var s;let l=t.head,a=i?1:-1;if(l==(i?e.state.doc.length:0))return n.EditorSelection.cursor(l);let h=e.coordsAtPos(l);if(h){let i=e.dom.getBoundingClientRect(),o=null!==(s=t.goalColumn)&&void 0!==s?s:h.left-i.left,c=i.left+o,u=null!=r?r:5;for(let t=a<0?h.top:h.bottom,i=0;i<50;i+=10){let r=qt(e,{x:c,y:t+(u+i)*a},a);if(null==r)break;if(r!=l)return n.EditorSelection.cursor(r,void 0,void 0,o)}}let{doc:c}=e.state,u=c.lineAt(l),f=e.state.tabSize,d=t.goalColumn,p=0;if(null==d){for(const e=c.iterRange(u.from,l);!e.next().done;)p=(0,o.IS)(e.value,p,f);d=p*e.defaultCharacterWidth}else p=Math.round(d/e.defaultCharacterWidth);if(a<0&&0==u.from)return n.EditorSelection.cursor(0);if(a>0&&u.to==c.length)return n.EditorSelection.cursor(u.to);let g=c.line(u.number+a),m=g.from,y=0;for(const e=c.iterRange(g.from,g.to);y>=p&&!e.next().done;){const{offset:t,leftOver:i}=(0,o.Gz)(e.value,y,p,f);y=p-i,m+=t}return n.EditorSelection.cursor(m,void 0,void 0,d)}(this,e,t,i)}scrollPosIntoView(e){this.viewState.scrollTo=n.EditorSelection.cursor(e),this.requestMeasure()}posAtCoords(e){return this.readMeasured(),qt(this,e)}coordsAtPos(e,t=1){this.readMeasured();let i=this.docView.coordsAt(e,t);if(!i||i.left==i.right)return i;let n=this.state.doc.lineAt(e),r=this.bidiSpans(n);return R(i,r[Ne.find(r,e-n.from,-1,t)].dir==Me.LTR==t>0)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.heightOracle.direction}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>vi)return je(e.length);let t=this.textDirection;for(let i of this.bidiCache)if(i.from==e.from&&i.dir==t)return i.order;let i=$e(e.slice(),this.textDirection);return this.bidiCache.push(new Si(e.from,e.to,t,i)),i}get hasFocus(){return document.hasFocus()&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore((()=>{V(this.contentDOM),this.docView.updateSelection()}))}destroy(){for(let e of this.plugins)e.destroy(this);this.inputState.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&cancelAnimationFrame(this.measureScheduled)}static domEventHandlers(e){return dt.define((()=>({})),{eventHandlers:e})}static theme(e,t){let i=r.V.newName(),n=[ge.of(i),bt.of(we(`.${ye}.${i}`,e))];return t&&t.dark&&n.push(me.of(!0)),n}static baseTheme(e){return(0,n.precedence)(bt.of(we("."+ye,e)),"fallback")}}yi.styleModule=bt,yi.inputHandler=ot,yi.exceptionSink=rt,yi.updateListener=st,yi.editable=at,yi.dragMovesSelection=it,yi.clickAddsSelectionRange=tt,yi.mouseSelectionStyle=nt,yi.decorations=wt,yi.lineWrapping=yi.theme({$content:{whiteSpace:"pre-wrap"}}),yi.contentAttributes=vt,yi.editorAttributes=yt;const vi=4096;function wi(e,t){return null==e?t.getBoundingClientRect().top:e}let bi=-1;function xi(){bi=-1;let e=document.querySelectorAll(".cm-content");for(let t=0;t<e.length;t++){let i=F.get(e[t]);i&&i.editorView.requestMeasure()}}const ki={};class Si{constructor(e,t,i,n){this.from=e,this.to=t,this.dir=i,this.order=n}static update(e,t){if(t.empty)return e;let i=[],n=e.length?e[e.length-1].dir:Me.LTR;for(let r=Math.max(0,e.length-10);r<e.length;r++){let s=e[r];s.dir!=n||t.touchesRange(s.from,s.to)||i.push(new Si(t.mapPos(s.from,1),t.mapPos(s.to,-1),s.dir,s.order))}return i}}const Oi="undefined"==typeof navigator?"key":/Mac/.test(navigator.platform)?"mac":/Win/.test(navigator.platform)?"win":/Linux|X11/.test(navigator.platform)?"linux":"key";function Ci(e,t,i){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==i&&t.shiftKey&&(e="Shift-"+e),e}const Ai=n.Facet.define(),Pi=yi.domEventHandlers({keydown:(e,t)=>Ii(t.state.facet(Ai),e,t,"editor")});function Mi(e,t){return[Pi,Ai.of(Di(e,t))]}function Ti(e,t,i){return Ii(e.state.facet(Ai),t,e,i)}let Ei=null;function Di(e,t=Oi){let i=Object.create(null),n=Object.create(null),r=(e,t)=>{let i=n[e];if(null==i)n[e]=t;else if(i!=t)throw new Error("Key binding "+e+" is used both as a regular binding and as a multi-stroke prefix")},s=(e,n,s,o)=>{let l=i[e]||(i[e]=Object.create(null)),a=n.split(/ (?!$)/).map((e=>function(e,t){const i=e.split(/-(?!$)/);let n,r,s,o,l=i[i.length-1];"Space"==l&&(l=" ");for(let e=0;e<i.length-1;++e){const l=i[e];if(/^(cmd|meta|m)$/i.test(l))o=!0;else if(/^a(lt)?$/i.test(l))n=!0;else if(/^(c|ctrl|control)$/i.test(l))r=!0;else if(/^s(hift)?$/i.test(l))s=!0;else{if(!/^mod$/i.test(l))throw new Error("Unrecognized modifier name: "+l);"mac"==t?o=!0:r=!0}}return n&&(l="Alt-"+l),r&&(l="Ctrl-"+l),o&&(l="Meta-"+l),s&&(l="Shift-"+l),l}(e,t)));for(let t=1;t<a.length;t++){let i=a.slice(0,t).join(" ");r(i,!0),l[i]||(l[i]={preventDefault:!0,commands:[t=>{let n=Ei={view:t,prefix:i,scope:e};return setTimeout((()=>{Ei==n&&(Ei=null)}),4e3),!0}]})}let h=a.join(" ");r(h,!1);let c=l[h]||(l[h]={preventDefault:!1,commands:[]});c.commands.push(s),o&&(c.preventDefault=!0)};for(let i of e){let e=i[t]||i.key;if(e)for(let t of i.scope?i.scope.split(" "):["editor"])s(t,e,i.run,i.preventDefault),i.shift&&s(t,"Shift-"+e,i.shift,i.preventDefault)}return i}function Ii(e,t,i,n){let r=function(e){var t=!(p&&(e.ctrlKey||e.altKey||e.metaKey)||(c||d)&&e.shiftKey&&e.key&&1==e.key.length)&&e.key||(e.shiftKey?a:l)[e.keyCode]||e.key||"Unidentified";return"Esc"==t&&(t="Escape"),"Del"==t&&(t="Delete"),"Left"==t&&(t="ArrowLeft"),"Up"==t&&(t="ArrowUp"),"Right"==t&&(t="ArrowRight"),"Down"==t&&(t="ArrowDown"),t}(t),s=1==r.length&&" "!=r,o="";Ei&&Ei.view==i&&Ei.scope==n&&(o=Ei.prefix+" ",Ei=null);let h=!!o,u=e=>{if(e){for(let t of e.commands)if(t(i))return!0;e.preventDefault&&(h=!0)}return!1};for(let i of e){let e,a=i[n];if(a){if(u(a[o+Ci(r,t,!s)]))return!0;if(s&&(t.shiftKey||t.altKey||t.metaKey)&&(e=l[t.keyCode])&&e!=r){if(u(a[o+Ci(e,t,!0)]))return!0}else if(s&&t.shiftKey&&u(a[o+Ci(r,t,!0)]))return!0}}return h}const Li=!A.ios,Ri=n.Facet.define({combine:e=>(0,n.combineConfig)(e,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})});function Ni(e={}){return[Ri.of(e),$i,Vi]}class Bi{constructor(e,t,i,n,r){this.left=e,this.top=t,this.width=i,this.height=n,this.className=r}draw(){let e=document.createElement("div");return e.className=this.className,e.style.left=this.left+"px",e.style.top=this.top+"px",this.width>=0&&(e.style.width=this.width+"px"),e.style.height=this.height+"px",e}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}}const $i=dt.fromClass(class{constructor(e){this.view=e,this.rangePieces=[],this.cursors=[],this.measureReq={read:this.readPos.bind(this),write:this.drawSel.bind(this)},this.selectionLayer=e.scrollDOM.appendChild(document.createElement("div")),this.selectionLayer.className=be("selectionLayer"),this.selectionLayer.setAttribute("aria-hidden","true"),this.cursorLayer=e.scrollDOM.appendChild(document.createElement("div")),this.cursorLayer.className=be("cursorLayer"),this.cursorLayer.setAttribute("aria-hidden","true"),e.requestMeasure(this.measureReq),this.setBlinkRate()}setBlinkRate(){this.cursorLayer.style.animationDuration=this.view.state.facet(Ri).cursorBlinkRate+"ms"}update(e){let t=e.prevState.facet(Ri)!=e.state.facet(Ri);(t||e.selectionSet||e.geometryChanged||e.viewportChanged)&&this.view.requestMeasure(this.measureReq),e.transactions.some((e=>e.scrollIntoView))&&(this.cursorLayer.style.animationName="cm-blink"==this.cursorLayer.style.animationName?"cm-blink2":"cm-blink"),t&&this.setBlinkRate()}readPos(){let{state:e}=this.view,t=e.facet(Ri),i=e.selection.ranges.map((e=>e.empty?[]:function(e,t){if(t.to<=e.viewport.from||t.from>=e.viewport.to)return[];let i=Math.max(t.from,e.viewport.from),r=Math.min(t.to,e.viewport.to),s=e.textDirection==Me.LTR,o=e.contentDOM,l=o.getBoundingClientRect(),a=Qi(e),h=window.getComputedStyle(o.firstChild),c=l.left+parseInt(h.paddingLeft),u=l.right-parseInt(h.paddingRight),f=e.visualLineAt(i),d=e.visualLineAt(r);if(e.lineWrapping&&(f=_i(e,i,f),d=_i(e,r,d)),f.from==d.from)return g(m(t.from,t.to));{let e=m(t.from,null),i=m(null,t.to),n=[];return f.to<d.from-1?n.push(p(c,e.bottom,u,i.top)):e.bottom<i.top&&i.top-e.bottom<4&&(e.bottom=i.top=(e.bottom+i.top)/2),g(e).concat(n).concat(g(i))}function p(e,t,i,n){return new Bi(e-a.left,t-a.top,i-e,n-t,zi)}function g({top:e,bottom:t,horizontal:i}){let n=[];for(let r=0;r<i.length;r+=2)n.push(p(i[r],e,i[r+1],t));return n}function m(t,i){let r=1e9,o=-1e9,l=[];function a(t,i,n,a,h){let f=e.coordsAtPos(t,1),d=e.coordsAtPos(n,-1);r=Math.min(f.top,d.top,r),o=Math.max(f.bottom,d.bottom,o),h==Me.LTR?l.push(s&&i?c:f.left,s&&a?u:d.right):l.push(!s&&a?c:d.left,!s&&i?u:f.right)}let h=null!=t?t:e.moveToLineBoundary(n.EditorSelection.cursor(i,1),!1).head,f=null!=i?i:e.moveToLineBoundary(n.EditorSelection.cursor(t,-1),!0).head;for(let n of e.visibleRanges)if(n.to>h&&n.from<f)for(let r=Math.max(n.from,h),s=Math.min(n.to,f);;){let n=e.state.doc.lineAt(r);for(let o of e.bidiSpans(n)){let e=o.from+n.from,l=o.to+n.from;if(e>=s)break;l>r&&a(Math.max(e,r),null==t&&e<=h,Math.min(l,s),null==i&&l>=f,o.dir)}if(r=n.to+1,r>=s)break}if(0==l.length){let t=e.coordsAtPos(h,-1);r=Math.min(t.top,r),o=Math.max(t.bottom,o)}return{top:r,bottom:o,horizontal:l}}}(this.view,e))).reduce(((e,t)=>e.concat(t))),r=[];for(let i of e.selection.ranges){let n=i==e.selection.primary;if(i.empty?!n||Li:t.drawRangeCursor){let e=qi(this.view,i,n);e&&r.push(e)}}return{rangePieces:i,cursors:r}}drawSel({rangePieces:e,cursors:t}){if(e.length!=this.rangePieces.length||e.some(((e,t)=>!e.eq(this.rangePieces[t])))){this.selectionLayer.textContent="";for(let t of e)this.selectionLayer.appendChild(t.draw());this.rangePieces=e}if(t.length!=this.cursors.length||t.some(((e,t)=>!e.eq(this.cursors[t])))){this.cursorLayer.textContent="";for(let e of t)this.cursorLayer.appendChild(e.draw());this.cursors=t}}destroy(){this.selectionLayer.remove(),this.cursorLayer.remove()}}),ji={$line:{"& ::selection":{backgroundColor:"transparent !important"},"&::selection":{backgroundColor:"transparent !important"}}};Li&&(ji.$line.caretColor="transparent !important");const Vi=(0,n.precedence)(yi.theme(ji),"override"),zi=be("selectionBackground");function Qi(e){let t=e.scrollDOM.getBoundingClientRect();return{left:t.left-e.scrollDOM.scrollLeft,top:t.top-e.scrollDOM.scrollTop}}function _i(e,t,i){let r=n.EditorSelection.cursor(t);return{from:Math.max(i.from,e.moveToLineBoundary(r,!1,!0).from),to:Math.min(i.to,e.moveToLineBoundary(r,!0,!0).from)}}const Fi=be("cursor.primary"),Ui=be("cursor.secondary");function qi(e,t,i){let n=e.coordsAtPos(t.head,t.assoc||1);if(!n)return null;let r=Qi(e);return new Bi(n.left-r.left,n.top-r.top,-1,n.bottom-n.top,i?Fi:Ui)}const Gi=/[\u0000-\u0008\u000a-\u001f\u007f-\u009f\u00ad\u061c\u200b-\u200c\u200e\u200f\u2028\u2029\ufeff\ufff9-\ufffc]/gu,Hi={0:"null",7:"bell",8:"backspace",10:"newline",11:"vertical tab",13:"carriage return",27:"escape",8203:"zero width space",8204:"zero width non-joiner",8205:"zero width joiner",8206:"left-to-right mark",8207:"right-to-left mark",8232:"line separator",8233:"paragraph separator",65279:"zero width no-break space",65532:"object replacement"};let Wi=null;function Xi(){if(null==Wi&&"undefined"!=typeof document&&document.body){let e=document.body.style;Wi=null!=(e.tabSize||e.MozTabSize)}return Wi||!1}const Ki=null!=/x/.unicode?"gu":"g",Ji=n.Facet.define({combine(e){let t=(0,n.combineConfig)(e,{render:null,specialChars:Gi,addSpecialChars:null});return(t.replaceTabs=!Xi())&&(t.specialChars=new RegExp("\t|"+t.specialChars.source,Ki)),t.addSpecialChars&&(t.specialChars=new RegExp(t.specialChars.source+"|"+t.addSpecialChars.source,Ki)),t}});function Yi(e={}){let t=[Ji.of(e),Zi];return Xi()||t.push(rn),t}const Zi=dt.fromClass(class{constructor(e){this.view=e,this.decorations=he.none,this.decorationCache=Object.create(null),this.recompute()}update(e){let t=e.prevState.facet(Ji)!=e.state.facet(Ji);t&&(this.decorationCache=Object.create(null)),(t||e.changes.length||e.viewportChanged)&&this.recompute()}recompute(){let e=[];for(let{from:t,to:i}of this.view.visibleRanges)this.getDecorationsFor(t,i,e);this.decorations=he.set(e)}getDecorationsFor(e,t,i){let n=this.view.state.facet(Ji),{doc:r}=this.view.state;for(let s,l=e,a=r.iterRange(e,t);!a.next().done;){if(!a.lineBreak)for(;s=n.specialChars.exec(a.value);){let e,t=(0,o.gm)(s[0],0);if(null!=t){if(9==t){let t=r.lineAt(l+s.index),i=this.view.state.tabSize,n=(0,o.IS)(r.sliceString(t.from,l+s.index),0,i);e=he.replace({widget:new tn((i-n%i)*this.view.defaultCharacterWidth)})}else e=this.decorationCache[t]||(this.decorationCache[t]=he.replace({widget:new en(n,t)}));i.push(e.range(l+s.index,l+s.index+s[0].length))}}l+=a.value.length}}},{decorations:e=>e.decorations});class en extends le{constructor(e,t){super(),this.options=e,this.code=t}eq(e){return e.code==this.code}toDOM(){let e=function(e){return e>=32?null:10==e?"":String.fromCharCode(9216+e)}(this.code)||"",t="Control character "+(Hi[this.code]||this.code),i=this.options.render&&this.options.render(this.code,t,e);if(i)return i;let n=document.createElement("span");return n.textContent=e,n.title=t,n.setAttribute("aria-label",t),n.style.color="red",n}ignoreEvent(){return!1}}class tn extends le{constructor(e){super(),this.width=e}eq(e){return e.width==this.width}toDOM(){let e=document.createElement("span");return e.textContent="\t",e.className=nn,e.style.width=this.width+"px",e}ignoreEvent(){return!1}}const nn=r.V.newName(),rn=yi.styleModule.of(new r.V({["."+nn]:{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"}}));class sn extends le{constructor(e){super(),this.content=e}toDOM(){let e=document.createElement("span");return e.className=be("placeholder"),e.style.pointerEvents="none",e.appendChild("string"==typeof this.content?document.createTextNode(this.content):this.content),"string"==typeof this.content?e.setAttribute("aria-label","placeholder "+this.content):e.setAttribute("aria-hidden","true"),e}ignoreEvent(){return!1}}function on(e){return dt.fromClass(class{constructor(t){this.view=t,this.placeholder=he.set([he.widget({widget:new sn(e),side:1}).range(0)])}get decorations(){return this.view.state.doc.length?he.none:this.placeholder}},{decorations:e=>e.decorations})}const ln={HeightMap:Ge,HeightOracle:_e,MeasuredHeights:Fe,QueryType:qe,ChangedRange:xt,computeOrder:$e,moveVisually:ze}},148:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.mapping=t.map=t.match=t.tuple=t.injection=t.projection=t.dereference=t.constant=t.identifier=t.isVariant=t.Variant=t.unit=t.isRecord=t.Record=t.isLiteralValue=t.isNamedNode=t.isPointer=t.Pointer=t.instance=t.isCoproduct=t.coproduct=t.isProduct=t.product=t.isLiteral=t.literal=t.isUri=t.uri=t.isReference=t.reference=t.schema=void 0,function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=r();if(t&&t.has(e))return t.get(e);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){var o=n?Object.getOwnPropertyDescriptor(e,s):null;o&&(o.get||o.set)?Object.defineProperty(i,s,o):i[s]=e[s]}i.default=e,t&&t.set(e,i)}(i(704));var n=i(240);function r(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return r=function(){return e},e}t.schema=e=>Object.freeze(e),t.reference=e=>Object.freeze({type:"reference",value:e}),t.isReference=e=>"reference"===e.type,t.uri=()=>Object.freeze({type:"uri"}),t.isUri=e=>"uri"===e.type,t.literal=e=>Object.freeze({type:"literal",datatype:e}),t.isLiteral=e=>"literal"===e.type,t.product=e=>Object.freeze({type:"product",components:Object.freeze(e)}),t.isProduct=e=>"product"===e.type,t.coproduct=e=>Object.freeze({type:"coproduct",options:Object.freeze(e)}),t.isCoproduct=e=>"coproduct"===e.type,t.instance=(e,t)=>{for(const[{},e]of(0,n.forEntries)(t))Object.freeze(e);return Object.freeze(t)},t.Pointer=class{constructor(e){this.index=e,Object.freeze(this)}get termType(){return"Pointer"}},t.isPointer=e=>"Pointer"===e.termType,t.isNamedNode=e=>"NamedNode"===e.termType,t.isLiteralValue=e=>"Literal"===e.termType;class s extends Array{get termType(){return"Record"}constructor(e,t){super(...t),this.components=e,Object.freeze(this)}get(e){const t=this.components.indexOf(e);if(t in this)return this[t];throw new Error(`Index out of range: ${t}`)}map(e){const t=new Array(this.length);for(const[i,n]of this.entries())t[i]=e(n,i,this);return t}}t.Record=s,t.isRecord=e=>"Record"===e.termType;const o=[],l=[];t.unit=()=>new s(o,l),t.Variant=class{constructor(e,t,i){if(this.options=e,this.key=t,this.value=i,this.index=e.indexOf(t),!(this.index in e))throw new Error("Varint index out of range");Object.freeze(this)}get termType(){return"Variant"}is(e){return e===this.key}},t.isVariant=e=>"Variant"===e.termType,t.identifier=e=>Object.freeze({type:"identifier",value:e}),t.constant=(e,t)=>Object.freeze({type:"constant",value:e,datatype:t}),t.dereference=e=>Object.freeze({type:"dereference",key:e}),t.projection=e=>Object.freeze({type:"projection",key:e}),t.injection=e=>Object.freeze({type:"injection",key:e}),t.tuple=e=>Object.freeze({type:"tuple",slots:Object.freeze(e)}),t.match=e=>Object.freeze({type:"match",cases:Object.freeze(e)}),t.map=(e,t)=>Object.freeze({type:"map",source:e,value:t}),t.mapping=e=>Object.freeze(e)},893:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0});var n={APG:!0,ns:!0};t.ns=t.APG=void 0;var r=f(i(148));t.APG=r;var s=f(i(594));t.ns=s;var o=i(731);Object.keys(o).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===o[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}}))}));var l=i(403);Object.keys(l).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===l[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}}))}));var a=i(334);Object.keys(a).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===a[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}}))}));var h=i(805);Object.keys(h).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===h[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return h[e]}}))}));var c=i(240);function u(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return u=function(){return e},e}function f(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=u();if(t&&t.has(e))return t.get(e);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var s=n?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,t&&t.set(e,i),i}Object.keys(c).forEach((function(e){"default"!==e&&"__esModule"!==e&&(Object.prototype.hasOwnProperty.call(n,e)||e in t&&t[e]===c[e]||Object.defineProperty(t,e,{enumerable:!0,get:function(){return c[e]}}))}))},731:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateMapping=function(e,t,i){for(const[n,r]of(0,a.forEntries)(t)){if(!(n in e))return!1;const{source:s,value:o}=e[n];if(!(0,l.validateExpressions)(t,o,i[s],u(e,t,i,r)))return!1}return!0},t.fold=u,t.map=d,t.delta=function(e,t,i,n){const r=(0,a.mapKeys)(t,(()=>[])),s=(0,a.mapKeys)(t,(()=>new Map));for(const[o,l]of(0,a.forEntries)(t)){if(!(o in e)||!(o in s))throw new Error("Invalid mapping");const{source:a}=e[o];if(!(a in n))throw new Error("Invalid instance");for(const h of n[a])if(!s[o].has(h)){const a=f(e[o].value,h,n,i),c=r[o].push(p)-1;s[o].set(h,c),r[o][c]=g({M:e,S:t,T:i,SI:r,TI:n,indices:s},l,a)}}for(const e of(0,a.getKeys)(t))Object.freeze(r[e]);return Object.freeze(r),r},t.mapExpressions=void 0;var n,r=c(i(704)),s=(n=i(265))&&n.__esModule?n:{default:n},o=c(i(148)),l=i(403),a=i(240);function h(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return h=function(){return e},e}function c(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=h();if(t&&t.has(e))return t.get(e);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var s=n?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,t&&t.set(e,i),i}function u(e,t,i,n){if("reference"===n.type){const{source:t}=e[n.value],r=i[t];if(void 0===r)throw new Error("Invalid reference index");return r}return"uri"===n.type||"literal"===n.type?n:"product"===n.type?o.product((0,a.mapKeys)(n.components,(n=>u(e,t,i,n)))):"coproduct"===n.type?o.coproduct((0,a.mapKeys)(n.options,(n=>u(e,t,i,n)))):void(0,a.signalInvalidType)(n)}const f=(e,t,i,n)=>e.reduce(((e,t)=>d(t,e,i,n)),t);function d(e,t,i,n){if("identifier"===e.type)return new r.NamedNode(e.value);if("constant"===e.type)return new r.Literal(e.value,"",new r.NamedNode(e.datatype));if("dereference"===e.type){if("Pointer"===t.termType){const{key:n}=e;if(n in i&&t.index in i[n])return i[n][t.index];throw new Error("Invalid pointer dereference")}throw new Error("Invalid pointer dereference")}if("projection"===e.type){if("Record"===t.termType)return t.get(e.key);throw new Error("Invalid projection")}if("match"===e.type){if("Variant"===t.termType){if(t.key in e.cases){const r=e.cases[t.key];return f(r,t.value,i,n)}throw new Error("Invalid case analysis")}throw new Error("Invalid match morphism")}if("tuple"===e.type){const r=(0,a.getKeys)(e.slots);return new o.Record(r,r.map((r=>f(e.slots[r],t,i,n))))}if("injection"===e.type)return new o.Variant(Object.freeze([e.key]),e.key,t);(0,a.signalInvalidType)(e)}t.mapExpressions=f;const p=new r.NamedNode(a.rootId);function g(e,t,i){if("reference"===t.type){const n=e.indices[t.value].get(i);if(void 0!==n)return new o.Pointer(n);{const n=e.S[t.value],r=e.M[t.value],s=f(r.value,i,e.TI,e.T),l=e.SI[t.value].push(p)-1;e.indices[t.value].set(i,l);const a=g(e,n,s);return e.SI[t.value][l]=a,new o.Pointer(l)}}if("uri"===t.type){if("NamedNode"!==i.termType)throw new Error("Invalid image value: expected iri");return i}if("literal"===t.type){if("Literal"!==i.termType)throw new Error("Invalid image value: expected literal");return i}if("product"===t.type){if("Record"!==i.termType)throw new Error("Invalid image value: expected record");return new o.Record(i.components,function*(e,t,i){for(const[n,r,o]of(0,s.default)((0,a.getKeys)(t.components),i.components,i)){if(n!==r)throw new Error("Invalid image record");yield g(e,t.components[n],o)}}(e,t,i))}if("coproduct"===t.type){if("Variant"!==i.termType)throw new Error("Invalid image value: expected variant");if(i.key in t.options)return new o.Variant(i.options,i.key,g(e,t.options[i.key],i.value));throw new Error("Invalid image variant")}(0,a.signalInvalidType)(t)}},403:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.apply=a,t.validateExpressions=function(e,t,i,n){let s;try{s=l(e,t,i)}catch(e){return!1}return(0,r.isTypeAssignable)(s,n)},t.applyExpressions=void 0;var n=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=o();if(t&&t.has(e))return t.get(e);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var s=n?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,t&&t.set(e,i),i}(i(148)),r=i(334),s=i(240);function o(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return o=function(){return e},e}const l=(e,t,i)=>t.reduce(((t,i)=>a(e,i,t)),i);function a(e,t,i){if("identifier"===t.type)return n.uri();if("constant"===t.type)return n.literal(t.datatype);if("dereference"===t.type){if("reference"===i.type&&i.value in e&&i.value===t.key)return e[i.value];throw new Error("Invalid dereference morphism")}if("projection"===t.type){if("product"===i.type&&t.key in i.components)return i.components[t.key];throw new Error("Invalid projection morphism")}if("injection"===t.type){const{key:e}=t;return n.coproduct({[e]:i})}if("tuple"===t.type)return n.product((0,s.mapKeys)(t.slots,(t=>l(e,t,i))));if("match"===t.type){if("coproduct"===i.type){const n=Array.from(function*(e,t,{cases:i}){for(const n of(0,s.getKeys)(t.options)){if(!(n in i))throw new Error("Invalid case analysis");yield l(e,i[n],t.options[n])}}(e,i,t));if(0===n.length)throw new Error("Empty case analysis");return n.reduce(r.unify)}throw new Error("Invalid match morphism")}(0,s.signalInvalidType)(t)}t.applyExpressions=l},594:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.map=t.path=t.CASE=t.match=t.slot=t.tuple=t.injection=t.projection=t.dereference=t.constant=t.identifier=t.identity=t.expression=t.tail=t.head=t.some=t.none=t.target=t.source=t.value=t.key=t.option=t.component=t.coproduct=t.product=t.datatype=t.literal=t.uri=t.reference=t.label=void 0,t.map="http://underlay.org/ns/map",t.path="http://underlay.org/ns/path",t.CASE="http://underlay.org/ns/case",t.match="http://underlay.org/ns/match",t.slot="http://underlay.org/ns/slot",t.tuple="http://underlay.org/ns/tuple",t.injection="http://underlay.org/ns/injection",t.projection="http://underlay.org/ns/injection",t.dereference="http://underlay.org/ns/dereference",t.constant="http://underlay.org/ns/constant",t.identifier="http://underlay.org/ns/identifier",t.identity="http://underlay.org/ns/identity",t.expression="http://underlay.org/ns/expression",t.tail="http://underlay.org/ns/tail",t.head="http://underlay.org/ns/head",t.some="http://underlay.org/ns/some",t.none="http://underlay.org/ns/none",t.target="http://underlay.org/ns/target",t.source="http://underlay.org/ns/source",t.value="http://underlay.org/ns/value",t.key="http://underlay.org/ns/key",t.option="http://underlay.org/ns/option",t.component="http://underlay.org/ns/component",t.coproduct="http://underlay.org/ns/coproduct",t.product="http://underlay.org/ns/product",t.datatype="http://underlay.org/ns/datatype",t.literal="http://underlay.org/ns/literal",t.uri="http://underlay.org/ns/uri",t.reference="http://underlay.org/ns/reference",t.label="http://underlay.org/ns/label"},334:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.forType=function*e(t,i=[]){if(i.includes(t))throw new Error("Recursive type");if(yield[t,i],"product"===t.type){i.push(t);for(const n of(0,o.getKeys)(t.components))yield*e(t.components[n],i);i.pop()}else if("coproduct"===t.type){i.push(t);for(const n of(0,o.getKeys)(t.options))yield*e(t.options[n],i);i.pop()}},t.isTypeEqual=function e(t,i){if(t===i)return!0;if(t.type!==i.type)return!1;if("reference"===t.type&&"reference"===i.type)return t.value===i.value;if("uri"===t.type&&"uri"===i.type)return!0;if("literal"===t.type&&"literal"===i.type)return t.datatype===i.datatype;if("product"===t.type&&"product"===i.type){const n=(0,o.getKeys)(t.components),s=(0,o.getKeys)(i.components);if(n.length!==s.length)return!1;for(const[i,o]of(0,r.default)(n,s)){if(i!==o)return!1;if(!e(t.components[i],t.components[o]))return!1}return!0}if("coproduct"===t.type&&"coproduct"===i.type){const n=(0,o.getKeys)(t.options),s=(0,o.getKeys)(i.options);if(n.length!==s.length)return!1;for(const[o,l]of(0,r.default)(n,s)){if(o!==l)return!1;if(!e(t.options[o],i.options[l]))return!1}return!0}return!1},t.isTypeAssignable=function e(t,i){if(t===i)return!0;if(t.type!==i.type)return!1;if("reference"===t.type&&"reference"===i.type)return t.value===i.value;if("uri"===t.type&&"uri"===i.type)return!0;if("literal"===t.type&&"literal"===i.type)return t.datatype===i.datatype;if("product"===t.type&&"product"===i.type){for(const n of(0,o.getKeys)(i.components))if(!(n in t.components)||!e(t.components[n],i.components[n]))return!1;return!0}if("coproduct"===t.type&&"coproduct"===i.type){for(const n of(0,o.getKeys)(t.options))if(!(n in i.options)||!e(t.options[n],i.options[n]))return!1;return!0}return!1},t.unify=function e(t,i){if(t===i)return i;if("reference"===t.type&&"reference"===i.type){if(t.value===i.value)return i}else{if("uri"===t.type&&"uri"===i.type)return i;if("literal"===t.type&&"literal"===i.type){if(t.datatype===i.datatype)return i}else if("product"===t.type&&"product"===i.type)return s.product(Object.fromEntries(function*(t,i){const n=(0,o.getKeys)(t.components),s=(0,o.getKeys)(i.components);if(n.length!==s.length)throw new Error("Cannot unify unequal products");for(const[o,l]of(0,r.default)(n,s)){if(o!==l)throw new Error("Cannot unify unequal types");yield[o,e(t.components[o],i.components[l])]}}(t,i)))}if("coproduct"===t.type&&"coproduct"===i.type)return s.coproduct(Object.fromEntries(function*(t,i){const n=Array.from(new Set([...(0,o.getKeys)(t.options),...(0,o.getKeys)(i.options)])).sort();for(const r of n){const n=t.options[r],s=i.options[r];if(void 0!==n&&void 0===s)yield[r,n];else if(void 0===n&&void 0!==s)yield[r,s];else{if(void 0===n||void 0===s)throw new Error("Error unifying options");yield[r,e(n,s)]}}}(t,i)));throw new Error("Cannot unify unequal types")};var n,r=(n=i(265))&&n.__esModule?n:{default:n},s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var s=n?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,t&&t.set(e,i),i}(i(148)),o=i(240);function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}},240:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.forEntries=function*(e){for(const[t,i]of s(e).entries())yield[i,e[i],t]},t.getKeys=s,t.getKeyIndex=function(e,t){if(r.has(e)){const i=r.get(e).indexOf(t);if(-1===i)throw new Error(`Key not found: ${t}`);return i}{const i=Object.keys(e).sort();Object.freeze(i),r.set(e,i);const n=i.indexOf(t);if(-1===n)throw new Error(`Key not found: ${t}`);return n}},t.mapKeys=function(e,t){const i=s(e),n=Object.fromEntries(i.map((i=>[i,t(e[i],i)])));return r.set(n,i),Object.freeze(n),n},t.signalInvalidType=function(e){throw console.error(e),new Error("Invalid type")},t.rootId=void 0;var n=i(544);const r=new WeakMap;function s(e){if(r.has(e))return r.get(e);{const t=Object.keys(e).sort();return Object.freeze(t),r.set(e,t),t}}const o=(0,n.v4)();t.rootId=o},805:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.validateInstance=function(e,t){const i=(0,r.default)((0,o.forEntries)(e),(0,o.forEntries)(t));for(const[[e,t],[n,r]]of i){if(e!==n)return!1;for(const e of r)if(!a(t,e))return!1}return!0},t.validateValue=a,t.forValue=function*e(t,i=[]){if(i.includes(t))throw new Error("Recursive type");if(yield[t,i],"Record"===t.termType){i.push(t);for(const n of t)yield*e(n,i);i.pop()}else"Variant"===t.termType&&(i.push(t),yield*e(t.value,i),i.pop())};var n,r=(n=i(265))&&n.__esModule?n:{default:n},s=function(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=l();if(t&&t.has(e))return t.get(e);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var s=n?Object.getOwnPropertyDescriptor(e,r):null;s&&(s.get||s.set)?Object.defineProperty(i,r,s):i[r]=e[r]}return i.default=e,t&&t.set(e,i),i}(i(148)),o=i(240);function l(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return l=function(){return e},e}function a(e,t){if(s.isReference(e))return"Pointer"===t.termType;if(s.isUri(e))return"NamedNode"===t.termType;if(s.isLiteral(e))return s.isLiteralValue(t)&&t.datatype.value===e.datatype;if(s.isProduct(e)){if(s.isRecord(t)){const i=(0,o.getKeys)(e.components);if(i.length!==t.length)return!1;for(const[n,s,o]of(0,r.default)(i,t.components,t)){if(n!==s)return!1;if(!a(e.components[n],o))return!1}return!0}return!1}if(s.isCoproduct(e))return!(!s.isVariant(t)||!(t.key in e.options))&&a(e.options[t.key],t.value);throw console.error(e),new Error("Unexpected type")}},544:(e,t,i)=>{var n;i.r(t),i.d(t,{NIL:()=>E,parse:()=>m,stringify:()=>c,v1:()=>g,v3:()=>C,v4:()=>A,v5:()=>T,validate:()=>l,version:()=>D});var r=new Uint8Array(16);function s(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(r)}const o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,l=function(e){return"string"==typeof e&&o.test(e)};for(var a=[],h=0;h<256;++h)a.push((h+256).toString(16).substr(1));const c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=(a[e[t+0]]+a[e[t+1]]+a[e[t+2]]+a[e[t+3]]+"-"+a[e[t+4]]+a[e[t+5]]+"-"+a[e[t+6]]+a[e[t+7]]+"-"+a[e[t+8]]+a[e[t+9]]+"-"+a[e[t+10]]+a[e[t+11]]+a[e[t+12]]+a[e[t+13]]+a[e[t+14]]+a[e[t+15]]).toLowerCase();if(!l(i))throw TypeError("Stringified UUID is invalid");return i};var u,f,d=0,p=0;const g=function(e,t,i){var n=t&&i||0,r=t||new Array(16),o=(e=e||{}).node||u,l=void 0!==e.clockseq?e.clockseq:f;if(null==o||null==l){var a=e.random||(e.rng||s)();null==o&&(o=u=[1|a[0],a[1],a[2],a[3],a[4],a[5]]),null==l&&(l=f=16383&(a[6]<<8|a[7]))}var h=void 0!==e.msecs?e.msecs:Date.now(),g=void 0!==e.nsecs?e.nsecs:p+1,m=h-d+(g-p)/1e4;if(m<0&&void 0===e.clockseq&&(l=l+1&16383),(m<0||h>d)&&void 0===e.nsecs&&(g=0),g>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");d=h,p=g,f=l;var y=(1e4*(268435455&(h+=122192928e5))+g)%4294967296;r[n++]=y>>>24&255,r[n++]=y>>>16&255,r[n++]=y>>>8&255,r[n++]=255&y;var v=h/4294967296*1e4&268435455;r[n++]=v>>>8&255,r[n++]=255&v,r[n++]=v>>>24&15|16,r[n++]=v>>>16&255,r[n++]=l>>>8|128,r[n++]=255&l;for(var w=0;w<6;++w)r[n+w]=o[w];return t||c(r)},m=function(e){if(!l(e))throw TypeError("Invalid UUID");var t,i=new Uint8Array(16);return i[0]=(t=parseInt(e.slice(0,8),16))>>>24,i[1]=t>>>16&255,i[2]=t>>>8&255,i[3]=255&t,i[4]=(t=parseInt(e.slice(9,13),16))>>>8,i[5]=255&t,i[6]=(t=parseInt(e.slice(14,18),16))>>>8,i[7]=255&t,i[8]=(t=parseInt(e.slice(19,23),16))>>>8,i[9]=255&t,i[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,i[11]=t/4294967296&255,i[12]=t>>>24&255,i[13]=t>>>16&255,i[14]=t>>>8&255,i[15]=255&t,i};function y(e,t,i){function n(e,n,r,s){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],i=0;i<e.length;++i)t.push(e.charCodeAt(i));return t}(e)),"string"==typeof n&&(n=m(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var o=new Uint8Array(16+e.length);if(o.set(n),o.set(e,n.length),(o=i(o))[6]=15&o[6]|t,o[8]=63&o[8]|128,r){s=s||0;for(var l=0;l<16;++l)r[s+l]=o[l];return r}return c(o)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n}function v(e){return 14+(e+64>>>9<<4)+1}function w(e,t){var i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}function b(e,t,i,n,r,s){return w((o=w(w(t,e),w(n,s)))<<(l=r)|o>>>32-l,i);var o,l}function x(e,t,i,n,r,s,o){return b(t&i|~t&n,e,t,r,s,o)}function k(e,t,i,n,r,s,o){return b(t&n|i&~n,e,t,r,s,o)}function S(e,t,i,n,r,s,o){return b(t^i^n,e,t,r,s,o)}function O(e,t,i,n,r,s,o){return b(i^(t|~n),e,t,r,s,o)}const C=y("v3",48,(function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var i=0;i<t.length;++i)e[i]=t.charCodeAt(i)}return function(e){for(var t=[],i=32*e.length,n="0123456789abcdef",r=0;r<i;r+=8){var s=e[r>>5]>>>r%32&255,o=parseInt(n.charAt(s>>>4&15)+n.charAt(15&s),16);t.push(o)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[v(t)-1]=t;for(var i=1732584193,n=-271733879,r=-1732584194,s=271733878,o=0;o<e.length;o+=16){var l=i,a=n,h=r,c=s;i=x(i,n,r,s,e[o],7,-680876936),s=x(s,i,n,r,e[o+1],12,-389564586),r=x(r,s,i,n,e[o+2],17,606105819),n=x(n,r,s,i,e[o+3],22,-1044525330),i=x(i,n,r,s,e[o+4],7,-176418897),s=x(s,i,n,r,e[o+5],12,1200080426),r=x(r,s,i,n,e[o+6],17,-1473231341),n=x(n,r,s,i,e[o+7],22,-45705983),i=x(i,n,r,s,e[o+8],7,1770035416),s=x(s,i,n,r,e[o+9],12,-1958414417),r=x(r,s,i,n,e[o+10],17,-42063),n=x(n,r,s,i,e[o+11],22,-1990404162),i=x(i,n,r,s,e[o+12],7,1804603682),s=x(s,i,n,r,e[o+13],12,-40341101),r=x(r,s,i,n,e[o+14],17,-1502002290),i=k(i,n=x(n,r,s,i,e[o+15],22,1236535329),r,s,e[o+1],5,-165796510),s=k(s,i,n,r,e[o+6],9,-1069501632),r=k(r,s,i,n,e[o+11],14,643717713),n=k(n,r,s,i,e[o],20,-373897302),i=k(i,n,r,s,e[o+5],5,-701558691),s=k(s,i,n,r,e[o+10],9,38016083),r=k(r,s,i,n,e[o+15],14,-660478335),n=k(n,r,s,i,e[o+4],20,-405537848),i=k(i,n,r,s,e[o+9],5,568446438),s=k(s,i,n,r,e[o+14],9,-1019803690),r=k(r,s,i,n,e[o+3],14,-187363961),n=k(n,r,s,i,e[o+8],20,1163531501),i=k(i,n,r,s,e[o+13],5,-1444681467),s=k(s,i,n,r,e[o+2],9,-51403784),r=k(r,s,i,n,e[o+7],14,1735328473),i=S(i,n=k(n,r,s,i,e[o+12],20,-1926607734),r,s,e[o+5],4,-378558),s=S(s,i,n,r,e[o+8],11,-2022574463),r=S(r,s,i,n,e[o+11],16,1839030562),n=S(n,r,s,i,e[o+14],23,-35309556),i=S(i,n,r,s,e[o+1],4,-1530992060),s=S(s,i,n,r,e[o+4],11,1272893353),r=S(r,s,i,n,e[o+7],16,-155497632),n=S(n,r,s,i,e[o+10],23,-1094730640),i=S(i,n,r,s,e[o+13],4,681279174),s=S(s,i,n,r,e[o],11,-358537222),r=S(r,s,i,n,e[o+3],16,-722521979),n=S(n,r,s,i,e[o+6],23,76029189),i=S(i,n,r,s,e[o+9],4,-640364487),s=S(s,i,n,r,e[o+12],11,-421815835),r=S(r,s,i,n,e[o+15],16,530742520),i=O(i,n=S(n,r,s,i,e[o+2],23,-995338651),r,s,e[o],6,-198630844),s=O(s,i,n,r,e[o+7],10,1126891415),r=O(r,s,i,n,e[o+14],15,-1416354905),n=O(n,r,s,i,e[o+5],21,-57434055),i=O(i,n,r,s,e[o+12],6,1700485571),s=O(s,i,n,r,e[o+3],10,-1894986606),r=O(r,s,i,n,e[o+10],15,-1051523),n=O(n,r,s,i,e[o+1],21,-2054922799),i=O(i,n,r,s,e[o+8],6,1873313359),s=O(s,i,n,r,e[o+15],10,-30611744),r=O(r,s,i,n,e[o+6],15,-1560198380),n=O(n,r,s,i,e[o+13],21,1309151649),i=O(i,n,r,s,e[o+4],6,-145523070),s=O(s,i,n,r,e[o+11],10,-1120210379),r=O(r,s,i,n,e[o+2],15,718787259),n=O(n,r,s,i,e[o+9],21,-343485551),i=w(i,l),n=w(n,a),r=w(r,h),s=w(s,c)}return[i,n,r,s]}(function(e){if(0===e.length)return[];for(var t=8*e.length,i=new Uint32Array(v(t)),n=0;n<t;n+=8)i[n>>5]|=(255&e[n/8])<<n%32;return i}(e),8*e.length))})),A=function(e,t,i){var n=(e=e||{}).random||(e.rng||s)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){i=i||0;for(var r=0;r<16;++r)t[i+r]=n[r];return t}return c(n)};function P(e,t,i,n){switch(e){case 0:return t&i^~t&n;case 1:return t^i^n;case 2:return t&i^t&n^i&n;case 3:return t^i^n}}function M(e,t){return e<<t|e>>>32-t}const T=y("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],i=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var n=unescape(encodeURIComponent(e));e=[];for(var r=0;r<n.length;++r)e.push(n.charCodeAt(r))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var s=e.length/4+2,o=Math.ceil(s/16),l=new Array(o),a=0;a<o;++a){for(var h=new Uint32Array(16),c=0;c<16;++c)h[c]=e[64*a+4*c]<<24|e[64*a+4*c+1]<<16|e[64*a+4*c+2]<<8|e[64*a+4*c+3];l[a]=h}l[o-1][14]=8*(e.length-1)/Math.pow(2,32),l[o-1][14]=Math.floor(l[o-1][14]),l[o-1][15]=8*(e.length-1)&4294967295;for(var u=0;u<o;++u){for(var f=new Uint32Array(80),d=0;d<16;++d)f[d]=l[u][d];for(var p=16;p<80;++p)f[p]=M(f[p-3]^f[p-8]^f[p-14]^f[p-16],1);for(var g=i[0],m=i[1],y=i[2],v=i[3],w=i[4],b=0;b<80;++b){var x=Math.floor(b/20),k=M(g,5)+P(x,m,y,v)+w+t[x]+f[b]>>>0;w=v,v=y,y=M(m,30)>>>0,m=g,g=k}i[0]=i[0]+g>>>0,i[1]=i[1]+m>>>0,i[2]=i[2]+y>>>0,i[3]=i[3]+v>>>0,i[4]=i[4]+w>>>0}return[i[0]>>24&255,i[0]>>16&255,i[0]>>8&255,255&i[0],i[1]>>24&255,i[1]>>16&255,i[1]>>8&255,255&i[1],i[2]>>24&255,i[2]>>16&255,i[2]>>8&255,255&i[2],i[3]>>24&255,i[3]>>16&255,i[3]>>8&255,255&i[3],i[4]>>24&255,i[4]>>16&255,i[4]>>8&255,255&i[4]]})),E="00000000-0000-0000-0000-000000000000",D=function(e){if(!l(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},53:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parser=void 0;var n=i(774);const r={__proto__:null,namespace:8,type:16,class:42,edge:46,list:50},s=n.Parser.deserialize({version:13,states:")`QYQPOOOkQPO'#C_OpQPO'#CcOuQQO'#CpOzQQO'#CrO!PQQO'#CtOOQO'#C|'#C|OOQO'#Cv'#CvQYQPOOOOQO'#Ca'#CaO!UQQO,58yOOQO'#Ce'#CeO!ZQPO,58}O!ZQPO,59[O!rQPO,59^O!wQPO,59`OOQO-E6t-E6tOOQO1G.e1G.eOOQO'#Cf'#CfO!ZQPO'#CgO!|QQO'#ChO#RQQO'#CkO#WQQO'#ClO#`QQO'#CnOOQO'#DO'#DOOOQO1G.i1G.iOOQO1G.v1G.vO#hQQO1G.xO!ZQPO1G.zOOQO,59R,59ROOQO,59S,59SO#mQPO,59VO#rQPO'#CmO#wQPO'#DTO$PQPO,59WO$UQQO'#CoO$aQPO'#DYO$iQPO,59YO$nQPO7+$dOOQO7+$f7+$fOOQO1G.q1G.qO!ZQPO,59XO$uQQO,59oO$}QPO,59oOOQO1G.r1G.rO!ZQPO,59ZO%VQQO,59tO%_QPO,59tOOQO1G.t1G.tO%gQQO<<HOO%lQPO<<HOOOQO1G.s1G.sOOQO,59c,59cO%qQQO1G/ZOOQO-E6u-E6uOOQO1G.u1G.uOOQO,59d,59dO%yQQO1G/`OOQO-E6v-E6vOOQOAN=jAN=jO&RQQOAN=jP&WQQO'#CwP&]QQO'#CxOOQOG23UG23U",stateData:"&b~OoOSPOS~OSPOWQOeROgSOiTO~OqXO~OqZO~OU]O~OU^O~OU_O~OUaO~O]dO^hOqbOscOteOvfO{gO~O!PkO~O!RlO~OUnO~OUoO~OUpOzwP~OUsO!O|P~OUvO~OuxO~OxyO~OyzOzwX~Oz|O~O}}OycX!OcX~Oy!OO!O|X~O!O!QO~O!Q!RO~P!ZOUpOzwa~Oy!VOzwa~OUsO!O|a~Oy!ZO!O|a~OU!]O~O!Q!^O~OUpOzwi~OUsO!O|i~OU!aO~OUpO~OUsO~O",goto:"#v}PPP!OP!SP!OP!V!Y!Y!YPP!Y!Y!c!Y!k!OP!OP!OP!s!y#PPPP#VP#ZPPPP#pPPPP#sTUOWRYPR[Q_h[]clvy}QqfV!Uz!V!_QtgV!Y!O!Z!`QWOR`WQ{qR!W{Q!PtR![!PTVOWQi[Qj]QmcQwlQ!SvQ!TyR!X}RrfRug",nodeNames:" Comment Schema Namespace namespace Prefix Term Type type TypeName Variable Optional Reference Pointer Uri Literal Product Component Coproduct Option Class class Edge edge List list",maxTerm:49,nodeProps:[[n.NodeProp.group,-7,10,11,12,14,15,16,18,"Expression"]],skippedNodes:[0,1],repeatNodeCount:3,tokenData:"'c~RjX^!spq!sst#hz{#s}!O#x!P!Q$T![!]$f!]!^$q!^!_$v!_!`%T!`!a%f!a!b%s!c!}%x!}#O&}#P#Q'S#T#o%x#o#p'X#q#r'^#y#z!s$f$g!s#BY#BZ!s$IS$I_!s$I|$JO!s$JT$JU!s$KV$KW!s&FU&FV!s~!xYo~X^!spq!s#y#z!s$f$g!s#BY#BZ!s$IS$I_!s$I|$JO!s$JT$JU!s$KV$KW!s&FU&FV!s~#mQP~OY#hZ~#h~#xO]~~#{P!`!a$O~$TOx~~$WP!_!`$Z~$^P!`!a$a~$fO!Q~~$iP![!]$l~$qO!R~~$vOy~~${Pt~!`!a%O~%TO^~~%WP!_!`%Z~%^P!P!Q%a~%fO!P~R%kPuP}!O%nQ%sO}Q~%xOs~R&PSUQqP!Q![%x![!]&]!c!}%x#T#o%xQ&bXUQst&]}!O&]!O!P&]!P!Q&]!Q![&]![!]&]!c!}&]#R#S&]#T#o&]~'SO{~~'XO!O~~'^Ov~~'cOz~",tokenizers:[0,1],topRules:{Schema:[0,2]},specialized:[{term:33,get:e=>r[e]||-1}],tokenPrec:0});t.parser=s},254:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parser=void 0;var n=i(774);const r={__proto__:null,namespace:8,expr:16,map:50},s=n.Parser.deserialize({version:13,states:")xQYQPOOOeQPO'#C_OjQPO'#CcOoQQO'#CtOOQO'#C}'#C}OOQO'#Cv'#CvQYQPOOOOQO'#Ca'#CaOtQQO,58yOOQO'#Ce'#CeOyQPO,58}O!hQPO,59`OOQO-E6t-E6tOOQO1G.e1G.eOOQO'#Cf'#CfO!oQQO'#CgO!tQQO'#CiO!yQQO'#CkO#OQQO'#CmO#TQPO'#CnO#YQQO'#CpO#bQQO'#CrOOQO'#DR'#DRO#jQPO'#DPO$UQPO'#DPOOQO1G.i1G.iOOQO1G.z1G.zO$pQQO1G.zOOQO,59R,59ROOQO,59T,59TOOQO,59V,59VO$uQPO,59XO$zQQO,59YO%PQPO'#CqO%[QPO'#DVO%dQPO,59[O%iQQO'#CsO%tQPO'#D[O%|QPO,59^O$UQPO'#CyO&RQPO,59kO&RQPO,59kOyQPO7+$fOOQO1G.s1G.sO&mQPO1G.tOyQPO,59]O&rQQO,59qO&zQPO,59qOOQO1G.v1G.vOyQPO,59_O'SQQO,59vO'[QPO,59vOOQO1G.x1G.xOOQO,59e,59eOOQO-E6w-E6wO'dQPO1G/VOOQO<<HQ<<HQOOQO7+$`7+$`OOQO1G.w1G.wOOQO,59c,59cO(OQQO1G/]OOQO-E6u-E6uOOQO1G.y1G.yOOQO,59d,59dO(WQQO1G/bOOQO-E6v-E6vP(`QQO'#CwP(eQQO'#Cx",stateData:"(j~OpOSPOS~OSPOWQOiRO~OrVO~OrXO~OUZO~OU]O~O[_O^`O`aOccOr^OthOvbOxdO}eO~O!RkO~PyOUlO~OUmO~OUnO~OUoO~OvpO~OUqO|yP~OUtO!Q!OP~OtwOSsXWsXisXnsX{sX|sX!QsX~O[_O^`O`aOccOr^OvbOxdO}eO~OUzO~Ow{O~OU|O~Oz}O{eX|eX~O{!OO|yX~O|!QO~O!P!RO{gX!QgX~O{!SO!Q!OX~O!Q!UO~OtwOSsaWsaisansa{sa|sa!Qsa~Ow!ZO~OUqO|ya~O{!^O|ya~OUtO!Q!Oa~O{!bO!Q!Oa~OtwOSsiWsiisinsi{si|si!Qsi~OUqO|yi~OUtO!Q!Oi~OUqO~OUtO~O",goto:"$Z!PPPP!QP!UP!QP!X![![P![P![P![![P![!e![!m!QP!u!{#R#XPPP#cP#gP#vPPP$TPPPP$WTSOURWPRYQ_fYZhwz}!RQrdV!]!O!^!dQueV!a!S!b!eQUOR[UQ!PrR!_!PQ!TuR!c!TQxgS!Wx!XR!XyTTOUQiYQjZQ!YzQ![}R!`!RYgYZz}!RQyhR!VwRsdRve",nodeNames:" Comment Mapping Namespace namespace Prefix Term Expr expr ExprName Variable Dereference Pointer Projection Projector Injection Injector Identifier Constant String Tuple Slot Match Case Map map",maxTerm:49,nodeProps:[[n.NodeProp.group,-8,10,11,13,15,17,18,20,22,"Expression"]],skippedNodes:[0,1],repeatNodeCount:4,tokenData:")Q~RkX^!vpq!vrs#kst%wz{&S}!O&X!O!P&d!P!Q&i![!]&n!]!^&y!^!_'O!`!a'T!c!}'b!}#O(g#P#Q(l#T#o'b#o#p(q#p#q(v#q#r({#y#z!v$f$g!v#BY#BZ!v$IS$I_!v$I|$JO!v$JT$JU!v$KV$KW!v&FU&FV!v~!{Yp~X^!vpq!v#y#z!v$f$g!v#BY#BZ!v$IS$I_!v$I|$JO!v$JT$JU!v$KV$KW!v&FU&FV!v~#nUpq#kqr#krs$Qs#O#k#O#P$V#P~#k~$VOc~~$YXrs#k!P!Q#k#O#P#k#U#V#k#Y#Z#k#b#c#k#f#g#k#h#i#k#i#j$u~$xR!Q![%R!c!i%R#T#Z%R~%UR!Q![%_!c!i%_#T#Z%_~%bR!Q![%k!c!i%k#T#Z%k~%nR!Q![#k!c!i#k#T#Z#k~%|QP~OY%wZ~%w~&XO[~~&[P!`!a&_~&dOz~~&iO^~~&nO`~~&qP![!]&t~&yO!R~~'OO{~~'TOv~R'YPwP}!O']Q'bO!PQR'iSUQrP!Q!['b![!]'u!c!}'b#T#o'bQ'zXUQst'u}!O'u!O!P'u!P!Q'u!Q!['u![!]'u!c!}'u#R#S'u#T#o'u~(lO}~~(qO!Q~~(vOx~~({Ot~~)QO|~",tokenizers:[0,1],topRules:{Mapping:[0,2]},specialized:[{term:34,get:e=>r[e]||-1}],tokenPrec:0});t.parser=s},564:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),r=this&&this.__exportStar||function(e,t){for(var i in e)"default"===i||Object.prototype.hasOwnProperty.call(t,i)||n(t,e,i)};Object.defineProperty(t,"__esModule",{value:!0}),r(i(548),t),r(i(725),t),r(i(931),t),r(i(984),t)},931:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.defaultNamespaces=t.defaultTypes=void 0;const n=i(893),r=i(704);t.defaultTypes={unit:n.APG.product({}),uri:n.APG.uri(),string:n.APG.literal(r.xsd.string),boolean:n.APG.literal(r.xsd.boolean),integer:n.APG.literal(r.xsd.integer),double:n.APG.literal(r.xsd.double),date:n.APG.literal(r.xsd.date),dateTime:n.APG.literal(r.xsd.dateTime),base64Binary:n.APG.literal(r.xsd.base64Binary),JSON:n.APG.literal(r.rdf.JSON)},t.defaultNamespaces={ul:"http://underlay.org/ns/",xsd:"http://www.w3.org/2001/XMLSchema#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#"}},548:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseType=t.parseTasl=void 0;const n=i(893),r=i(53),s=i(984),o=i(931);function l(e,t){if("Variable"===t.name){const i=e.slice(t);if(i in e.types)return e.types[i];throw e.error(t,`Type ${i} is not defined`)}if("Optional"===t.name){const i=l(e,t.getChild("Expression"));return n.APG.coproduct({[n.ns.none]:n.APG.product({}),[n.ns.some]:i})}if("Reference"===t.name){const i=t.getChild("Term"),r=s.parseURI(e,i);if(!(r in e.schema)){const{from:t,to:n}=i;e.references.push({from:t,to:n,key:r})}return n.APG.reference(r)}if("Uri"===t.name)return n.APG.uri();if("Literal"===t.name){const i=t.getChild("Term"),r=s.parseURI(e,i);return n.APG.literal(r)}if("Product"===t.name){const i={};for(const n of t.getChildren("Component")){const t=n.getChild("Term"),r=s.parseURI(e,t);if(r in i)throw e.error(t,`Duplicate product component key: ${r}`);{const t=n.getChild("Expression");i[r]=l(e,t)}}return n.APG.product(i)}if("Coproduct"===t.name){const i={};for(const r of t.getChildren("Option")){const t=r.getChild("Term"),o=s.parseURI(e,t);if(o in i)throw e.error(t,`Duplicate coproduct option key: ${o}`);{const t=r.getChild("Expression");i[o]=null===t?n.APG.product({}):l(e,t)}}return n.APG.coproduct(i)}throw new Error("Unexpected Expression node")}t.parseTasl=function(e){const t=r.parser.configure({strict:!0}).parse(e).cursor();if("Schema"!==t.name)throw new s.LintError(t.from,t.to,"","Invalid top-level node");t.firstChild();const i=({from:t,to:i})=>e.slice(t,i),a={slice:i,error:(e,t)=>new s.LintError(e.from,e.to,i(e),t),namespaces:{},types:{...o.defaultTypes},schema:{},references:[]};do{if("Namespace"===t.type.name){const e=t.node.getChild("Term"),i=a.slice(e);if(!s.uriPattern.test(i))throw a.error(e,`Invalid URI: URIs must match ${s.uriPattern.source}`);if(!s.namespacePattern.test(i))throw a.error(e,"Invalid namespace: namespaces must end in / or #");const n=t.node.getChild("Prefix"),r=a.slice(n);if(r in a.namespaces)throw a.error(n,`Duplicate namespace: ${r}`);a.namespaces[r]=i}else if("Type"===t.type.name){const e=t.node.getChild("TypeName"),i=t.node.getChild("Expression"),n=l(a,i),r=a.slice(e);if(r in a.types)throw a.error(e,`Invalid type declaration: type ${r} has already been declared`);a.types[r]=n}else if("Class"===t.type.name){const e=t.node.getChild("Term"),i=s.parseURI(a,e);if(i in a.schema)throw a.error(e,`Invalid class declaration: class ${i} has already been declared`);{const e=t.node.getChild("Expression");a.schema[i]=l(a,e)}}else if("Edge"===t.type.name){const e=t.node.getChildren("Term"),i=e.map((e=>s.parseURI(a,e))),r=t.node.getChild("Expression"),o=r&&l(a,r),[h,c,u]=e,[f,d,p]=i;if(d in a.schema)throw a.error(c,`Invalid edge declaration: class ${d} has already been declared`);{if(!(f in a.schema)){const{from:e,to:t}=h;a.references.push({from:e,to:t,key:f})}if(!(p in a.schema)){const{from:e,to:t}=u;a.references.push({from:e,to:t,key:p})}const e={[n.ns.source]:n.APG.reference(f),[n.ns.target]:n.APG.reference(p)};null!==o&&(e[n.ns.value]=o),a.schema[d]=n.APG.product(e)}}else if("List"===t.type.name){const e=t.node.getChild("Term"),i=s.parseURI(a,e);if(i in a.schema)throw a.error(e,`Invalid list declaration: class ${i} has already been declared`);{const e=t.node.getChild("Expression");a.schema[i]=n.APG.coproduct({[n.ns.none]:n.APG.product({}),[n.ns.some]:n.APG.product({[n.ns.head]:l(a,e),[n.ns.tail]:n.APG.reference(i)})})}}}while(t.nextSibling());for(const{from:e,to:t,key:i}of a.references)if(!(i in a.schema)){const n=`Invalid reference: class ${i} is not defined`;throw new s.LintError(e,t,i,n)}return{schema:n.APG.schema(a.schema),namespaces:a.namespaces}},t.parseType=l},725:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseExpr=t.parseExprs=t.parseTaslx=void 0;const n=i(893),r=i(254),s=i(984);function o(e,i){if("Variable"===i.name){const t=e.slice(i);if(t in e.exprs)return e.exprs[t];throw e.error(i,`Expression ${t} is not defined`)}if("Dereference"===i.name){const t=i.getChild("Term"),r=s.parseURI(e,t);return[n.APG.dereference(r)]}if("Projection"===i.name){const t=i.getChild("Term"),r=s.parseURI(e,t);return[n.APG.projection(r)]}if("Injection"===i.name){const t=i.getChild("Term"),r=s.parseURI(e,t);return[n.APG.injection(r)]}if("Identifier"===i.name){const t=i.getChild("Term"),r=s.parseURI(e,t);return[n.APG.identifier(r)]}if("Constant"===i.name){const t=i.getChild("String"),r=e.slice(t),o=JSON.parse(r);if("string"!=typeof o)throw e.error(t,`Invalid constant: ${r}`);const l=i.getChild("Term"),a=s.parseURI(e,l);return[n.APG.constant(o,a)]}if("Tuple"===i.name){const r={};for(const n of i.getChildren("Slot")){const i=n.getChild("Term"),o=s.parseURI(e,i);if(o in r)throw e.error(i,`Duplicate tuple slot key: ${o}`);{const i=n.getChildren("Expressions");r[o]=t.parseExprs(e,i)}}return[n.APG.tuple(r)]}if("Match"===i.name){const r={};for(const n of i.getChildren("Case")){const i=n.getChild("Term"),o=s.parseURI(e,i);if(o in r)throw e.error(i,`Duplicate match case key: ${o}`);{const i=n.getChildren("Expressions");r[o]=t.parseExprs(e,i)}}return[n.APG.match(r)]}throw new Error("Unexpected Expression node")}t.parseTaslx=function(e){const i=t=>e.slice(t.from,t.to),o={slice:i,error:(e,t)=>new s.LintError(e.from,e.to,i(e),t),namespaces:{},exprs:{},mapping:{}},l=r.parser.configure({strict:!0}).parse(e).cursor();if("Mapping"!==l.name)throw o.error(l.node,"Invalid top-level node");l.firstChild();do{if("Namespace"===l.type.name){const e=l.node.getChild("Term"),t=o.slice(e);if(!s.uriPattern.test(t))throw o.error(e,`Invalid URI: URIs must match ${s.uriPattern.source}`);if(!s.namespacePattern.test(t))throw o.error(e,"Invalid namespace: namespaces must end in / or #");const i=l.node.getChild("Prefix"),n=o.slice(i);if(n in o.namespaces)throw o.error(i,`Duplicate namespace: ${n}`);o.namespaces[n]=t}else if("Expr"===l.type.name){const e=l.node.getChild("ExprName"),i=l.node.getChildren("Expression"),n=t.parseExprs(o,i),r=o.slice(e);if(r in o.exprs)throw o.error(e,`Invalid expression declaration: expression ${r} has already been declared`);o.exprs[r]=n}else if("Map"===l.type.name){const e=l.node.getChildren("Term"),i=e.map((e=>s.parseURI(o,e))),r=i[0],a=i.length>1?i[1]:r;if(r in o.mapping)throw o.error(e[0],`Invalid map declaration: map ${r} has already been declared`);{const e=l.node.getChildren("Expression");o.mapping[r]=n.APG.map(a,t.parseExprs(o,e))}}}while(l.nextSibling());return{mapping:n.APG.mapping(o.mapping),namespaces:o.namespaces}},t.parseExprs=(e,t)=>t.reduce(((t,i)=>t.concat(o(e,i))),[]),t.parseExpr=o},984:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.printSyntax=t.parseURI=t.namespacePattern=t.uriPattern=t.LintError=void 0;class i extends Error{constructor(e,t,i,n){super(n),this.from=e,this.to=t,this.value=i}}t.LintError=i,t.uriPattern=/^[a-z]+:[a-zA-Z0-9-/_.:#]+$/,t.namespacePattern=/[#/]$/,t.parseURI=function(e,t){const n=e.slice(t),r=n.indexOf(":");if(-1===r){const{from:e,to:r}=t;throw new i(e,r,n,"Invalid URI: URIs must be of the form [namespace]:[path]")}const s=n.slice(0,r);if(s in e.namespaces)return e.namespaces[s]+n.slice(r+1);{const{from:e,to:r}=t;throw new i(e,r,n,`Invalid URI: namespace ${s} is not defined`)}},t.printSyntax=function e(t,i=""){console.log(`${i}- ${t.type.name} ${t.from} ${t.to}`);for(let n=t.firstChild;null!==n;n=n.nextSibling)e(n,i+"  ")}},346:(e,t,i)=>{i.d(t,{md:()=>o,mp:()=>h,i9:()=>x});const n=1024;let r=0;const s=new WeakMap;class o{constructor({deserialize:e}={}){this.id=r++,this.deserialize=e||(()=>{throw new Error("This node type doesn't define a deserialize function")})}static string(){return new o({deserialize:e=>e})}static number(){return new o({deserialize:Number})}static flag(){return new o({deserialize:()=>!0})}set(e,t){return e[this.id]=t,e}add(e){return"function"!=typeof e&&(e=a.match(e)),t=>{let i=e(t);return void 0===i?null:[this,i]}}}o.closedBy=new o({deserialize:e=>e.split(" ")}),o.openedBy=new o({deserialize:e=>e.split(" ")}),o.group=new o({deserialize:e=>e.split(" ")});const l=Object.create(null);class a{constructor(e,t,i,n=0){this.name=e,this.props=t,this.id=i,this.flags=n}static define(e){let t=e.props&&e.props.length?Object.create(null):l,i=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),n=new a(e.name||"",t,e.id,i);if(e.props)for(let i of e.props)Array.isArray(i)||(i=i(n)),i&&i[0].set(t,i[1]);return n}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(o.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let i in e)for(let n of i.split(" "))t[n]=e[i];return e=>{for(let i=e.prop(o.group),n=-1;n<(i?i.length:0);n++){let r=t[n<0?e.name:i[n]];if(r)return r}}}}a.none=new a("",Object.create(null),0,8);class h{constructor(e,t,i,n){this.type=e,this.children=t,this.positions=i,this.length=n}toString(){let e=this.children.map((e=>e.toString())).join();return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(e.length?"("+e+")":""):e}cursor(e,t=0){let i=null!=e&&s.get(this)||this.topNode,n=new g(i);return null!=e&&(n.moveTo(e,t),s.set(this,n._tree)),n}fullCursor(){return new g(this.topNode,!0)}get topNode(){return new u(this,0,0,null)}resolve(e,t=0){return this.cursor(e,t).node}iterate(e){let{enter:t,leave:i,from:n=0,to:r=this.length}=e;for(let e=this.cursor();;){let s=!1;if(e.from<=r&&e.to>=n&&(e.type.isAnonymous||!1!==t(e.type,e.from,e.to))){if(e.firstChild())continue;e.type.isAnonymous||(s=!0)}for(;s&&i&&i(e.type,e.from,e.to),s=e.type.isAnonymous,!e.nextSibling();){if(!e.parent())return;s=!0}}}balance(e=n){return this.children.length<=v?this:w(this.type,a.none,this.children,this.positions,0,this.children.length,0,e,this.length)}static build(e){return function(e){var t;let{buffer:i,nodeSet:r,topID:s=0,maxBufferLength:o=n,reused:l=[],minRepeatType:u=r.types.length}=e,f=Array.isArray(i)?new y(i,i.length):i,d=r.types;function p(e,t,i,n,s){let{id:m,start:y,end:b,size:x}=f;for(;m==s;)f.next(),({id:m,start:y,end:b,size:x}=f);let k=y-e;if(x<0)return i.push(l[m]),n.push(k),void f.next();let S,O,C=d[m];if(b-y<=o&&(O=function(e,t){let i=f.fork(),n=0,r=0,s=0,l=i.end-o,a={size:0,start:0,skip:0};e:for(let o=i.pos-e;i.pos>o;){if(i.id==t){a.size=n,a.start=r,a.skip=s,s+=4,n+=4,i.next();continue}let e=i.size,h=i.pos-e;if(e<0||h<o||i.start<l)break;let c=i.id>=u?4:0,f=i.start;for(i.next();i.pos>h;){if(i.size<0)break e;i.id>=u&&(c+=4),i.next()}r=f,n+=e,s+=c}return(t<0||n==e)&&(a.size=n,a.start=r,a.skip=s),a.size>4?a:void 0}(f.pos-t,s))){let t=new Uint16Array(O.size-O.skip),i=f.pos-O.size,n=t.length;for(;f.pos>i;)n=g(O.start,t,n,s);S=new c(t,b-O.start,r,s<0?a.none:d[s]),k=O.start-e}else{let e=f.pos-x;f.next();let t=[],i=[],n=m>=u?m:-1;for(;f.pos>e;)p(y,e,t,i,n);t.reverse(),i.reverse(),S=n>-1&&t.length>v?w(C,C,t,i,0,t.length,0,o,b-y):new h(C,t,i,b-y)}i.push(S),n.push(k)}function g(e,t,i,n){let{id:r,start:s,end:o,size:l}=f;if(f.next(),r==n)return i;let a=i;if(l>4){let r=f.pos-(l-4);for(;f.pos>r;)i=g(e,t,i,n)}return r<u&&(t[--i]=a,t[--i]=o-e,t[--i]=s-e,t[--i]=r),i}let m=[],b=[];for(;f.pos>0;)p(e.start||0,0,m,b,-1);let x=null!==(t=e.length)&&void 0!==t?t:m.length?b[0]+m[0].length:0;return new h(d[s],m.reverse(),b.reverse(),x)}(e)}}h.empty=new h(a.none,[],[],0);class c{constructor(e,t,i,n=a.none){this.buffer=e,this.length=t,this.set=i,this.type=n}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],i=this.buffer[e+3],n=this.set.types[t],r=n.name;if(/\W/.test(r)&&!n.isError&&(r=JSON.stringify(r)),i==(e+=4))return r;let s=[];for(;e<i;)s.push(this.childString(e)),e=this.buffer[e+3];return r+"("+s.join(",")+")"}findChild(e,t,i,n){let{buffer:r}=this,s=-1;for(let o=e;o!=t;o=r[o+3])if(-1e8!=n){let e=r[o+1],t=r[o+2];if(i>0){if(t>n&&(s=o),t>n)break}else if(e<n&&(s=o),t>=n)break}else if(s=o,i>0)break;return s}}class u{constructor(e,t,i,n){this.node=e,this.from=t,this.index=i,this._parent=n}get type(){return this.node.type}get name(){return this.node.type.name}get to(){return this.from+this.node.length}nextChild(e,t,i,n=!1){for(let r=this;;){for(let{children:s,positions:o}=r.node,l=t>0?s.length:-1;e!=l;e+=t){let l=s[e],a=o[e]+r.from;if(-1e8==i||!(t<0?a>=i:a+l.length<=i))if(l instanceof c){let n=l.findChild(0,l.buffer.length,t,-1e8==i?-1e8:i-a);if(n>-1)return new p(new d(r,l,e,a),null,n)}else if(n||!l.type.isAnonymous||m(l)){let s=new u(l,a,e,r);return n||!s.type.isAnonymous?s:s.nextChild(t<0?l.children.length-1:0,t,i)}}if(n||!r.type.isAnonymous)return null;if(e=r.index+t,r=r._parent,!r)return null}}get firstChild(){return this.nextChild(0,1,-1e8)}get lastChild(){return this.nextChild(this.node.children.length-1,-1,-1e8)}childAfter(e){return this.nextChild(0,1,e)}childBefore(e){return this.nextChild(this.node.children.length-1,-1,e)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent?this._parent.nextChild(this.index+1,1,-1):null}get prevSibling(){return this._parent?this._parent.nextChild(this.index-1,-1,-1):null}get cursor(){return new g(this)}resolve(e,t=0){return this.cursor.moveTo(e,t).node}getChild(e,t=null,i=null){let n=f(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return f(this,e,t,i)}toString(){return this.node.toString()}}function f(e,t,i,n){let r=e.cursor,s=[];if(!r.firstChild())return s;if(null!=i)for(;!r.type.is(i);)if(!r.nextSibling())return s;for(;;){if(null!=n&&r.type.is(n))return s;if(r.type.is(t)&&s.push(r.node),!r.nextSibling())return null==n?s:[]}}class d{constructor(e,t,i,n){this.parent=e,this.buffer=t,this.index=i,this.start=n}}class p{constructor(e,t,i){this.context=e,this._parent=t,this.index=i,this.type=e.buffer.set.types[e.buffer.buffer[i]]}get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}child(e,t){let{buffer:i}=this.context,n=i.findChild(this.index+4,i.buffer[this.index+3],e,-1e8==t?-1e8:t-this.context.start);return n<0?null:new p(this.context,this,n)}get firstChild(){return this.child(1,-1e8)}get lastChild(){return this.child(-1,-1e8)}childAfter(e){return this.child(1,e)}childBefore(e){return this.child(-1,e)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,-1)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new p(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new p(this.context,this._parent,e.findChild(t,this.index,-1,-1e8))}get cursor(){return new g(this)}resolve(e,t=0){return this.cursor.moveTo(e,t).node}toString(){return this.context.buffer.childString(this.index)}getChild(e,t=null,i=null){let n=f(this,e,t,i);return n.length?n[0]:null}getChildren(e,t=null,i=null){return f(this,e,t,i)}}class g{constructor(e,t=!1){if(this.full=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof u)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}get name(){return this.type.name}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:i,buffer:n}=this.buffer;return this.type=t||n.set.types[n.buffer[e]],this.from=i+n.buffer[e+1],this.to=i+n.buffer[e+2],!0}yield(e){return!!e&&(e instanceof u?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enter(e,t){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree.node.children.length-1:0,e,t,this.full));let{buffer:i}=this.buffer,n=i.findChild(this.index+4,i.buffer[this.index+3],e,-1e8==t?-1e8:t-this.buffer.start);return!(n<0)&&(this.stack.push(this.index),this.yieldBuf(n))}firstChild(){return this.enter(1,-1e8)}lastChild(){return this.enter(-1,-1e8)}childAfter(e){return this.enter(1,e)}childBefore(e){return this.enter(-1,e)}parent(){if(!this.buffer)return this.yieldNode(this.full?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.full?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree._parent.nextChild(this._tree.index+e,e,-1e8,this.full));let{buffer:t}=this.buffer,i=this.stack.length-1;if(e<0){let e=i<0?0:this.stack[i]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,-1e8))}else{let e=t.buffer[this.index+3];if(e<(i<0?t.buffer.length:t.buffer[this.stack[i]+3]))return this.yieldBuf(e)}return i<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,-1e8,this.full))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,i,{buffer:n}=this;if(n){if(e>0){if(this.index<n.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(n.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:i}=n)}else({index:t,_parent:i}=this._tree);for(;i;({index:t,_parent:i}=i))for(let n=t+e,r=e<0?-1:i.node.children.length;n!=r;n+=e){let e=i.node.children[n];if(this.full||!e.type.isAnonymous||e instanceof c||m(e))return!1}return!0}move(e){if(this.enter(e,-1e8))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(){return this.move(1)}prev(){return this.move(-1)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;t<0?this.childBefore(e):this.childAfter(e);)if(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e)){this.parent();break}return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,i=0;if(e&&e.context==this.buffer)e:for(let n=this.index,r=this.stack.length;r>=0;){for(let s=e;s;s=s._parent)if(s.index==n){if(n==this.index)return s;t=s,i=r+1;break e}n=this.stack[--r]}for(let e=i;e<this.stack.length;e++)t=new p(this.buffer,t,this.stack[e]);return this.bufferNode=new p(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree.node}}function m(e){return e.children.some((e=>!e.type.isAnonymous||e instanceof c||m(e)))}class y{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new y(this.buffer,this.index)}}const v=8;function w(e,t,i,n,r,s,o,l,c){let u=[],f=[];if(c<=l)for(let e=r;e<s;e++)u.push(i[e]),f.push(n[e]-o);else{let e=Math.max(l,Math.ceil(1.5*c/v));for(let c=r;c<s;){let r=c,d=n[c];for(c++;c<s&&!(n[c]+i[c].length-d>e);c++);if(c==r+1){let n=i[r];if(n instanceof h&&n.type==t&&n.length>e<<1){for(let e=0;e<n.children.length;e++)u.push(n.children[e]),f.push(n.positions[e]+d-o);continue}u.push(n)}else if(c==r+1)u.push(i[r]);else{let e=w(t,t,i,n,r,c,d,l,n[c-1]+i[c-1].length-d);t==a.none||b(e.children,t)||(e=new h(a.none,e.children,e.positions,e.length)),u.push(e)}f.push(d-o)}}return new h(e,u,f,c)}function b(e,t){for(let i of e)if(i.type==t)return!0;return!1}class x{constructor(e,t,i,n,r){this.from=e,this.to=t,this.tree=i,this.offset=n,this.open=r}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static applyChanges(e,t,i=128){if(!t.length)return e;let n=[],r=1,s=e.length?e[0]:null,o=0,l=0,a=0;for(;;){let h=o<t.length?t[o++]:null,c=h?h.fromA:1e9;if(c-l>=i)for(;s&&s.from<c;){let t=s;if(l>=t.from||c<=t.to||a){let e=Math.max(t.from,l)-a,i=Math.min(t.to,c)-a;t=e>=i?null:new x(e,i,t.tree,t.offset+a,(o>0?1:0)|(h?2:0))}if(t&&n.push(t),s.to>c)break;s=r<e.length?e[r++]:null}if(!h)break;l=h.toA,a=h.toA-h.toB}return n}static addTree(e,t=[],i=!1){let n=[new x(0,e.length,e,0,i?2:0)];for(let i of t)i.to>e.length&&n.push(i);return n}}},704:(e,t,i)=>{i.r(t),i.d(t,{BlankNode:()=>ee,DataFactory:()=>le,Default:()=>ne,DefaultGraph:()=>ie,Literal:()=>Z,NamedNode:()=>K,Parse:()=>De,Quad:()=>oe,Store:()=>ue,Variable:()=>te,fromId:()=>re,rdf:()=>n,toId:()=>se,xsd:()=>r});var n={};i.r(n),i.d(n,{JSON:()=>c,first:()=>l,langString:()=>h,nil:()=>o,rest:()=>a,type:()=>s});var r={};i.r(r),i.d(r,{Decimal:()=>d,NCNames:()=>W,NMTOKEN:()=>G,Name:()=>H,anyURI:()=>_,base64Binary:()=>Q,boolean:()=>f,byte:()=>T,date:()=>y,dateTime:()=>w,dateTimeStamp:()=>b,dayTimeDuration:()=>M,double:()=>g,duration:()=>A,float:()=>m,gDay:()=>S,gMonth:()=>k,gMonthDay:()=>C,gYear:()=>x,gYearMonth:()=>O,hexBinary:()=>z,int:()=>D,integer:()=>p,language:()=>F,long:()=>I,nonNegativeInteger:()=>j,nonPositiveInteger:()=>V,normalizedString:()=>U,positiveInteger:()=>$,short:()=>E,string:()=>u,time:()=>v,token:()=>q,unsignedByte:()=>L,unsignedInt:()=>N,unsignedLong:()=>B,unsignedShort:()=>R,yearMonthDuration:()=>P});const s="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",o="http://www.w3.org/1999/02/22-rdf-syntax-ns#nil",l="http://www.w3.org/1999/02/22-rdf-syntax-ns#first",a="http://www.w3.org/1999/02/22-rdf-syntax-ns#rest",h="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",c="http://www.w3.org/1999/02/22-rdf-syntax-ns#JSON",u="http://www.w3.org/2001/XMLSchema#string",f="http://www.w3.org/2001/XMLSchema#boolean",d="http://www.w3.org/2001/XMLSchema#decimal",p="http://www.w3.org/2001/XMLSchema#integer",g="http://www.w3.org/2001/XMLSchema#double",m="http://www.w3.org/2001/XMLSchema#float",y="http://www.w3.org/2001/XMLSchema#date",v="http://www.w3.org/2001/XMLSchema#time",w="http://www.w3.org/2001/XMLSchema#dateTime",b="http://www.w3.org/2001/XMLSchema#dateTimeStamp",x="http://www.w3.org/2001/XMLSchema#gYear",k="http://www.w3.org/2001/XMLSchema#gMonth",S="http://www.w3.org/2001/XMLSchema#gDay",O="http://www.w3.org/2001/XMLSchema#gYearMonth",C="http://www.w3.org/2001/XMLSchema#gMonthDay",A="http://www.w3.org/2001/XMLSchema#duration",P="http://www.w3.org/2001/XMLSchema#yearMonthDuration",M="http://www.w3.org/2001/XMLSchema#dayTimeDuration",T="http://www.w3.org/2001/XMLSchema#byte",E="http://www.w3.org/2001/XMLSchema#short",D="http://www.w3.org/2001/XMLSchema#int",I="http://www.w3.org/2001/XMLSchema#long",L="http://www.w3.org/2001/XMLSchema#unsignedByte",R="http://www.w3.org/2001/XMLSchema#unsignedShort",N="http://www.w3.org/2001/XMLSchema#unsignedInt",B="http://www.w3.org/2001/XMLSchema#unsignedLong",$="http://www.w3.org/2001/XMLSchema#positiveInteger",j="http://www.w3.org/2001/XMLSchema#nonNegativeInteger",V="http://www.w3.org/2001/XMLSchema#nonPositiveInteger",z="http://www.w3.org/2001/XMLSchema#hexBinary",Q="http://www.w3.org/2001/XMLSchema#base64Binary",_="http://www.w3.org/2001/XMLSchema#anyURI",F="http://www.w3.org/2001/XMLSchema#language",U="http://www.w3.org/2001/XMLSchema#normalizedString",q="http://www.w3.org/2001/XMLSchema#token",G="http://www.w3.org/2001/XMLSchema#NMTOKEN",H="http://www.w3.org/2001/XMLSchema#Name",W="http://www.w3.org/2001/XMLSchema#NCNames";let X=0;class K{constructor(e){this.value=e}get termType(){return"NamedNode"}get id(){return`<${this.value}>`}equals(e){return null!=e&&"NamedNode"===e.termType&&e.value===this.value}toJSON(){return{termType:this.termType,value:this.value}}}const J=new K(u),Y=new K(h);class Z{constructor(e,t,i){this.value=e,this.language=t,this.datatype=i,i.value===u?this.id=JSON.stringify(e):i.value===h&&""!==t?this.id=`${JSON.stringify(e)}@${this.language}`:this.id=`${JSON.stringify(e)}^^<${i.value}>`}get termType(){return"Literal"}get datatypeString(){return this.datatype.value}equals(e){return null!=e&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.equals(e.datatype)}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatype.value}}}}class ee{constructor(e){this.value=e}get id(){return`_:${this.value}`}get termType(){return"BlankNode"}equals(e){return null!=e&&this.termType===e.termType&&e.value===this.value}toJSON(){return{termType:this.termType,value:this.value}}}class te{constructor(e){this.value=e}get id(){return`?${this.value}`}get termType(){return"Variable"}equals(e){return null!=e&&this.termType===e.termType&&e.value===this.value}toJSON(){return{termType:this.termType,value:this.value}}}class ie{get termType(){return"DefaultGraph"}get id(){return""}get value(){return""}equals(e){return null!=e&&this.termType===e.termType}toJSON(){return{termType:this.termType,value:""}}}const ne=new ie;function re(e){if(""===e)return ne;switch(e[0]){case"_":return new ee(e.slice(2));case"?":return new te(e.slice(1));case'"':const t=e.lastIndexOf('"');if(-1===t)throw new Error(`Invalid literal id ${e}`);const i=e.slice(1,t);if(e.length===t+1)return new Z(i,"",J);if("@"===e[t+1])return new Z(i,e.slice(t+2),Y);if('"^^<'===e.slice(t,t+4)&&">"===e[e.length-1]){const n=new K(e.slice(t+4,-1));return new Z(i,"",n)}throw new Error(`Invalid literal id ${e}`);case"<":return new K(e.slice(1,-1));default:throw new Error(`Invalid term id ${e}`)}}function se(e){if("string"==typeof e)return e;switch(e.termType){case"NamedNode":return`<${e.value}>`;case"BlankNode":return"_:"+e.value;case"Variable":return"?"+e.value;case"DefaultGraph":return"";case"Literal":return'"'+e.value+'"'+(e.language?"@"+e.language:e.datatype&&e.datatype.value!==u?"^^<"+e.datatype.value+">":"");default:throw new Error("Invalid term: "+e)}}class oe extends Array{constructor(e,t,i,n){super(e,t,i,n||ne),this.subject=e,this.predicate=t,this.object=i,this.graph=n||ne}get termType(){return"Quad"}get value(){return""}get id(){return this.graph.equals(ne)?`${this.subject.id} ${this.predicate.id} ${this.object.id} .`:`${this.subject.id} ${this.predicate.id} ${this.object.id} ${this.graph.id} .`}toJSON(){return{termType:"Quad",value:"",subject:this.subject.toJSON(),predicate:this.predicate.toJSON(),object:this.object.toJSON(),graph:this.graph.toJSON()}}equals(e){return null!=e&&"Quad"===e.termType&&this.subject.equals(e.subject)&&this.predicate.equals(e.predicate)&&this.object.equals(e.object)&&this.graph.equals(e.graph)}}const le={namedNode:function(e){return new K(e)},blankNode:function(e){return new ee(e||"b"+X++)},variable:function(e){return new te(e)},literal:function(e,t){if(void 0===t)return new Z(e,"",J);if("string"==typeof t)return new Z(e,t,Y);{const i=new K(t.value);return new Z(e,"",i)}},defaultGraph:function(){return ne},quad:function(e,t,i,n){return new oe(e,t,i,n)}},ae=["subject","predicate","object"],he=["predicate","object","subject"],ce=["object","subject","predicate"];class ue{constructor(e){this.sizeCache=0,this.graphMap=new Map,this.id=0,this.ids=new Map([["><",0]]),this.entities=new Map,this.blankNodeIndex=0,void 0!==e&&this.addQuads(e)}[Symbol.iterator](){return this.quads(null,null,null,null)}get size(){if(null!==this.sizeCache)return this.sizeCache;let e=0;for(const{subjects:t}of this.graphMap.values())for(const i of t.values())for(const t of i.values())e+=t.size;return this.sizeCache=e,e}addToIndex(e,t,i,n){let r=!1;const s=e.get(t);if(void 0===s)e.set(t,new Map([[i,new Set([n])]]));else{const e=s.get(i);void 0===e?s.set(i,new Set([n])):(r=e.has(n),e.add(n))}return r}removeFromIndex(e,t,i,n){const r=e.get(t),s=r.get(i);s.delete(n),0===s.size&&(r.delete(i),0===r.size&&e.delete(t))}*generateIndex(e,t,i,n,r,s){const o=["","",""];if(t){const l=e.get(t);void 0!==l&&(o[0]=this.entities.get(t),yield*this.generateIndex1(o,l,i||null,n||null,r,s))}else for(const[t,l]of e)o[0]=this.entities.get(t),yield*this.generateIndex1(o,l,i||null,n||null,r,s)}*generateIndex1(e,t,i,n,r,s){if(i){const o=t.get(i);void 0!==o&&(e[1]=this.entities.get(i),yield*this.generateIndex2(e,n,o,r,s))}else for(const[i,o]of t)e[1]=this.entities.get(i),yield*this.generateIndex2(e,n,o,r,s)}*generateIndex2(e,t,i,n,r){if(t)i.has(t)&&(e[2]=this.entities.get(t),yield this.makeQuad(e,n,r));else for(const t of i)e[2]=this.entities.get(t),yield this.makeQuad(e,n,r)}makeQuad([e,t,i],[n,r,s],o){const l={subject:null,predicate:null,object:null};return l[n]=re(e),l[r]=re(t),l[s]=re(i),new oe(l.subject,l.predicate,l.object,re(o))}*loopByKey0(e,t){const i=e.get(t);void 0!==i&&(yield*i.keys())}*loopByKey1(e,t){for(const[i,n]of e)n.has(t)&&(yield i)}*loopBy2Keys(e,t,i){const n=e.get(t);if(void 0!==n){const e=n.get(i);void 0!==e&&(yield*e.keys())}}countInIndex(e,t,i,n){let r=0;if(null===t)for(const t of e.values())r+=this.countInIndex1(t,i,n);else{const s=e.get(t);void 0!==s&&(r=this.countInIndex1(s,i,n))}return r}countInIndex1(e,t,i){let n=0;if(null===t)for(const t of e.values())n+=null===i?t.size:t.has(i)?1:0;else{const r=e.get(t);void 0!==r&&(n+=null===i?r.size:r.has(i)?1:0)}return n}getGraphIndices(e){if(null==e)return this.graphMap;{const t=this.graphMap.get(e);return new Map([[e,t]])}}getGraphIndex(e){const t=this.graphMap.get(e);if(void 0!==t)return t;const i=Object.freeze({subjects:new Map,predicates:new Map,objects:new Map});return this.graphMap.set(e,i),i}addQuad(...e){let[t,i,n,r]=["","","",""];1===e.length?(t=se(e[0].subject),i=se(e[0].predicate),n=se(e[0].object),r=se(e[0].graph)):(t=se(e[0]),i=se(e[1]),n=se(e[2]),r=void 0===e[3]?"":se(e[3]));const s=this.getGraphIndex(r);if(!this.ids.has(t)){const e=++this.id;this.entities.set(e,t),this.ids.set(t,e)}const o=this.ids.get(t);if(!this.ids.has(i)){const e=++this.id;this.entities.set(e,i),this.ids.set(i,e)}const l=this.ids.get(i);if(!this.ids.has(n)){const e=++this.id;this.entities.set(e,n),this.ids.set(n,e)}const a=this.ids.get(n),h=this.addToIndex(s.subjects,o,l,a);return this.addToIndex(s.predicates,l,a,o),this.addToIndex(s.objects,a,o,l),this.sizeCache=null,h}addQuads(e){for(const t of e)this.addQuad(t)}removeQuad(...e){let[t,i,n,r]=["","","",""];1===e.length?(t=se(e[0].subject),i=se(e[0].predicate),n=se(e[0].object),r=se(e[0].graph)):3===e.length?(t=se(e[0]),i=se(e[1]),n=se(e[2]),r=""):4===e.length&&(t=se(e[0]),i=se(e[1]),n=se(e[2]),r=se(e[3]));const s=this.graphMap.get(r);if(void 0===s)return!1;if(!this.ids.has(t)||!this.ids.has(i)||!this.ids.has(n))return!1;const[o,l,a]=[this.ids.get(t),this.ids.get(i),this.ids.get(n)],h=s.subjects.get(o);if(void 0===h)return!1;const c=h.get(l);return!(void 0===c||!c.has(a)||(this.removeFromIndex(s.subjects,o,l,a),this.removeFromIndex(s.predicates,l,a,o),this.removeFromIndex(s.objects,a,o,l),null!==this.sizeCache&&this.sizeCache--,0===s.subjects.size&&this.graphMap.delete(r),0))}remove(e){for(const t of e)this.removeQuad(t)}removeMatches(e,t,i,n){return this.remove(this.quads(e,t,i,n))}deleteGraph(e){return this.removeMatches(null,null,null,e)}getGraphId(e){const t=se(e);return this.graphMap.has(t)?t:void 0}getIds(e,t,i,n){return[null===e?null:this.ids.get(se(e)),null===t?null:this.ids.get(se(t)),null===i?null:this.ids.get(se(i)),null===n?null:this.getGraphId(n)]}*q(e,t,i,n){const r=this.getGraphIndices(n);for(const[n,{subjects:s,predicates:o,objects:l}]of r)e?i?yield*this.generateIndex(l,i,e,t,ce,n):yield*this.generateIndex(s,e,t,null,ae,n):t?yield*this.generateIndex(o,t,i,null,he,n):i?yield*this.generateIndex(l,i,null,null,ce,n):yield*this.generateIndex(s,null,null,null,ae,n)}*quads(e,t,i,n){const[r,s,o,l]=this.getIds(e,t,i,n);void 0!==r&&void 0!==s&&void 0!==o&&void 0!==l&&(yield*this.q(r,s,o,l))}getQuads(e,t,i,n){return Array.from(this.quads(e,t,i,n))}countQuads(e,t,i,n){const[r,s,o,l]=this.getIds(e,t,i,n);if(void 0===r||void 0===s||void 0===o||void 0===l)return 0;const a=this.getGraphIndices(l);let h=0;for(const e of a.values())h+=r?o?this.countInIndex(e.objects,o,r,s):this.countInIndex(e.subjects,r,s,o):s?this.countInIndex(e.predicates,s,o,r):this.countInIndex(e.objects,o,r,s);return h}getSubjects(e,t,i){return Array.from(this.subjects(e,t,i))}*subjects(e,t,i){const[n,r,s,o]=this.getIds(null,e,t,i);if(void 0===r||void 0===s||void 0===o)return;const l=this.getGraphIndices(o),a=new Set;for(const{subjects:e,predicates:t,objects:i}of l.values()){let n;n=r?s?this.loopBy2Keys(t,r,s):this.loopByKey1(e,r):s?this.loopByKey0(i,s):e.keys();for(const e of n)yield*this.unique(e,a)}}getPredicates(e,t,i){return Array.from(this.predicates(e,t,i))}*predicates(e,t,i){const[n,r,s,o]=this.getIds(e,null,t,i);if(void 0===n||void 0===s||void 0===o)return;const l=this.getGraphIndices(o),a=new Set;for(const{subjects:e,predicates:t,objects:i}of l.values()){let r;r=n?s?this.loopBy2Keys(i,s,n):this.loopByKey0(e,n):s?this.loopByKey1(t,s):t.keys();for(const e of r)yield*this.unique(e,a)}}getObjects(e,t,i){return Array.from(this.objects(e,t,i))}*objects(e,t,i){const[n,r,s,o]=this.getIds(e,t,null,i);if(void 0===n||void 0===r||void 0===o)return;const l=this.getGraphIndices(o),a=new Set;for(const{subjects:e,predicates:t,objects:i}of l.values())if(n)if(r)for(const t of this.loopBy2Keys(e,n,r))yield*this.unique(t,a);else for(const e of this.loopByKey1(i,n))yield*this.unique(e,a);else if(r)for(const e of this.loopByKey0(t,r))yield*this.unique(e,a);else for(const e of i.keys())yield*this.unique(e,a)}getGraphs(e,t,i){return Array.from(this.graphs(e,t,i))}*graphs(e,t,i){const[n,r,s,o]=this.getIds(e,t,i,null);if(void 0!==n&&void 0!==r&&void 0!==s)for(const e of this.graphMap.keys()){const t=re(e);for(const i of this.q(n,r,s,e)){yield t;break}}}*unique(e,t){t.has(e)||(t.add(e),yield re(this.entities.get(e)))}createBlankNode(e){let t="";if(e){t="_:"+e;for(let i=1;this.ids.has(t);i++)t="_:"+e+i}else do{t="_:b"+this.blankNodeIndex++}while(this.ids.has(t));const i=++this.id;return this.ids.set(t,i),this.entities.set(i,t),le.blankNode(t.substr(2))}}const fe=()=>new Error("named node without closing angle bracket"),de=e=>new Error(`Unexpected character '${e}'`),pe=e=>new Error(`quad without closing period ${e}`),ge="<",me=ge.length,ye="> ",ve=ye.length,we="_:",be=we.length,xe=" ",ke=xe.length,Se='"'.length,Oe=/\\(.)/g,Ce=e=>{switch(e){case"\\n":return"\n";case"\\r":return"\r";case'\\"':return'"';case"\\\\":return"\\";default:throw new Error(`Unknown token ${e}`)}},Ae='"@'.length,Pe='"^^<',Me=Pe.length,Te=new K("http://www.w3.org/2001/XMLSchema#string"),Ee=new K("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString");function*De(e){if(!e||0===e.length)return;let t,i,n,r,s,o,l,a;for(const h of e.split("\n"))if(""!==h){switch(t=-1,i=-1,h.charAt(0)){case ge:if(t=h.indexOf(ye),-1===t)throw fe();const e=h.substring(me,t);s=new K(e),i=t+ve;break;case"_":t=h.indexOf(xe);const n=h.substring(be,t);s=new ee(n),i=t+ke;break;default:throw de(h.charAt(0))}if(t=h.indexOf(ye,i),-1===t)throw fe();switch(i=h.indexOf(ge,i)+me,o=new K(h.substring(i,t)),i=t+ve,h.charAt(i)){case ge:if(i+=me,t=h.indexOf(">",i),-1===t)throw fe();l=new K(h.substring(i,t)),i=t+ve;break;case"_":if(i=h.indexOf(we,i)+be,t=h.indexOf(xe,i),-1===t)throw pe(h);const e=h.substring(i,t);l=new ee(e),i=t+ke;break;case'"':i+=Se;const s=h.lastIndexOf('"'),o=h.substring(i,s).replace(Oe,Ce);if(i=s,h.substring(i,i+Me)===Pe){if(t=h.indexOf(">",i+Me),-1===t)throw fe();const e=h.substring(i+Me,t);n=null,r=new K(e),i=t+ve}else if('"@'===h.substring(i,i+Ae)){if(t=h.indexOf(" ",i+Ae),-1===t)throw pe(h);n=h.substring(i+Ae,t),r=Ee,i=t}else n=null,r=Te,i+=Se+1;l=null===n?new Z(o,"",r):new Z(o,n,Ee);break;default:throw de(h.charAt(i))}if(h[i]===ge){if(i+=me,t=h.indexOf(ye,i),-1===t)throw fe();if(h.substring(t,t+ve)!==ye)throw fe();const e=h.substring(i,t);i=t+ve,a=new K(e)}else if("_"===h[i]){if(h.substring(i,i+be)!==we)throw new Error("invalid blank node label");if(i+=be,t=h.indexOf(xe,i),-1===t)throw pe(h);const e=h.substring(i,t);a=new ee(e),i=t+ke}else a=ne;if("."!==h.substring(i))throw pe(h);yield new oe(s,o,l,a)}}},279:(e,t,i)=>{i.d(t,{V:()=>o});const n="undefined"==typeof Symbol?"__":Symbol.for(""),r="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),s="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class o{constructor(e,t){this.rules=[];let{process:i,extend:n}=t||{};function r(e){if(/^@/.test(e))return[e];let t=e.split(",");return i?t.map(i):t}function s(e,t,i){let o=[],l=/^@(\w+)\b/.exec(e[0]);if(l&&null==t)return i.push(e[0]+";");for(let a in t){let h=t[a];if(/&/.test(a))s(e.map((e=>n?n(a,e):a.replace(/&/,e))),h,i);else if(h&&"object"==typeof h){if(!l)throw new RangeError("The value of a property ("+a+") should be a primitive value.");s("keyframes"==l[1]?[a]:r(a),h,o)}else null!=h&&o.push(a.replace(/_.*/,"").replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()))+": "+h+";")}(o.length||l&&"keyframes"==l[1])&&i.push(e.join(",")+" {"+o.join(" ")+"}")}for(let t in e)s(r(t),e[t],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let e=s[n]||1;return s[n]=e+1,""+e.toString(36)}static mount(e,t){(e[r]||new a(e)).mount(Array.isArray(t)?t:[t])}}let l=null;class a{constructor(e){if(e.adoptedStyleSheets&&"undefined"!=typeof CSSStyleSheet){if(l)return e.adoptedStyleSheets=[l.sheet].concat(e.adoptedStyleSheets),e[r]=l;this.sheet=new CSSStyleSheet,e.adoptedStyleSheets=[this.sheet].concat(e.adoptedStyleSheets),l=this}else{this.styleTag=(e.ownerDocument||e).createElement("style");let t=e.head||e;t.insertBefore(this.styleTag,t.firstChild)}this.modules=[],e[r]=this}mount(e){let t=this.sheet,i=0,n=0;for(let r=0;r<e.length;r++){let s=e[r],o=this.modules.indexOf(s);if(o<n&&o>-1&&(this.modules.splice(o,1),n--,o=-1),-1==o){if(this.modules.splice(n++,0,s),t)for(let e=0;e<s.rules.length;e++)t.insertRule(s.rules[e],i++)}else{for(;n<o;)i+=this.modules[n++].rules.length;i+=s.rules.length,n++}}if(!t){let e="";for(let t=0;t<this.modules.length;t++)e+=this.modules[t].getRules()+"\n";this.styleTag.textContent=e}}}},265:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=(...e)=>({[Symbol.iterator](){const t=e.map((e=>e[Symbol.iterator]()));let i=0;return{next(){const e=t.map((e=>e.next()));return e.some((({done:e})=>e))?{done:!0,value:void 0}:{done:!1,value:[...e.map((({value:e})=>e)),i++]}}}}})}},t={};function i(n){if(t[n])return t[n].exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,i),r.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e=i(697),t=i(400),n=i(876),r=i(320);function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,n=new Array(t);i<t;i++)n[i]=e[i];return n}var o,l=(0,r.makeLinter)(),a=[].concat(function(e){if(Array.isArray(e))return s(e)}(o=r.editableConfig)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(o)||function(e,t){if(e){if("string"==typeof e)return s(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);return"Object"===i&&e.constructor&&(i=e.constructor.name),"Map"===i||"Set"===i?Array.from(e):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?s(e,t):void 0}}(o)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[l]),h=t.EditorState.create({doc:"# Welcome to the schema editor!\n# If you're new, you probably want to read\n# the schema language documentation here:\n# http://r1.underlay.org/docs/schemas\n\nnamespace ex http://example.com#\nnamespace ul http://underlay.org/ns/\n\ntype foo {\n  ex:a -> ? uri ;\n  ex:b -> string ;\n  ex:c -> dateTime ;\n}\n\nedge ex:cool ==/ ex:map /=> ex:wau\n\nclass ex:cool unit\n\nclass ex:wau {\n  ex:bar -> foo ;\n  ex:age -> integer ;\n  ex:self -> * ex:wau ;\n}\n\n\n\n\n\n\n",extensions:a}),c=new n.EditorView({state:h,parent:document.getElementById("editor")});(0,e.openLintPanel)(c),c.focus()})()})();
//# sourceMappingURL=tasl.min.js.map